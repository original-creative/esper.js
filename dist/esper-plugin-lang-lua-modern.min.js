/*!
 * esper.js
 * 
 * Compiled: Mon Dec 27 2021 15:08:08 GMT+0800 (China Standard Time)
 * Target  : web (umd)
 * Profile : modern
 * Version : 8fea03d-dirty
 * 
 * 
 * The MIT License (MIT)
 * Copyright (c) 2016 Robert Blanckaert
 * 
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * 
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("esper")):"function"==typeof define&&define.amd?define(["esper"],n):"object"==typeof exports?exports["esper-plugin-lang-lua"]=n(require("esper")):t["esper-plugin-lang-lua"]=n(t.esper)}("undefined"!=typeof self?self:this,(function(t){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(r,a,function(n){return t[n]}.bind(null,a));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=42)}({1:function(n,e){n.exports=t},27:function(t,n){},28:function(t,n,e){(function(t){function e(t,n){for(var e=0,r=t.length-1;r>=0;r--){var a=t[r];"."===a?t.splice(r,1):".."===a?(t.splice(r,1),e++):e&&(t.splice(r,1),e--)}if(n)for(;e--;e)t.unshift("..");return t}function r(t,n){if(t.filter)return t.filter(n);for(var e=[],r=0;r<t.length;r++)n(t[r],r,t)&&e.push(t[r]);return e}n.resolve=function(){for(var n="",a=!1,u=arguments.length-1;u>=-1&&!a;u--){var i=u>=0?arguments[u]:t.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(n=i+"/"+n,a="/"===i.charAt(0))}return(a?"/":"")+(n=e(r(n.split("/"),(function(t){return!!t})),!a).join("/"))||"."},n.normalize=function(t){var u=n.isAbsolute(t),i="/"===a(t,-1);return(t=e(r(t.split("/"),(function(t){return!!t})),!u).join("/"))||u||(t="."),t&&i&&(t+="/"),(u?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,(function(t,n){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},n.relative=function(t,e){function r(t){for(var n=0;n<t.length&&""===t[n];n++);for(var e=t.length-1;e>=0&&""===t[e];e--);return n>e?[]:t.slice(n,e-n+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var a=r(t.split("/")),u=r(e.split("/")),i=Math.min(a.length,u.length),l=i,o=0;o<i;o++)if(a[o]!==u[o]){l=o;break}var s=[];for(o=l;o<a.length;o++)s.push("..");return(s=s.concat(u.slice(l))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var n=t.charCodeAt(0),e=47===n,r=-1,a=!0,u=t.length-1;u>=1;--u)if(47===(n=t.charCodeAt(u))){if(!a){r=u;break}}else a=!1;return-1===r?e?"/":".":e&&1===r?"/":t.slice(0,r)},n.basename=function(t,n){var e=function(t){"string"!=typeof t&&(t+="");var n,e=0,r=-1,a=!0;for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!a){e=n+1;break}}else-1===r&&(a=!1,r=n+1);return-1===r?"":t.slice(e,r)}(t);return n&&e.substr(-1*n.length)===n&&(e=e.substr(0,e.length-n.length)),e},n.extname=function(t){"string"!=typeof t&&(t+="");for(var n=-1,e=0,r=-1,a=!0,u=0,i=t.length-1;i>=0;--i){var l=t.charCodeAt(i);if(47!==l)-1===r&&(a=!1,r=i+1),46===l?-1===n?n=i:1!==u&&(u=1):-1!==n&&(u=-1);else if(!a){e=i+1;break}}return-1===n||-1===r||0===u||1===u&&n===r-1&&n===e+1?"":t.slice(n,r)};var a="b"==="ab".substr(-1)?function(t,n,e){return t.substr(n,e)}:function(t,n,e){return n<0&&(n=t.length+n),t.substr(n,e)}}).call(this,e(29))},29:function(t,n){var e,r,a=t.exports={};function u(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function l(t){if(e===setTimeout)return setTimeout(t,0);if((e===u||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:u}catch(t){e=u}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var o,s=[],c=!1,f=-1;function p(){c&&o&&(c=!1,o.length?s=o.concat(s):f=-1,s.length&&d())}function d(){if(!c){var t=l(p);c=!0;for(var n=s.length;n;){for(o=s,s=[];++f<n;)o&&o[f].run();f=-1,n=s.length}o=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function b(t,n){this.fun=t,this.array=n}function h(){}a.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];s.push(new b(t,n)),1!==s.length||c||l(d)},b.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},42:function(t,n,e){var r=e(1),a=e(43);r._registerPlugin(a)},43:function(t,n,e){"use strict";const r=e(44);const a=e(47);let u,i=t.exports={name:"lang-lua",lua2js:r,parser:function(t,n){n=n||{};let e=r.parse(t,{forceVar:!1,decorateLuaObjects:!0,luaCalls:!0,luaOperators:!0,encloseWithFunctions:!1}),a=function(t){return t.loc=e.loc,t.range=e.range,t},u=e,i={type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"self"},init:{type:"ThisExpression"}}],kind:"var",userCode:!1};if(n.inFunctionBody){let t=[i];Array.prototype.push.apply(t,u.body),u=a({type:"Program",body:t})}else u=a({type:"FunctionExpression",params:[],body:u}),u=a({type:"CallExpression",callee:u,arguments:[]}),u=a({type:"ExpressionStatement",expression:u}),u=a({type:"Program",body:[i,u]});return u},init:function(t){t.languages.lua=i,u=t.languages.javascript.parser(a)},startupCode:()=>u,setupRealm:function(t,n){t.loadLangaugeStartupCode(u)}}},44:function(t,n,e){var r=e(45),a=e(46);this.stdlib=a,this.parse=r.parser.parse},45:function(t,n,e){this.parser=function(){function t(t,n,e,r,a,u){this.message=t,this.expected=n,this.found=e,this.offset=r,this.line=a,this.column=u,this.name="SyntaxError"}return function(t,n){function e(){this.constructor=t}e.prototype=n.prototype,t.prototype=new e}(t,Error),{SyntaxError:t,parse:function(n){var e,r=arguments.length>1?arguments[1]:{},a={},u={start:Yr},i=Yr,l=a,o=function(){return hu(),!0},s=void 0,c=null,f="#",p={type:"literal",value:"#",description:'"#"'},d=/^[^\n]/,b={type:"class",value:"[^\\n]",description:"[^\\n]"},h="\n",v={type:"literal",value:"\n",description:'"\\n"'},m=function(t){return xu(t)},y=/^[ \r\t\n]/,g={type:"class",value:"[ \\r\\t\\n]",description:"[ \\r\\t\\n]"},x="--[",A={type:"literal",value:"--[",description:'"--["'},_="]",k={type:"literal",value:"]",description:'"]"'},w="--",C={type:"literal",value:"--",description:'"--"'},E={type:"any",description:"any character"},S=";",T={type:"literal",value:";",description:'";"'},j=function(t){return vu.blockStatement([t])},M=function(t,n){return t=lu(t),vu.blockStatement(null===n?t:t.concat([n[1]]))},L=function(t,n){return null===t?[]:null===n?t:uu(t,n,1)},V="if",O={type:"literal",value:"if",description:'"if"'},R="then",F={type:"literal",value:"then",description:'"then"'},I="elseif",D={type:"literal",value:"elseif",description:'"elseif"'},N="else",q={type:"literal",value:"else",description:'"else"'},P="do",B={type:"literal",value:"do",description:'"do"'},J="end",z={type:"literal",value:"end",description:'"end"'},U="return",W={type:"literal",value:"return",description:'"return"'},Z="local",$={type:"literal",value:"local",description:'"local"'},X="nil",Y={type:"literal",value:"nil",description:'"nil"'},G="true",H={type:"literal",value:"true",description:'"true"'},K="false",Q={type:"literal",value:"false",description:'"false"'},tt="function",nt={type:"literal",value:"function",description:'"function"'},et="not",rt={type:"literal",value:"not",description:'"not"'},at="break",ut={type:"literal",value:"break",description:'"break"'},it="for",lt={type:"literal",value:"for",description:'"for"'},ot="until",st={type:"literal",value:"until",description:'"until"'},ct="while",ft={type:"literal",value:"while",description:'"while"'},pt=/^[a-zA-Z_]/,dt={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},bt=/^[a-zA-Z0-9_]/,ht={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},vt=function(t){return t},mt=/^[0-9]/,yt={type:"class",value:"[0-9]",description:"[0-9]"},gt=".",xt={type:"literal",value:".",description:'"."'},At="\\",_t={type:"literal",value:"\\",description:'"\\\\"'},kt=/^[abfrntv'"\\]/,wt={type:"class",value:"[abfrntv'\"\\\\]",description:"[abfrntv'\"\\\\]"},Ct=function(t){return{n:"\n",b:"\b",f:"\f",r:"\r",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\"}[t]},Et="\\\n",St={type:"literal",value:"\\\n",description:'"\\\\\\n"'},Tt=function(){return"\n"},jt="\\z",Mt={type:"literal",value:"\\z",description:'"\\\\z"'},Lt=function(){return""},Vt="\\x",Ot={type:"literal",value:"\\x",description:'"\\\\x"'},Rt=/^[0-9a-f]/,Ft={type:"class",value:"[0-9a-f]",description:"[0-9a-f]"},It=function(t,n){return String.fromCharCode(parseInt("0x"+t+n))},Dt=function(t,n,e){return String.fromCharCode(parseInt(""+t+n+e))},Nt=function(){Wr("Invalid Escape Sequence")},qt=/^[^'"']/,Pt={type:"class",value:"[^'\"']",description:"[^'\"']"},Bt=/^[']/,Jt={type:"class",value:"[']",description:"[']"},zt=function(){return ou({})},Ut=/^["]/,Wt={type:"class",value:'["]',description:'["]'},Zt="'",$t={type:"literal",value:"'",description:'"\'"'},Xt=function(t,n,e){return su(e,"string",'"',t)},Yt=function(t,n,e){return n.join("")},Gt='"',Ht={type:"literal",value:'"',description:'"\\""'},Kt=function(t,n,e){return su(e,"string","'",t)},Qt="[",tn={type:"literal",value:"[",description:'"["'},nn=function(t){return t},en="=",rn={type:"literal",value:"=",description:'"="'},an=/^[\n]/,un={type:"class",value:"[\\n]",description:"[\\n]"},ln=function(t){return t},on=function(t){return fu("Found an expression but expected a statement: "+t)},sn=function(t){return vu.emptyStatement()},cn=function(t){return fu("`=` expected")},fn=/^[^\n\t\r ]/,pn={type:"class",value:"[^\\n\\t\\r ]",description:"[^\\n\\t\\r ]"},dn=function(t){return fu("Parser error near `"+t+"`")},bn="debugger",hn={type:"literal",value:"debugger",description:'"debugger"'},vn=function(){return{type:"ExpressionStatement",expression:{type:"Identifier",name:"debugger; "}}},mn=function(t,n,e){return su(e,"do","end",t)},yn=function(t,n,e){return n?n[0]:{type:"BlockStatement",body:[]}},gn=",",xn={type:"literal",value:",",description:'","'},An=function(t,n,e,r,a,u,i){return su(i,"for","end",t)},_n=function(t,n,e,r,a,u,i){var l,o=null==a?{type:"Literal",value:1}:a[3],s=(t=Au.tempVar(e),Au.tempVar(o)),c=Au.tempVar(r),f=Au.tempVar(),p=vu.assignmentExpression("=",f.id,Au.binaryExpression("+",f.id,s.id));l=Au.luaOperator("forcomp",s.id,f.id,c.id),(u=u?u[0]:{type:"BlockStatement",body:[]}).body.unshift(vu.variableDeclaration("let",[{type:"VariableDeclarator",id:n,init:f.id,userCode:!1}]));var d={type:"ForStatement",init:vu.variableDeclaration("let",[{type:"VariableDeclarator",id:f.id,init:t.id,userCode:!1}]),body:u,update:p,test:l,loc:ru(),range:au()};return Au.encloseDecls([d],t,s,c)},kn="in",wn={type:"literal",value:"in",description:'"in"'},Cn=function(t,n,e,r,a){return su(a,"for","end",t)},En=function(t,n,e,r,a){var u=[],i={type:"Literal",value:null},l={type:"Identifier",name:"undefined"},o=Au.tempName(),s=Au.tempName(),c=Au.tempName(),f=n[0],p=[];for(var d in n)p.push({type:"VariableDeclarator",id:n[d]});var b,h=vu.callExpression(o,[s,c]);b=Au.bulkAssign(n,[h]);return u.push(vu.variableDeclaration("let",p)),u.push({type:"WhileStatement",test:{type:"Literal",value:!0},body:Au.blockStatement([b,{type:"IfStatement",test:vu.binaryExpression("||",vu.binaryExpression("===",f,i),vu.binaryExpression("===",f,l)),consequent:{type:"BreakStatement"}},Au.assign(c,f),r.body])}),Au.encloseDeclsUnpack(u,[o,s,c],e)},Sn=function(t,n){var e=vu.variableDeclaration("let",[]);if(!iu("decorateLuaObjects",!1)||t.length<2&&n.length<2){for(var r=0;r<t.length;++r)e.declarations.push({type:"VariableDeclarator",id:t[r],init:n[r]});return e}var a=Au.bulkAssign(t,n);for(r=0;r<t.length;++r)e.declarations.push({type:"VariableDeclarator",id:t[r]});return[e,a]},Tn=function(t){for(var n=vu.variableDeclaration("let",[]),e=0;e<t.length;++e)n.declarations.push({type:"VariableDeclarator",id:t[e]});return n},jn=function(t,n){return Au.bulkAssign(t,n).expression},Mn=function(){return{type:"BreakStatement",loc:ru(),range:au()}},Ln=function(t){return{type:"ExpressionStatement",expression:t,loc:ru(),range:au()}},Vn=function(t,n){return ou({test:t,then:n})},On=function(){return cu("if","then")},Rn=function(t,n,e,r,a,u){return su(u,"if","end",t)},Fn=function(t,n,e,r,a,u){var i={type:"IfStatement",test:n,consequent:e,loc:ru(),range:au()},l=i;for(var o in r){var s=r[o][1],c={type:"IfStatement",test:s.test,consequent:s.then,loc:s.loc,range:s.range};l.alternate=c,l=c}return null!==a&&(l.alternate=a[3]),i},In=function(t){var n;return null==t||(1==t.length?n=t[0]:t.length>1&&(n=iu("decorateLuaObjects",!1)?Au.luaOperatorA("makeMultiReturn",t):{type:"ArrayExpression",elements:t})),{type:"ReturnStatement",argument:n,loc:ru(),range:au()}},Dn=function(){return{type:"ReturnStatement",loc:ru()}},Nn=function(){return cu("if")},qn=function(t,n){return{type:"WhileStatement",test:t,body:n?n[0]:{type:"EmptyStatement"},loc:ru(),range:au()}},Pn="repeat",Bn={type:"literal",value:"repeat",description:'"repeat"'},Jn=function(){return cu("repeat","until")},zn=function(){return fu("repeat until needs terminations criteria")},Un=function(t,n){return{type:"DoWhileStatement",test:{type:"UnaryExpression",operator:"!",argument:n,prefix:!0,loc:n.loc,range:n.range},body:t?t[0]:{type:"EmptyStatement"},loc:ru(),range:au()}},Wn="that",Zn={type:"literal",value:"that",description:'"that"'},$n=function(){return{type:"ThisExpression"}},Xn=function(t,n){if(t=Au.translateExpressionIfNeeded(t),null===n)return t;var e=[];for(var r in n){var a=n[r];e.push(a[1]),e.push(Au.translateExpressionIfNeeded(a[3]))}return bu(e,t,1)},Yn="-",Gn={type:"literal",value:"-",description:'"-"'},Hn="+",Kn={type:"literal",value:"+",description:'"+"'},Qn="==",te={type:"literal",value:"==",description:'"=="'},ne=">=",ee={type:"literal",value:">=",description:'">="'},re="<=",ae={type:"literal",value:"<=",description:'"<="'},ue="~=",ie={type:"literal",value:"~=",description:'"~="'},le=">",oe={type:"literal",value:">",description:'">"'},se="<",ce={type:"literal",value:"<",description:'"<"'},fe="..",pe={type:"literal",value:"..",description:'".."'},de="and",be={type:"literal",value:"and",description:'"and"'},he="or",ve={type:"literal",value:"or",description:'"or"'},me="*",ye={type:"literal",value:"*",description:'"*"'},ge="//",xe={type:"literal",value:"//",description:'"//"'},Ae="/",_e={type:"literal",value:"/",description:'"/"'},ke="%",we={type:"literal",value:"%",description:'"%"'},Ce="^",Ee={type:"literal",value:"^",description:'"^"'},Se="(",Te={type:"literal",value:"(",description:'"("'},je=")",Me={type:"literal",value:")",description:'")"'},Le=function(t){return t},Ve=":",Oe={type:"literal",value:":",description:'":"'},Re=function(t,n){for(var e=t,r=0;r<n.length;++r){var a=n[r];null!=a[1]&&((e=vu.memberExpression(e,a[1][1],!1)).selfSuggar=!0),e=Au.callExpression(e,a[2])}return e},Fe=function(t){return[t]},Ie=function(t){return[{type:"Literal",value:t,loc:ru(),range:au()}]},De=function(t){return"CallExpression"==t.type||"Identifier"==t.type&&"__lua$rest"==t.name?Au.luaOperator("oneValue",t):t},Ne="...",qe={type:"literal",value:"...",description:'"..."'},Pe=function(){return ou({type:"Identifier",name:"__lua$rest"})},Be=function(t,n){if(0==n.length)return t;var e=t;for(var r in n)e=vu.memberExpression(e,n[r].exp,n[r].computed),n[r].suggar&&(e.selfSuggar=!0);return e},Je=/^[.:]/,ze={type:"class",value:"[.:]",description:"[.:]"},Ue=function(t,n){return{exp:n,suggar:":"==t,computed:!1}},We=function(t){return{exp:t,suggar:!1,computed:!0}},Ze=function(){return fu("Malformed argument list.")},$e=function(t,n){return uu(t,n,3)},Xe=function(t,n){return uu(t,n,3)},Ye=function(){return cu(")","argument list")},Ge=function(t){return t},He=function(){return[]},Ke=function(t,n,e){var r=vu.memberExpression(t,n[0],n[1]);for(var a in e)r=vu.memberExpression(r,e[a][0],e[a][1]);return r},Qe=function(t){return[t,!0]},tr=function(t){return[t,!1]},nr="{",er={type:"literal",value:"{",description:'"{"'},rr="}",ar={type:"literal",value:"}",description:'"}"'},ur=function(t,n){var e={type:"ObjectExpression",properties:[],loc:ru(),range:au()},r=uu(t,n,3),a=0,u=[];for(var i in r){void 0===(c=r[i]).key&&(c.key={type:"Literal",value:++a,arrayLike:!0}),c.kind="init",e.properties.push(c)}if(iu("decorateLuaObjects",!1)){var l=[],o=[],s=!0;for(var i in e.properties){var c;(c=e.properties[i]).key.arrayLike?(l.push(c.value),s=!0):(u.push({type:"ArrayExpression",elements:[c.key,c.value]}),o.push(c),s=!1)}return e.properties=o,e={type:"ArrayExpression",elements:u},o.length<1&&(e={type:"Literal",value:null}),Au.luaOperator.apply(Au,["makeTable",e,{type:"Literal",value:s}].concat(l))}return e},ir=function(t,n){return"Identifier"==t.type&&(t={type:"Literal",value:t.name}),{key:t,value:n}},lr=function(t){return{value:t}},or=function(t,n){return{key:t,value:n}},sr=function(t,n,e,r){return su(r,"function","end",t)},cr=function(t,n,e,r){if("MemberExpression"!=n.type&&iu("allowRegularFunctions",!1))return vu.functionDeclaration(n,e.params,e.body);var a=e.params.slice(0);n.selfSuggar&&(a=[{type:"Identifier",name:"self"}].concat(e.params)),e.rest&&Au.injectRest(e.body.body,a.length);var u=vu.functionExpression(null,a,e.body);return iu("decorateLuaObjects",!1)&&(u=Au.luaOperator("makeFunction",u)),Au.assign(n,u)},fr=function(t,n,e,r){if(e.rest&&Au.injectRest(e.body.body,e.params.length),iu("allowRegularFunctions",!1))return vu.functionDeclaration(n,e.params,e.body);var a=vu.functionExpression(n,e.params,e.body);iu("decorateLuaObjects",!1)&&(a=Au.luaOperator("makeFunction",a));var u={type:"VariableDeclarator",id:n,init:a};return vu.variableDeclaration("let",[u])},pr=function(t){var n={type:"FunctionExpression",body:t.body,params:t.params,loc:ru(),range:au()};return t.rest&&Au.injectRest(t.body.body,t.params.length),iu("decorateLuaObjects",!1)?Au.luaOperator("makeFunction",n):n},dr=function(t,n,e){return su(e,"function","end",t)},br=function(t,n,e){return n},hr=function(t,n,e){return{params:t,body:e,rest:null!=n}},vr=function(t){return{params:[],body:t,rest:!0}},mr=function(t,n){return uu(t,n)},yr=function(){return[]},gr=function(t,n){return"#"==t?(n=Au.translateExpressionIfNeeded(n),Au.luaOperator("count",n)):{type:"UnaryExpression",operator:{not:"!","-":"-","#":"#"}[t],argument:Au.translateExpressionIfNeeded(n),prefix:!0,loc:ru(),range:au()}},xr=function(t){return{type:"Identifier",name:t,loc:ru(),range:au()}},Ar=function(t){return{type:"Literal",value:{nil:null,false:!1,true:!0}[t],loc:ru(),range:au()}},_r=/^[eE]/,kr={type:"class",value:"[eE]",description:"[eE]"},wr=function(t,n){return{type:"Literal",value:parseFloat(t)*Math.pow(10,parseInt(n)),loc:ru(),range:au()}},Cr="0",Er={type:"literal",value:"0",description:'"0"'},Sr=/^[Xx]/,Tr={type:"class",value:"[Xx]",description:"[Xx]"},jr=/^[0-9a-fA-F]/,Mr={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},Lr=function(t){return{type:"Literal",value:parseInt(t),loc:ru(),range:au()}},Vr=function(t){return{type:"Literal",value:parseFloat(t),loc:ru(),range:au()}},Or=function(t){return{type:"Literal",value:t,loc:ru(),range:au()}},Rr=0,Fr=0,Ir=0,Dr={line:1,column:1,seenCR:!1},Nr=0,qr=[],Pr=0;if("startRule"in r){if(!(r.startRule in u))throw new Error("Can't start parsing from rule \""+r.startRule+'".');i=u[r.startRule]}function Br(){return n.substring(Fr,Rr)}function Jr(){return Fr}function zr(){return Zr(Fr).line}function Ur(){return Zr(Fr).column}function Wr(t){throw Xr(t,null,Fr)}function Zr(t){return Ir!==t&&(Ir>t&&(Ir=0,Dr={line:1,column:1,seenCR:!1}),function(t,e,r){var a,u;for(a=e;a<r;a++)"\n"===(u=n.charAt(a))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===u||"\u2028"===u||"\u2029"===u?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(Dr,Ir,t),Ir=t),Dr}function $r(t){Rr<Nr||(Rr>Nr&&(Nr=Rr,qr=[]),qr.push(t))}function Xr(e,r,a){var u=Zr(a),i=a<n.length?n.charAt(a):null;return null!==r&&function(t){var n=1;for(t.sort((function(t,n){return t.description<n.description?-1:t.description>n.description?1:0}));n<t.length;)t[n-1]===t[n]?t.splice(n,1):n++}(r),new t(null!==e?e:function(t,n){var e,r=new Array(t.length);for(e=0;e<t.length;e++)r[e]=t[e].description;return"Expected "+(t.length>1?r.slice(0,-1).join(", ")+" or "+r[t.length-1]:r[0])+" but "+(n?'"'+function(t){function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(t){return"\\x"+n(t)})).replace(/[\u0180-\u0FFF]/g,(function(t){return"\\u0"+n(t)})).replace(/[\u1080-\uFFFF]/g,(function(t){return"\\u"+n(t)}))}(n)+'"':"end of input")+" found."}(r,i),r,i,a,u.line,u.column)}function Yr(){var t,e,r,u,i;if(t=Rr,Fr=Rr,(o()?s:l)!==a){if(e=Rr,35===n.charCodeAt(Rr)?(r=f,Rr++):(r=a,0===Pr&&$r(p)),r!==a){for(u=[],d.test(n.charAt(Rr))?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(b));i!==a;)u.push(i),d.test(n.charAt(Rr))?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(b));u!==a?(10===n.charCodeAt(Rr)?(i=h,Rr++):(i=a,0===Pr&&$r(v)),i!==a?e=r=[r,u,i]:(Rr=e,e=l)):(Rr=e,e=l)}else Rr=e,e=l;e===a&&(e=c),e!==a?((r=Gr())===a&&(r=c),r!==a&&(u=Kr())!==a?((i=Gr())===a&&(i=c),i!==a?(Fr=t,t=m(u)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;return t}function Gr(){var t,e,r,u,i,o;if(t=[],y.test(n.charAt(Rr))?(e=n.charAt(Rr),Rr++):(e=a,0===Pr&&$r(g)),e===a&&(e=Rr,n.substr(Rr,3)===x?(r=x,Rr+=3):(r=a,0===Pr&&$r(A)),r!==a&&(u=la())!==a?(93===n.charCodeAt(Rr)?(i=_,Rr++):(i=a,0===Pr&&$r(k)),i!==a?e=r=[r,u,i]:(Rr=e,e=l)):(Rr=e,e=l),e===a))if(e=Rr,n.substr(Rr,2)===w?(r=w,Rr+=2):(r=a,0===Pr&&$r(C)),r!==a){for(u=Rr,i=[],d.test(n.charAt(Rr))?(o=n.charAt(Rr),Rr++):(o=a,0===Pr&&$r(b));o!==a;)i.push(o),d.test(n.charAt(Rr))?(o=n.charAt(Rr),Rr++):(o=a,0===Pr&&$r(b));if(i!==a?(10===n.charCodeAt(Rr)?(o=h,Rr++):(o=a,0===Pr&&$r(v)),o!==a?u=i=[i,o]:(Rr=u,u=l)):(Rr=u,u=l),u===a)for(u=[],n.length>Rr?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(E));i!==a;)u.push(i),n.length>Rr?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(E));u!==a?e=r=[r,u]:(Rr=e,e=l)}else Rr=e,e=l;if(e!==a){for(;e!==a;)if(t.push(e),y.test(n.charAt(Rr))?(e=n.charAt(Rr),Rr++):(e=a,0===Pr&&$r(g)),e===a&&(e=Rr,n.substr(Rr,3)===x?(r=x,Rr+=3):(r=a,0===Pr&&$r(A)),r!==a&&(u=la())!==a?(93===n.charCodeAt(Rr)?(i=_,Rr++):(i=a,0===Pr&&$r(k)),i!==a?e=r=[r,u,i]:(Rr=e,e=l)):(Rr=e,e=l),e===a))if(e=Rr,n.substr(Rr,2)===w?(r=w,Rr+=2):(r=a,0===Pr&&$r(C)),r!==a){for(u=Rr,i=[],d.test(n.charAt(Rr))?(o=n.charAt(Rr),Rr++):(o=a,0===Pr&&$r(b));o!==a;)i.push(o),d.test(n.charAt(Rr))?(o=n.charAt(Rr),Rr++):(o=a,0===Pr&&$r(b));if(i!==a?(10===n.charCodeAt(Rr)?(o=h,Rr++):(o=a,0===Pr&&$r(v)),o!==a?u=i=[i,o]:(Rr=u,u=l)):(Rr=u,u=l),u===a)for(u=[],n.length>Rr?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(E));i!==a;)u.push(i),n.length>Rr?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(E));u!==a?e=r=[r,u]:(Rr=e,e=l)}else Rr=e,e=l}else t=l;return t}function Hr(){var t,e,r,u,i;if(t=[],e=Rr,(r=Gr())===a&&(r=c),r!==a?(59===n.charCodeAt(Rr)?(u=S,Rr++):(u=a,0===Pr&&$r(T)),u!==a?((i=Gr())===a&&(i=c),i!==a?e=r=[r,u,i]:(Rr=e,e=l)):(Rr=e,e=l)):(Rr=e,e=l),e!==a)for(;e!==a;)t.push(e),e=Rr,(r=Gr())===a&&(r=c),r!==a?(59===n.charCodeAt(Rr)?(u=S,Rr++):(u=a,0===Pr&&$r(T)),u!==a?((i=Gr())===a&&(i=c),i!==a?e=r=[r,u,i]:(Rr=e,e=l)):(Rr=e,e=l)):(Rr=e,e=l);else t=l;return t===a&&(t=Gr()),t}function Kr(){var t,n,e,r,u;if(t=Rr,(n=ka())!==a&&(Fr=t,n=j(n)),(t=n)===a)if(t=Rr,(n=Qr())!==a){if(e=Rr,r=[],(u=Hr())!==a)for(;u!==a;)r.push(u),u=Hr();else r=l;r!==a&&(u=ka())!==a?e=r=[r,u]:(Rr=e,e=l),e===a&&(e=c),e!==a?(Fr=t,t=n=M(n,e)):(Rr=t,t=l)}else Rr=t,t=l;return t}function Qr(){var t,e,r,u,i,o,s;if(t=Rr,(e=oa())===a&&(e=c),e!==a){if(r=[],u=Rr,i=[],(o=Hr())!==a)for(;o!==a;)i.push(o),o=Hr();else i=l;for(i!==a&&(o=oa())!==a?u=i=[i,o]:(Rr=u,u=l);u!==a;){if(r.push(u),u=Rr,i=[],(o=Hr())!==a)for(;o!==a;)i.push(o),o=Hr();else i=l;i!==a&&(o=oa())!==a?u=i=[i,o]:(Rr=u,u=l)}if(r!==a){for(u=[],i=Rr,(o=Gr())===a&&(o=c),o!==a?(59===n.charCodeAt(Rr)?(s=S,Rr++):(s=a,0===Pr&&$r(T)),s!==a?i=o=[o,s]:(Rr=i,i=l)):(Rr=i,i=l);i!==a;)u.push(i),i=Rr,(o=Gr())===a&&(o=c),o!==a?(59===n.charCodeAt(Rr)?(s=S,Rr++):(s=a,0===Pr&&$r(T)),s!==a?i=o=[o,s]:(Rr=i,i=l)):(Rr=i,i=l);u!==a?(Fr=t,t=e=L(e,r)):(Rr=t,t=l)}else Rr=t,t=l}else Rr=t,t=l;return t}function ta(){var t,e,r;return n.substr(Rr,2)===V?(t=V,Rr+=2):(t=a,0===Pr&&$r(O)),t===a&&(n.substr(Rr,4)===R?(t=R,Rr+=4):(t=a,0===Pr&&$r(F)),t===a&&(n.substr(Rr,6)===I?(t=I,Rr+=6):(t=a,0===Pr&&$r(D)),t===a&&(n.substr(Rr,4)===N?(t=N,Rr+=4):(t=a,0===Pr&&$r(q)),t===a&&(n.substr(Rr,2)===P?(t=P,Rr+=2):(t=a,0===Pr&&$r(B)),t===a&&(n.substr(Rr,3)===J?(t=J,Rr+=3):(t=a,0===Pr&&$r(z)),t===a&&(n.substr(Rr,6)===U?(t=U,Rr+=6):(t=a,0===Pr&&$r(W)),t===a&&(n.substr(Rr,5)===Z?(t=Z,Rr+=5):(t=a,0===Pr&&$r($)),t===a&&(n.substr(Rr,3)===X?(t=X,Rr+=3):(t=a,0===Pr&&$r(Y)),t===a&&(n.substr(Rr,4)===G?(t=G,Rr+=4):(t=a,0===Pr&&$r(H)),t===a&&(t=Rr,n.substr(Rr,5)===K?(e=K,Rr+=5):(e=a,0===Pr&&$r(Q)),e!==a?(n.substr(Rr,8)===tt?(r=tt,Rr+=8):(r=a,0===Pr&&$r(nt)),r!==a?t=e=[e,r]:(Rr=t,t=l)):(Rr=t,t=l),t===a&&(n.substr(Rr,3)===et?(t=et,Rr+=3):(t=a,0===Pr&&$r(rt)),t===a&&(n.substr(Rr,5)===at?(t=at,Rr+=5):(t=a,0===Pr&&$r(ut)),t===a&&(n.substr(Rr,3)===it?(t=it,Rr+=3):(t=a,0===Pr&&$r(lt)),t===a&&(n.substr(Rr,5)===ot?(t=ot,Rr+=5):(t=a,0===Pr&&$r(st)),t===a&&(n.substr(Rr,8)===tt?(t=tt,Rr+=8):(t=a,0===Pr&&$r(nt)),t===a&&(n.substr(Rr,5)===ct?(t=ct,Rr+=5):(t=a,0===Pr&&$r(ft)),t===a&&(t=La())===a&&(t=Ma()))))))))))))))))),t}function na(){var t,e,r,u,i,o,c;if(t=Rr,e=Rr,Pr++,r=Rr,(u=ta())!==a?((i=Gr())===a&&(i=Rr,Pr++,n.length>Rr?(o=n.charAt(Rr),Rr++):(o=a,0===Pr&&$r(E)),Pr--,o===a?i=s:(Rr=i,i=l)),i!==a?r=u=[u,i]:(Rr=r,r=l)):(Rr=r,r=l),Pr--,r===a?e=s:(Rr=e,e=l),e!==a){if(r=Rr,u=Rr,pt.test(n.charAt(Rr))?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(dt)),i!==a){for(o=[],bt.test(n.charAt(Rr))?(c=n.charAt(Rr),Rr++):(c=a,0===Pr&&$r(ht));c!==a;)o.push(c),bt.test(n.charAt(Rr))?(c=n.charAt(Rr),Rr++):(c=a,0===Pr&&$r(ht));o!==a?u=i=[i,o]:(Rr=u,u=l)}else Rr=u,u=l;u!==a&&(u=n.substring(r,Rr)),(r=u)!==a?(Fr=t,t=e=vt(r)):(Rr=t,t=l)}else Rr=t,t=l;return t}function ea(){var t,e,r,u,i,o,s;if(t=Rr,e=Rr,r=[],mt.test(n.charAt(Rr))?(u=n.charAt(Rr),Rr++):(u=a,0===Pr&&$r(yt)),u!==a)for(;u!==a;)r.push(u),mt.test(n.charAt(Rr))?(u=n.charAt(Rr),Rr++):(u=a,0===Pr&&$r(yt));else r=l;if(r!==a){if(u=Rr,46===n.charCodeAt(Rr)?(i=gt,Rr++):(i=a,0===Pr&&$r(xt)),i!==a){if(o=[],mt.test(n.charAt(Rr))?(s=n.charAt(Rr),Rr++):(s=a,0===Pr&&$r(yt)),s!==a)for(;s!==a;)o.push(s),mt.test(n.charAt(Rr))?(s=n.charAt(Rr),Rr++):(s=a,0===Pr&&$r(yt));else o=l;o!==a?u=i=[i,o]:(Rr=u,u=l)}else Rr=u,u=l;u===a&&(u=c),u!==a?e=r=[r,u]:(Rr=e,e=l)}else Rr=e,e=l;return e!==a&&(e=n.substring(t,Rr)),t=e}function ra(){var t,e,r,u,i,o;return t=Rr,92===n.charCodeAt(Rr)?(e=At,Rr++):(e=a,0===Pr&&$r(_t)),e!==a?(kt.test(n.charAt(Rr))?(r=n.charAt(Rr),Rr++):(r=a,0===Pr&&$r(wt)),r!==a?(Fr=t,t=e=Ct(r)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,n.substr(Rr,2)===Et?(e=Et,Rr+=2):(e=a,0===Pr&&$r(St)),e!==a&&(Fr=t,e=Tt()),(t=e)===a&&(t=Rr,n.substr(Rr,2)===jt?(e=jt,Rr+=2):(e=a,0===Pr&&$r(Mt)),e!==a&&(r=Gr())!==a?(Fr=t,t=e=Lt()):(Rr=t,t=l),t===a&&(t=Rr,n.substr(Rr,2)===Vt?(e=Vt,Rr+=2):(e=a,0===Pr&&$r(Ot)),e!==a?(r=Rr,Rt.test(n.charAt(Rr))?(u=n.charAt(Rr),Rr++):(u=a,0===Pr&&$r(Ft)),u!==a&&(u=n.substring(r,Rr)),(r=u)!==a?(u=Rr,Rt.test(n.charAt(Rr))?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(Ft)),i!==a&&(i=n.substring(u,Rr)),(u=i)!==a?(Fr=t,t=e=It(r,u)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,92===n.charCodeAt(Rr)?(e=At,Rr++):(e=a,0===Pr&&$r(_t)),e!==a?(r=Rr,mt.test(n.charAt(Rr))?(u=n.charAt(Rr),Rr++):(u=a,0===Pr&&$r(yt)),u!==a&&(u=n.substring(r,Rr)),(r=u)!==a?(u=Rr,mt.test(n.charAt(Rr))?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(yt)),i===a&&(i=c),i!==a&&(i=n.substring(u,Rr)),(u=i)!==a?(i=Rr,mt.test(n.charAt(Rr))?(o=n.charAt(Rr),Rr++):(o=a,0===Pr&&$r(yt)),o===a&&(o=c),o!==a&&(o=n.substring(i,Rr)),(i=o)!==a?(Fr=t,t=e=Dt(r,u,i)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,92===n.charCodeAt(Rr)?(e=At,Rr++):(e=a,0===Pr&&$r(_t)),e!==a&&(Fr=t,e=Nt()),(t=e)===a&&(t=Rr,qt.test(n.charAt(Rr))?(e=n.charAt(Rr),Rr++):(e=a,0===Pr&&$r(Pt)),e!==a&&(e=n.substring(t,Rr)),t=e)))))),t}function aa(){var t,e;return t=Rr,Bt.test(n.charAt(Rr))?(e=n.charAt(Rr),Rr++):(e=a,0===Pr&&$r(Jt)),e!==a&&(Fr=t,e=zt()),t=e}function ua(){var t,e;return t=Rr,Ut.test(n.charAt(Rr))?(e=n.charAt(Rr),Rr++):(e=a,0===Pr&&$r(Wt)),e!==a&&(Fr=t,e=zt()),t=e}function ia(){var t,e,r,u;if(t=Rr,(e=ua())!==a){for(r=[],(u=ra())===a&&(39===n.charCodeAt(Rr)?(u=Zt,Rr++):(u=a,0===Pr&&$r($t)));u!==a;)r.push(u),(u=ra())===a&&(39===n.charCodeAt(Rr)?(u=Zt,Rr++):(u=a,0===Pr&&$r($t)));r!==a?((u=ua())===a&&(u=[]),u!==a?(Fr=Rr,(Xt(e,r,u)?s:l)!==a?(Fr=t,t=e=Yt(e,r,u)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;if(t===a){if(t=Rr,(e=aa())!==a){for(r=[],(u=ra())===a&&(34===n.charCodeAt(Rr)?(u=Gt,Rr++):(u=a,0===Pr&&$r(Ht)));u!==a;)r.push(u),(u=ra())===a&&(34===n.charCodeAt(Rr)?(u=Gt,Rr++):(u=a,0===Pr&&$r(Ht)));r!==a?((u=aa())===a&&(u=[]),u!==a?(Fr=Rr,(Kt(e,r,u)?s:l)!==a?(Fr=t,t=e=Yt(e,r,u)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;t===a&&(t=Rr,91===n.charCodeAt(Rr)?(e=Qt,Rr++):(e=a,0===Pr&&$r(tn)),e!==a&&(r=la())!==a?(93===n.charCodeAt(Rr)?(u=_,Rr++):(u=a,0===Pr&&$r(k)),u!==a?(Fr=t,t=e=nn(r)):(Rr=t,t=l)):(Rr=t,t=l))}return t}function la(){var t,e,r,u,i,o,f,p,d,b,h;if(t=Rr,61===n.charCodeAt(Rr)?(e=en,Rr++):(e=a,0===Pr&&$r(rn)),e!==a&&(r=la())!==a?(61===n.charCodeAt(Rr)?(u=en,Rr++):(u=a,0===Pr&&$r(rn)),u!==a?(Fr=t,t=e=vt(r)):(Rr=t,t=l)):(Rr=t,t=l),t===a)if(t=Rr,91===n.charCodeAt(Rr)?(e=Qt,Rr++):(e=a,0===Pr&&$r(tn)),e!==a)if(an.test(n.charAt(Rr))?(r=n.charAt(Rr),Rr++):(r=a,0===Pr&&$r(un)),r===a&&(r=c),r!==a){if(u=Rr,i=[],o=Rr,f=Rr,Pr++,p=Rr,93===n.charCodeAt(Rr)?(d=_,Rr++):(d=a,0===Pr&&$r(k)),d!==a){for(b=[],61===n.charCodeAt(Rr)?(h=en,Rr++):(h=a,0===Pr&&$r(rn));h!==a;)b.push(h),61===n.charCodeAt(Rr)?(h=en,Rr++):(h=a,0===Pr&&$r(rn));b!==a?(93===n.charCodeAt(Rr)?(h=_,Rr++):(h=a,0===Pr&&$r(k)),h!==a?p=d=[d,b,h]:(Rr=p,p=l)):(Rr=p,p=l)}else Rr=p,p=l;for(Pr--,p===a?f=s:(Rr=f,f=l),f!==a?(n.length>Rr?(p=n.charAt(Rr),Rr++):(p=a,0===Pr&&$r(E)),p!==a?o=f=[f,p]:(Rr=o,o=l)):(Rr=o,o=l);o!==a;){if(i.push(o),o=Rr,f=Rr,Pr++,p=Rr,93===n.charCodeAt(Rr)?(d=_,Rr++):(d=a,0===Pr&&$r(k)),d!==a){for(b=[],61===n.charCodeAt(Rr)?(h=en,Rr++):(h=a,0===Pr&&$r(rn));h!==a;)b.push(h),61===n.charCodeAt(Rr)?(h=en,Rr++):(h=a,0===Pr&&$r(rn));b!==a?(93===n.charCodeAt(Rr)?(h=_,Rr++):(h=a,0===Pr&&$r(k)),h!==a?p=d=[d,b,h]:(Rr=p,p=l)):(Rr=p,p=l)}else Rr=p,p=l;Pr--,p===a?f=s:(Rr=f,f=l),f!==a?(n.length>Rr?(p=n.charAt(Rr),Rr++):(p=a,0===Pr&&$r(E)),p!==a?o=f=[f,p]:(Rr=o,o=l)):(Rr=o,o=l)}i!==a&&(i=n.substring(u,Rr)),(u=i)!==a?(93===n.charCodeAt(Rr)?(i=_,Rr++):(i=a,0===Pr&&$r(k)),i!==a?(Fr=t,t=e=ln(u)):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;return t}function oa(){var t,e,r,u,i,o;if((t=sa())===a&&(t=ga())===a&&(t=ha())===a&&(t=va())===a&&(t=Ca())===a&&(t=wa())===a&&(t=_a())===a&&(t=xa())===a&&(t=ca())===a&&(t=ma())===a&&(t=Xa())===a&&(t=Ya())===a&&(t=Rr,e=Rr,Pr++,r=Rr,(u=Gr())===a&&(u=c),u!==a&&(i=ta())!==a?r=u=[u,i]:(Rr=r,r=l),Pr--,r===a?e=s:(Rr=e,e=l),e!==a?(r=Rr,(u=Ta())!==a&&(u=n.substring(r,Rr)),(r=u)!==a?(Fr=Rr,(u=(u=on(r))?s:l)!==a?(Fr=t,t=e=sn(r)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,e=Rr,Pr++,r=Rr,(u=Gr())===a&&(u=c),u!==a&&(i=ta())!==a?r=u=[u,i]:(Rr=r,r=l),Pr--,r===a?e=s:(Rr=e,e=l),e!==a?(r=Rr,(u=nu())!==a&&(u=n.substring(r,Rr)),(r=u)!==a?(Fr=Rr,(u=(u=cn(r))?s:l)!==a?(Fr=t,t=e=sn(r)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a)))if(t=Rr,e=Rr,Pr++,r=Rr,(u=Gr())===a&&(u=c),u!==a&&(i=ta())!==a?r=u=[u,i]:(Rr=r,r=l),Pr--,r===a?e=s:(Rr=e,e=l),e!==a)if(r=Rr,fn.test(n.charAt(Rr))?(u=n.charAt(Rr),Rr++):(u=a,0===Pr&&$r(pn)),u!==a&&(u=n.substring(r,Rr)),(r=u)!==a){for(u=[],d.test(n.charAt(Rr))?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(b));i!==a;)u.push(i),d.test(n.charAt(Rr))?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(b));u!==a?(an.test(n.charAt(Rr))?(i=n.charAt(Rr),Rr++):(i=a,0===Pr&&$r(un)),i===a&&(i=Rr,Pr++,n.length>Rr?(o=n.charAt(Rr),Rr++):(o=a,0===Pr&&$r(E)),Pr--,o===a?i=s:(Rr=i,i=l)),i!==a?(Fr=Rr,(o=(o=dn(r))?s:l)!==a?(Fr=t,t=e=sn(r)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;return t}function sa(){var t,e;return t=Rr,n.substr(Rr,8)===bn?(e=bn,Rr+=8):(e=a,0===Pr&&$r(hn)),e!==a&&(Fr=t,e=vn()),t=e}function ca(){var t,e,r,u,i;return t=Rr,(e=pa())!==a&&Gr()!==a?(r=Rr,(u=Kr())!==a&&(i=Gr())!==a?r=u=[u,i]:(Rr=r,r=l),r===a&&(r=c),r!==a?(n.substr(Rr,3)===J?(u=J,Rr+=3):(u=a,0===Pr&&$r(z)),u===a&&(u=[]),u!==a?(Fr=Rr,(i=(i=mn(e,r,u))?s:l)!==a?(Fr=t,t=e=yn(e,r,u)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function fa(){var t,e;return t=Rr,n.substr(Rr,2)===V?(e=V,Rr+=2):(e=a,0===Pr&&$r(O)),e!==a&&(Fr=t,e=zt()),t=e}function pa(){var t,e;return t=Rr,n.substr(Rr,2)===P?(e=P,Rr+=2):(e=a,0===Pr&&$r(B)),e!==a&&(Fr=t,e=zt()),t=e}function da(){var t,e;return t=Rr,n.substr(Rr,3)===it?(e=it,Rr+=3):(e=a,0===Pr&&$r(lt)),e!==a&&(Fr=t,e=zt()),t=e}function ba(){var t,e;return t=Rr,n.substr(Rr,8)===tt?(e=tt,Rr+=8):(e=a,0===Pr&&$r(nt)),e!==a&&(Fr=t,e=zt()),t=e}function ha(){var t,e,r,u,i,o,f,p,d,b,h,v,m,y,g,x,A,_;return t=Rr,(e=da())!==a&&Gr()!==a&&(r=nu())!==a?((u=Gr())===a&&(u=c),u!==a?(61===n.charCodeAt(Rr)?(i=en,Rr++):(i=a,0===Pr&&$r(rn)),i!==a?((o=Gr())===a&&(o=c),o!==a&&(f=Ta())!==a?((p=Gr())===a&&(p=c),p!==a?(44===n.charCodeAt(Rr)?(d=gn,Rr++):(d=a,0===Pr&&$r(xn)),d!==a?((b=Gr())===a&&(b=c),b!==a&&(h=Ta())!==a?(v=Rr,(m=Gr())===a&&(m=c),m!==a?(44===n.charCodeAt(Rr)?(y=gn,Rr++):(y=a,0===Pr&&$r(xn)),y!==a?((g=Gr())===a&&(g=c),g!==a&&(x=Ta())!==a?v=m=[m,y,g,x]:(Rr=v,v=l)):(Rr=v,v=l)):(Rr=v,v=l),v===a&&(v=c),v!==a&&(m=Gr())!==a?(n.substr(Rr,2)===P?(y=P,Rr+=2):(y=a,0===Pr&&$r(B)),y!==a&&(g=Gr())!==a?(x=Rr,(A=Kr())!==a&&(_=Gr())!==a?x=A=[A,_]:(Rr=x,x=l),x===a&&(x=c),x!==a?(n.substr(Rr,3)===J?(A=J,Rr+=3):(A=a,0===Pr&&$r(z)),A===a&&(A=[]),A!==a?(Fr=Rr,(_=(_=An(e,r,f,h,v,x,A))?s:l)!==a?(Fr=t,t=e=_n(e,r,f,h,v,x,A)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function va(){var t,e,r,u,i,o,f,p,d,b;return t=Rr,(e=da())!==a&&Gr()!==a&&(r=Ba())!==a&&Gr()!==a?(n.substr(Rr,2)===kn?(u=kn,Rr+=2):(u=a,0===Pr&&$r(wn)),u!==a&&Gr()!==a&&(i=qa())!==a&&Gr()!==a?(n.substr(Rr,2)===P?(o=P,Rr+=2):(o=a,0===Pr&&$r(B)),o!==a?((f=Gr())===a&&(f=c),f!==a&&(p=Kr())!==a?((d=Gr())===a&&(d=c),d!==a?(n.substr(Rr,3)===J?(b=J,Rr+=3):(b=a,0===Pr&&$r(z)),b===a&&(b=[]),b!==a?(Fr=Rr,(Cn(e,r,i,p,b)?s:l)!==a?(Fr=t,t=e=En(e,r,i,p,b)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function ma(){var t,e,r,u,i,o,s;return t=Rr,n.substr(Rr,5)===Z?(e=Z,Rr+=5):(e=a,0===Pr&&$r($)),e!==a&&Gr()!==a&&(r=Ba())!==a?((u=Gr())===a&&(u=c),u!==a?(61===n.charCodeAt(Rr)?(i=en,Rr++):(i=a,0===Pr&&$r(rn)),i!==a?((o=Gr())===a&&(o=c),o!==a&&(s=qa())!==a?(Fr=t,t=e=Sn(r,s)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,n.substr(Rr,5)===Z?(e=Z,Rr+=5):(e=a,0===Pr&&$r($)),e!==a&&Gr()!==a&&(r=Ba())!==a?(Fr=t,t=e=Tn(r)):(Rr=t,t=l)),t}function ya(){var t,e,r,u,i,o;return t=Rr,(e=Pa())!==a?((r=Gr())===a&&(r=c),r!==a?(61===n.charCodeAt(Rr)?(u=en,Rr++):(u=a,0===Pr&&$r(rn)),u!==a?((i=Gr())===a&&(i=c),i!==a&&(o=qa())!==a?(Fr=t,t=e=jn(e,o)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function ga(){var t,e;return t=Rr,n.substr(Rr,5)===at?(e=at,Rr+=5):(e=a,0===Pr&&$r(ut)),e!==a&&(Fr=t,e=Mn()),t=e}function xa(){var t,n;return t=Rr,(n=ya())===a&&(n=Oa()),n!==a&&(Fr=t,n=Ln(n)),t=n}function Aa(){var t,e,r,u,i;return t=Rr,n.substr(Rr,6)===I?(e=I,Rr+=6):(e=a,0===Pr&&$r(D)),e!==a&&Gr()!==a&&(r=Ta())!==a&&Gr()!==a?(n.substr(Rr,4)===R?(u=R,Rr+=4):(u=a,0===Pr&&$r(F)),u!==a&&Gr()!==a&&(i=Kr())!==a?(Fr=t,t=e=Vn(r,i)):(Rr=t,t=l)):(Rr=t,t=l),t}function _a(){var t,e,r,u,i,o,f,p,d,b,h;if(t=Rr,(e=fa())!==a)if(Gr()!==a)if((r=Ta())!==a)if(Gr()!==a)if(n.substr(Rr,4)===R?(u=R,Rr+=4):(u=a,0===Pr&&$r(F)),u===a&&(Fr=Rr,u=(u=On())?s:l),u!==a)if(Gr()!==a)if((i=Kr())!==a){for(o=[],f=Rr,(p=Gr())===a&&(p=c),p!==a&&(d=Aa())!==a?f=p=[p,d]:(Rr=f,f=l);f!==a;)o.push(f),f=Rr,(p=Gr())===a&&(p=c),p!==a&&(d=Aa())!==a?f=p=[p,d]:(Rr=f,f=l);o!==a?(f=Rr,(p=Gr())===a&&(p=c),p!==a?(n.substr(Rr,4)===N?(d=N,Rr+=4):(d=a,0===Pr&&$r(q)),d!==a&&(b=Gr())!==a&&(h=Kr())!==a?f=p=[p,d,b,h]:(Rr=f,f=l)):(Rr=f,f=l),f===a&&(f=c),f!==a?((p=Gr())===a&&(p=c),p!==a?(n.substr(Rr,3)===J?(d=J,Rr+=3):(d=a,0===Pr&&$r(z)),d===a&&(d=[]),d!==a?(Fr=Rr,(b=(b=Rn(e,r,i,o,f,d))?s:l)!==a?(Fr=t,t=e=Fn(e,r,i,o,f,d)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;return t}function ka(){var t,e,r;return t=Rr,n.substr(Rr,6)===U?(e=U,Rr+=6):(e=a,0===Pr&&$r(W)),e!==a&&Gr()!==a&&(r=qa())!==a?(Fr=t,t=e=In(r)):(Rr=t,t=l),t===a&&(t=Rr,n.substr(Rr,6)===U?(e=U,Rr+=6):(e=a,0===Pr&&$r(W)),e!==a&&(Fr=t,e=Dn()),t=e),t}function wa(){var t,e,r,u,i,o,f;return t=Rr,n.substr(Rr,5)===ct?(e=ct,Rr+=5):(e=a,0===Pr&&$r(ft)),e!==a&&Gr()!==a&&(r=Ta())!==a&&Gr()!==a?(n.substr(Rr,2)===P?(u=P,Rr+=2):(u=a,0===Pr&&$r(B)),u!==a&&Gr()!==a?(i=Rr,(o=Kr())!==a&&(f=Gr())!==a?i=o=[o,f]:(Rr=i,i=l),i===a&&(i=c),i!==a?(n.substr(Rr,3)===J?(o=J,Rr+=3):(o=a,0===Pr&&$r(z)),o===a&&(Fr=Rr,o=(o=Nn())?s:l),o!==a?(Fr=t,t=e=qn(r,i)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function Ca(){var t,e,r,u,i,o;return t=Rr,n.substr(Rr,6)===Pn?(e=Pn,Rr+=6):(e=a,0===Pr&&$r(Bn)),e!==a&&Gr()!==a?(r=Rr,(u=Kr())!==a&&(i=Gr())!==a?r=u=[u,i]:(Rr=r,r=l),r===a&&(r=c),r!==a?((u=Gr())===a&&(u=c),u!==a?(n.substr(Rr,5)===ot?(i=ot,Rr+=5):(i=a,0===Pr&&$r(st)),i===a&&(Fr=Rr,i=(i=Jn())?s:l),i!==a&&Gr()!==a?((o=Ta())===a&&(Fr=Rr,o=(o=zn())?s:l),o!==a?(Fr=t,t=e=Un(r,o)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function Ea(){var t,e;return t=Rr,n.substr(Rr,4)===Wn?(e=Wn,Rr+=4):(e=a,0===Pr&&$r(Zn)),e!==a&&(Fr=t,e=$n()),t=e}function Sa(){var t;return(t=eu())===a&&(t=Ia())===a&&(t=Ga())===a&&(t=Oa())===a&&(t=Ea())===a&&(t=nu())===a&&(t=Za())===a&&(t=tu())===a&&(t=Fa()),t}function Ta(){var t;return(t=ya())===a&&(t=ja()),t}function ja(){var t,n,e,r,u,i,o,s;if(t=Rr,(n=Ua())===a&&(n=Sa()),n!==a){for(e=[],r=Rr,(u=Gr())===a&&(u=c),u!==a&&(i=La())!==a?((o=Gr())===a&&(o=c),o!==a?((s=Ua())===a&&(s=Sa()),s!==a?r=u=[u,i,o,s]:(Rr=r,r=l)):(Rr=r,r=l)):(Rr=r,r=l);r!==a;)e.push(r),r=Rr,(u=Gr())===a&&(u=c),u!==a&&(i=La())!==a?((o=Gr())===a&&(o=c),o!==a?((s=Ua())===a&&(s=Sa()),s!==a?r=u=[u,i,o,s]:(Rr=r,r=l)):(Rr=r,r=l)):(Rr=r,r=l);e!==a?(Fr=t,t=n=Xn(n,e)):(Rr=t,t=l)}else Rr=t,t=l;return t}function Ma(){var t,e;return t=Rr,45===n.charCodeAt(Rr)?(e=Yn,Rr++):(e=a,0===Pr&&$r(Gn)),e===a&&(n.substr(Rr,3)===et?(e=et,Rr+=3):(e=a,0===Pr&&$r(rt)),e===a&&(35===n.charCodeAt(Rr)?(e=f,Rr++):(e=a,0===Pr&&$r(p)))),e!==a&&(e=n.substring(t,Rr)),t=e}function La(){var t,e;return t=Rr,43===n.charCodeAt(Rr)?(e=Hn,Rr++):(e=a,0===Pr&&$r(Kn)),e===a&&(45===n.charCodeAt(Rr)?(e=Yn,Rr++):(e=a,0===Pr&&$r(Gn)),e===a&&(n.substr(Rr,2)===Qn?(e=Qn,Rr+=2):(e=a,0===Pr&&$r(te)),e===a&&(n.substr(Rr,2)===ne?(e=ne,Rr+=2):(e=a,0===Pr&&$r(ee)),e===a&&(n.substr(Rr,2)===re?(e=re,Rr+=2):(e=a,0===Pr&&$r(ae)),e===a&&(n.substr(Rr,2)===ue?(e=ue,Rr+=2):(e=a,0===Pr&&$r(ie)),e===a&&(62===n.charCodeAt(Rr)?(e=le,Rr++):(e=a,0===Pr&&$r(oe)),e===a&&(60===n.charCodeAt(Rr)?(e=se,Rr++):(e=a,0===Pr&&$r(ce)),e===a&&(n.substr(Rr,2)===fe?(e=fe,Rr+=2):(e=a,0===Pr&&$r(pe)),e===a&&(n.substr(Rr,3)===de?(e=de,Rr+=3):(e=a,0===Pr&&$r(be)),e===a&&(n.substr(Rr,2)===he?(e=he,Rr+=2):(e=a,0===Pr&&$r(ve)),e===a&&(42===n.charCodeAt(Rr)?(e=me,Rr++):(e=a,0===Pr&&$r(ye)),e===a&&(n.substr(Rr,2)===ge?(e=ge,Rr+=2):(e=a,0===Pr&&$r(xe)),e===a&&(47===n.charCodeAt(Rr)?(e=Ae,Rr++):(e=a,0===Pr&&$r(_e)),e===a&&(37===n.charCodeAt(Rr)?(e=ke,Rr++):(e=a,0===Pr&&$r(we)),e===a&&(94===n.charCodeAt(Rr)?(e=Ce,Rr++):(e=a,0===Pr&&$r(Ee))))))))))))))))),e!==a&&(e=n.substring(t,Rr)),t=e}function Va(){var t,e,r,u,i,o;return(t=Da())===a&&(t=Rr,40===n.charCodeAt(Rr)?(e=Se,Rr++):(e=a,0===Pr&&$r(Te)),e!==a?((r=Gr())===a&&(r=c),r!==a&&(u=Ta())!==a?((i=Gr())===a&&(i=c),i!==a?(41===n.charCodeAt(Rr)?(o=je,Rr++):(o=a,0===Pr&&$r(Me)),o!==a?(Fr=t,t=e=Le(u)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)),t}function Oa(){var t,e,r,u,i,o,f,p,d;if(t=Rr,e=Rr,Pr++,r=Rr,n.substr(Rr,8)===tt?(u=tt,Rr+=8):(u=a,0===Pr&&$r(nt)),u!==a?((i=Gr())===a&&(i=c),i!==a?(40===n.charCodeAt(Rr)?(o=Se,Rr++):(o=a,0===Pr&&$r(Te)),o!==a?r=u=[u,i,o]:(Rr=r,r=l)):(Rr=r,r=l)):(Rr=r,r=l),Pr--,r===a?e=s:(Rr=e,e=l),e!==a)if((r=Va())!==a){if(u=[],i=Rr,(o=Gr())===a&&(o=c),o!==a?(f=Rr,58===n.charCodeAt(Rr)?(p=Ve,Rr++):(p=a,0===Pr&&$r(Oe)),p!==a&&(d=nu())!==a?f=p=[p,d]:(Rr=f,f=l),f===a&&(f=c),f!==a&&(p=Ra())!==a?i=o=[o,f,p]:(Rr=i,i=l)):(Rr=i,i=l),i!==a)for(;i!==a;)u.push(i),i=Rr,(o=Gr())===a&&(o=c),o!==a?(f=Rr,58===n.charCodeAt(Rr)?(p=Ve,Rr++):(p=a,0===Pr&&$r(Oe)),p!==a&&(d=nu())!==a?f=p=[p,d]:(Rr=f,f=l),f===a&&(f=c),f!==a&&(p=Ra())!==a?i=o=[o,f,p]:(Rr=i,i=l)):(Rr=i,i=l);else u=l;u!==a?(Fr=t,t=e=Re(r,u)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;return t}function Ra(){var t,n;return t=Rr,(n=Ja())!==a&&(Fr=t,n=vt(n)),(t=n)===a&&(t=Rr,(n=Za())!==a&&(Fr=t,n=Fe(n)),(t=n)===a&&(t=Rr,(n=ia())!==a&&(Fr=t,n=Ie(n)),t=n)),t}function Fa(){var t,e,r,u,i,o;return t=Rr,40===n.charCodeAt(Rr)?(e=Se,Rr++):(e=a,0===Pr&&$r(Te)),e!==a?((r=Gr())===a&&(r=c),r!==a&&(u=Ta())!==a?((i=Gr())===a&&(i=c),i!==a?(41===n.charCodeAt(Rr)?(o=je,Rr++):(o=a,0===Pr&&$r(Me)),o!==a?(Fr=t,t=e=De(u)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function Ia(){var t,e;return t=Rr,n.substr(Rr,3)===Ne?(e=Ne,Rr+=3):(e=a,0===Pr&&$r(qe)),e!==a&&(Fr=t,e=Pe()),t=e}function Da(){var t,n,e,r;if(t=Rr,(n=Ea())===a&&(n=nu()),n!==a){for(e=[],r=Na();r!==a;)e.push(r),r=Na();e!==a?(Fr=t,t=n=Be(n,e)):(Rr=t,t=l)}else Rr=t,t=l;return t}function Na(){var t,e,r,u,i,o,s;return t=Rr,(e=Gr())===a&&(e=c),e!==a?(Je.test(n.charAt(Rr))?(r=n.charAt(Rr),Rr++):(r=a,0===Pr&&$r(ze)),r!==a?((u=Gr())===a&&(u=c),u!==a&&(i=nu())!==a?(Fr=t,t=e=Ue(r,i)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,(e=Gr())===a&&(e=c),e!==a?(91===n.charCodeAt(Rr)?(r=Qt,Rr++):(r=a,0===Pr&&$r(tn)),r!==a?((u=Gr())===a&&(u=c),u!==a&&(i=Ta())!==a?((o=Gr())===a&&(o=c),o!==a?(93===n.charCodeAt(Rr)?(s=_,Rr++):(s=a,0===Pr&&$r(k)),s!==a?(Fr=t,t=e=We(i)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)),t}function qa(){var t,e,r,u,i,o,f,p;if(t=Rr,(e=Ta())!==a){for(r=[],u=Rr,(i=Gr())===a&&(i=c),i!==a?(44===n.charCodeAt(Rr)?(o=gn,Rr++):(o=a,0===Pr&&$r(xn)),o!==a?((f=Gr())===a&&(f=c),f!==a?((p=Ta())===a&&(Fr=Rr,p=(p=Ze())?s:l),p!==a?u=i=[i,o,f,p]:(Rr=u,u=l)):(Rr=u,u=l)):(Rr=u,u=l)):(Rr=u,u=l);u!==a;)r.push(u),u=Rr,(i=Gr())===a&&(i=c),i!==a?(44===n.charCodeAt(Rr)?(o=gn,Rr++):(o=a,0===Pr&&$r(xn)),o!==a?((f=Gr())===a&&(f=c),f!==a?((p=Ta())===a&&(Fr=Rr,p=(p=Ze())?s:l),p!==a?u=i=[i,o,f,p]:(Rr=u,u=l)):(Rr=u,u=l)):(Rr=u,u=l)):(Rr=u,u=l);r!==a?(Fr=t,t=e=$e(e,r)):(Rr=t,t=l)}else Rr=t,t=l;return t}function Pa(){var t,e,r,u,i,o,s,f;if(t=Rr,(e=za())!==a){for(r=[],u=Rr,(i=Gr())===a&&(i=c),i!==a?(44===n.charCodeAt(Rr)?(o=gn,Rr++):(o=a,0===Pr&&$r(xn)),o!==a?((s=Gr())===a&&(s=c),s!==a&&(f=za())!==a?u=i=[i,o,s,f]:(Rr=u,u=l)):(Rr=u,u=l)):(Rr=u,u=l);u!==a;)r.push(u),u=Rr,(i=Gr())===a&&(i=c),i!==a?(44===n.charCodeAt(Rr)?(o=gn,Rr++):(o=a,0===Pr&&$r(xn)),o!==a?((s=Gr())===a&&(s=c),s!==a&&(f=za())!==a?u=i=[i,o,s,f]:(Rr=u,u=l)):(Rr=u,u=l)):(Rr=u,u=l);r!==a?(Fr=t,t=e=Xe(e,r)):(Rr=t,t=l)}else Rr=t,t=l;return t}function Ba(){var t,e,r,u,i,o,s,f;if(t=Rr,(e=nu())!==a){for(r=[],u=Rr,(i=Gr())===a&&(i=c),i!==a?(44===n.charCodeAt(Rr)?(o=gn,Rr++):(o=a,0===Pr&&$r(xn)),o!==a?((s=Gr())===a&&(s=c),s!==a&&(f=nu())!==a?u=i=[i,o,s,f]:(Rr=u,u=l)):(Rr=u,u=l)):(Rr=u,u=l);u!==a;)r.push(u),u=Rr,(i=Gr())===a&&(i=c),i!==a?(44===n.charCodeAt(Rr)?(o=gn,Rr++):(o=a,0===Pr&&$r(xn)),o!==a?((s=Gr())===a&&(s=c),s!==a&&(f=nu())!==a?u=i=[i,o,s,f]:(Rr=u,u=l)):(Rr=u,u=l)):(Rr=u,u=l);r!==a?(Fr=t,t=e=$e(e,r)):(Rr=t,t=l)}else Rr=t,t=l;return t}function Ja(){var t,e,r,u,i,o;return t=Rr,40===n.charCodeAt(Rr)?(e=Se,Rr++):(e=a,0===Pr&&$r(Te)),e!==a?((r=Gr())===a&&(r=c),r!==a&&(u=qa())!==a?((i=Gr())===a&&(i=c),i!==a?(41===n.charCodeAt(Rr)?(o=je,Rr++):(o=a,0===Pr&&$r(Me)),o===a&&(Fr=Rr,o=(o=Ye())?s:l),o!==a?(Fr=t,t=e=Ge(u)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,40===n.charCodeAt(Rr)?(e=Se,Rr++):(e=a,0===Pr&&$r(Te)),e!==a?((r=Gr())===a&&(r=c),r!==a?(41===n.charCodeAt(Rr)?(u=je,Rr++):(u=a,0===Pr&&$r(Me)),u===a&&(Fr=Rr,u=(u=Ye())?s:l),u!==a?(Fr=t,t=e=He()):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)),t}function za(){var t;return(t=Ua())===a&&(t=nu()),t}function Ua(){var t,n,e,r,u;if(t=Rr,(n=Oa())===a&&(n=Sa()),n!==a)if((e=Wa())!==a){for(r=[],u=Wa();u!==a;)r.push(u),u=Wa();r!==a?(Fr=t,t=n=Ke(n,e,r)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;return t}function Wa(){var t,e,r,u,i,o;return t=Rr,91===n.charCodeAt(Rr)?(e=Qt,Rr++):(e=a,0===Pr&&$r(tn)),e!==a?((r=Gr())===a&&(r=c),r!==a&&(u=Ta())!==a?((i=Gr())===a&&(i=c),i!==a?(93===n.charCodeAt(Rr)?(o=_,Rr++):(o=a,0===Pr&&$r(k)),o!==a?(Fr=t,t=e=Qe(u)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,46===n.charCodeAt(Rr)?(e=gt,Rr++):(e=a,0===Pr&&$r(xt)),e!==a&&(r=Sa())!==a?(Fr=t,t=e=tr(r)):(Rr=t,t=l)),t}function Za(){var t,e,r,u,i,o,s,f,p,d;if(t=Rr,123===n.charCodeAt(Rr)?(e=nr,Rr++):(e=a,0===Pr&&$r(er)),e!==a)if((r=Gr())===a&&(r=c),r!==a)if((u=$a())===a&&(u=c),u!==a){for(i=[],o=Rr,(s=Gr())===a&&(s=c),s!==a?(44===n.charCodeAt(Rr)?(f=gn,Rr++):(f=a,0===Pr&&$r(xn)),f===a&&(59===n.charCodeAt(Rr)?(f=S,Rr++):(f=a,0===Pr&&$r(T))),f!==a?((p=Gr())===a&&(p=c),p!==a&&(d=$a())!==a?o=s=[s,f,p,d]:(Rr=o,o=l)):(Rr=o,o=l)):(Rr=o,o=l);o!==a;)i.push(o),o=Rr,(s=Gr())===a&&(s=c),s!==a?(44===n.charCodeAt(Rr)?(f=gn,Rr++):(f=a,0===Pr&&$r(xn)),f===a&&(59===n.charCodeAt(Rr)?(f=S,Rr++):(f=a,0===Pr&&$r(T))),f!==a?((p=Gr())===a&&(p=c),p!==a&&(d=$a())!==a?o=s=[s,f,p,d]:(Rr=o,o=l)):(Rr=o,o=l)):(Rr=o,o=l);i!==a?((o=Gr())===a&&(o=c),o!==a?(125===n.charCodeAt(Rr)?(s=rr,Rr++):(s=a,0===Pr&&$r(ar)),s!==a?(Fr=t,t=e=ur(u,i)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;return t}function $a(){var t,e,r,u,i,o,s,f,p,d,b;return t=Rr,(e=eu())===a&&(e=nu()),e!==a?((r=Gr())===a&&(r=c),r!==a?(61===n.charCodeAt(Rr)?(u=en,Rr++):(u=a,0===Pr&&$r(rn)),u!==a?((i=Gr())===a&&(i=c),i!==a&&(o=ja())!==a?(Fr=t,t=e=ir(e,o)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,(e=ja())!==a?((r=Gr())===a&&(r=c),r!==a?(Fr=t,t=e=lr(e)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,(e=Gr())===a&&(e=c),e!==a?(91===n.charCodeAt(Rr)?(r=Qt,Rr++):(r=a,0===Pr&&$r(tn)),r!==a?((u=Gr())===a&&(u=c),u!==a&&(i=Ta())!==a?((o=Gr())===a&&(o=c),o!==a?(93===n.charCodeAt(Rr)?(s=_,Rr++):(s=a,0===Pr&&$r(k)),s!==a?((f=Gr())===a&&(f=c),f!==a?(61===n.charCodeAt(Rr)?(p=en,Rr++):(p=a,0===Pr&&$r(rn)),p!==a?((d=Gr())===a&&(d=c),d!==a&&(b=ja())!==a?(Fr=t,t=e=or(i,b)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l))),t}function Xa(){var t,e,r,u,i,o,f;return t=Rr,(e=ba())!==a?((r=Gr())===a&&(r=c),r!==a&&(u=Da())!==a?((i=Gr())===a&&(i=c),i!==a&&(o=Ka())!==a&&Gr()!==a?(n.substr(Rr,3)===J?(f=J,Rr+=3):(f=a,0===Pr&&$r(z)),f===a&&(f=[]),f!==a?(Fr=Rr,(sr(e,u,o,f)?s:l)!==a?(Fr=t,t=e=cr(e,u,o,f)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function Ya(){var t,e,r,u,i,o,f,p,d;return t=Rr,n.substr(Rr,5)===Z?(e=Z,Rr+=5):(e=a,0===Pr&&$r($)),e!==a&&Gr()!==a&&(r=ba())!==a?((u=Gr())===a&&(u=c),u!==a&&(i=Da())!==a?((o=Gr())===a&&(o=c),o!==a&&(f=Ka())!==a?((p=Gr())===a&&(p=c),p!==a?(n.substr(Rr,3)===J?(d=J,Rr+=3):(d=a,0===Pr&&$r(z)),d===a&&(d=[]),d!==a?(Fr=Rr,(sr(r,i,f,d)?s:l)!==a?(Fr=t,t=e=fr(r,i,f,d)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function Ga(){var t,n;return t=Rr,(n=Ha())!==a&&(Fr=t,n=pr(n)),t=n}function Ha(){var t,e,r,u,i;return t=Rr,(e=ba())!==a?((r=Gr())===a&&(r=c),r!==a&&(u=Ka())!==a&&Gr()!==a?(n.substr(Rr,3)===J?(i=J,Rr+=3):(i=a,0===Pr&&$r(z)),i===a&&(i=[]),i!==a?(Fr=Rr,(dr(e,u,i)?s:l)!==a?(Fr=t,t=e=br(e,u,i)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function Ka(){var t,e,r,u,i,o,s,f,p,d;return t=Rr,40===n.charCodeAt(Rr)?(e=Se,Rr++):(e=a,0===Pr&&$r(Te)),e!==a?((r=Gr())===a&&(r=c),r!==a&&(u=Qa())!==a?((i=Gr())===a&&(i=c),i!==a?(o=Rr,44===n.charCodeAt(Rr)?(s=gn,Rr++):(s=a,0===Pr&&$r(xn)),s!==a?((f=Gr())===a&&(f=c),f!==a?(n.substr(Rr,3)===Ne?(p=Ne,Rr+=3):(p=a,0===Pr&&$r(qe)),p!==a?((d=Gr())===a&&(d=c),d!==a?o=s=[s,f,p,d]:(Rr=o,o=l)):(Rr=o,o=l)):(Rr=o,o=l)):(Rr=o,o=l),o===a&&(o=c),o!==a?(41===n.charCodeAt(Rr)?(s=je,Rr++):(s=a,0===Pr&&$r(Me)),s!==a&&(f=Gr())!==a&&(p=Kr())!==a?(Fr=t,t=e=hr(u,o,p)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t===a&&(t=Rr,40===n.charCodeAt(Rr)?(e=Se,Rr++):(e=a,0===Pr&&$r(Te)),e!==a?((r=Gr())===a&&(r=c),r!==a?(n.substr(Rr,3)===Ne?(u=Ne,Rr+=3):(u=a,0===Pr&&$r(qe)),u!==a?((i=Gr())===a&&(i=c),i!==a?(41===n.charCodeAt(Rr)?(o=je,Rr++):(o=a,0===Pr&&$r(Me)),o!==a?((s=Gr())===a&&(s=c),s!==a&&(f=Kr())!==a?(Fr=t,t=e=vr(f)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l)),t}function Qa(){var t,e,r,u,i,o,s,f;if(t=Rr,(e=nu())!==a)if((r=Gr())===a&&(r=c),r!==a){for(u=[],i=Rr,44===n.charCodeAt(Rr)?(o=gn,Rr++):(o=a,0===Pr&&$r(xn)),o!==a?((s=Gr())===a&&(s=c),s!==a&&(f=nu())!==a?i=o=[o,s,f]:(Rr=i,i=l)):(Rr=i,i=l);i!==a;)u.push(i),i=Rr,44===n.charCodeAt(Rr)?(o=gn,Rr++):(o=a,0===Pr&&$r(xn)),o!==a?((s=Gr())===a&&(s=c),s!==a&&(f=nu())!==a?i=o=[o,s,f]:(Rr=i,i=l)):(Rr=i,i=l);u!==a?(Fr=t,t=e=mr(e,u)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;return t===a&&(t=Rr,(e=Gr())===a&&(e=c),e!==a&&(Fr=t,e=yr()),t=e),t}function tu(){var t,n,e,r;return t=Rr,(n=Ma())!==a?((e=Gr())===a&&(e=c),e!==a?((r=Ua())===a&&(r=Sa())===a&&(r=Ta()),r!==a?(Fr=t,t=n=gr(n,r)):(Rr=t,t=l)):(Rr=t,t=l)):(Rr=t,t=l),t}function nu(){var t,n;return t=Rr,(n=na())!==a&&(Fr=t,n=xr(n)),t=n}function eu(){var t,e,r,u,i,o,s,f;if(t=Rr,n.substr(Rr,3)===X?(e=X,Rr+=3):(e=a,0===Pr&&$r(Y)),e===a&&(n.substr(Rr,5)===K?(e=K,Rr+=5):(e=a,0===Pr&&$r(Q)),e===a&&(n.substr(Rr,4)===G?(e=G,Rr+=4):(e=a,0===Pr&&$r(H)))),e!==a&&(Fr=t,e=Ar(e)),(t=e)===a){if(t=Rr,(e=ea())!==a)if(_r.test(n.charAt(Rr))?(r=n.charAt(Rr),Rr++):(r=a,0===Pr&&$r(kr)),r!==a){if(u=Rr,i=Rr,45===n.charCodeAt(Rr)?(o=Yn,Rr++):(o=a,0===Pr&&$r(Gn)),o===a&&(43===n.charCodeAt(Rr)?(o=Hn,Rr++):(o=a,0===Pr&&$r(Kn))),o===a&&(o=c),o!==a){if(s=[],mt.test(n.charAt(Rr))?(f=n.charAt(Rr),Rr++):(f=a,0===Pr&&$r(yt)),f!==a)for(;f!==a;)s.push(f),mt.test(n.charAt(Rr))?(f=n.charAt(Rr),Rr++):(f=a,0===Pr&&$r(yt));else s=l;s!==a?i=o=[o,s]:(Rr=i,i=l)}else Rr=i,i=l;i!==a&&(i=n.substring(u,Rr)),(u=i)!==a?(Fr=t,t=e=wr(e,u)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;if(t===a){if(t=Rr,48===n.charCodeAt(Rr)?(e=Cr,Rr++):(e=a,0===Pr&&$r(Er)),e!==a)if(Sr.test(n.charAt(Rr))?(r=n.charAt(Rr),Rr++):(r=a,0===Pr&&$r(Tr)),r!==a){if(u=Rr,i=[],jr.test(n.charAt(Rr))?(o=n.charAt(Rr),Rr++):(o=a,0===Pr&&$r(Mr)),o!==a)for(;o!==a;)i.push(o),jr.test(n.charAt(Rr))?(o=n.charAt(Rr),Rr++):(o=a,0===Pr&&$r(Mr));else i=l;i!==a&&(i=n.substring(u,Rr)),(u=i)!==a?(Fr=t,t=e=Lr(u)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;t===a&&(t=Rr,(e=ea())!==a&&(Fr=t,e=Vr(e)),(t=e)===a&&(t=Rr,(e=ia())!==a&&(Fr=t,e=Or(e)),t=e))}}return t}function ru(){return{start:{line:zr(),column:Ur()}}}function au(){return[Jr(),Jr()+Br().length]}function uu(t,n,e){return null==t?[]:[t].concat(n.map((function(t){return t[e||2]})))}function iu(t,n){return t in r?r[t]:n}function lu(t){for(var n=[],e=0;e<t.length;++e){var r=t[e];r instanceof Array?n=n.concat(r):n.push(r)}return n}function ou(t,n){return n=!!n,t.loc=ru(),t.range=au(),t.hasScope=n,t.text=Br(),t}function su(t,n,e,r){return 0!=t.length||cu(n,e,r)}function cu(t,n,e){return fu("`"+(n||"end")+"` expected (to close "+t+" at "+(void 0!==e?e.loc.start.line:zr())+":"+(void 0!==e?e.loc.start.column:Ur())+") at "+zr()+":"+Ur()),!0}function fu(t){return iu("loose",!1)||Wr(t),pu.push({msg:t,loc:ru(),range:au()}),!0}var pu,du={"^":10,not:9,"*":8,"/":8,"%":8,"//":8,"+":7,"-":7,"..":6,"<":5,">":5,">=":5,"<=":5,"==":5,"~=":5,and:4,or:3};function bu(t,n,e){for(;;){if(0==t.length)return n;var r=t[0],a=du[r];if(a<e)return n;t.shift();for(var u=t.shift();;){var i=t[0];if(null==i||du[i]<=a)break;u=bu(t,u,du[i])}n=Au.binaryExpression(r,n,u)}}function hu(){pu=[]}var vu={assignmentExpression:function(t,n,e){return ou({type:"AssignmentExpression",operator:t,left:n,right:e})},binaryExpression:function(t,n,e){return ou({type:"||"==t||"&&"==t?"LogicalExpression":"BinaryExpression",operator:t,left:n,right:e})},blockStatement:function(t){return ou({type:"BlockStatement",body:t})},callExpression:function(t,n){return ou({type:"CallExpression",callee:t,arguments:n})},emptyStatement:function(){return ou({type:"EmptyStatement"})},functionDeclaration:function(t,n,e,r,a){return ou({type:"FunctionDeclaration",id:t,params:n,body:e,generator:r,expression:a})},memberExpression:function(t,n,e){return ou({type:"MemberExpression",object:t,property:n,computed:e})},variableDeclaration:function(t,n){return{type:"VariableDeclaration",declarations:n,kind:iu("forceVar",!0)?"var":t}},functionExpression:function(t,n,e){return{type:"FunctionExpression",name:t,body:e,params:n}},returnStatement:function(t){return ou({type:"ReturnStatement",argument:t})},generatedReturnStatement:function(t){return ou({type:"ReturnStatement",argument:t,userCode:!1})}},mu=function(t){return{type:"Identifier",name:t}},yu=0;function gu(t){return JSON.parse(JSON.stringify(t))}function xu(t){return iu("loose",!1)&&(t.errors=pu),iu("useStrict",!1)&&t.body.unshift({type:"ExpressionStatement",expression:{type:"Literal",value:"use strict"}}),iu("noSharedObjects",!0)?gu(t):t}var Au={blockStatement:function(t){return vu.blockStatement(lu(t))},tempName:function(){return mu("__lua$tmpvar$"+ ++yu)},tempVar:function(t){return{type:"VariableDeclarator",id:Au.tempName(),init:t}},assign:function(t,n){var e=vu.assignmentExpression("=",t,n);if("MemberExpression"==t.type&&iu("luaOperators",!1)){var r,a=t.property;t.computed||(a={type:"Literal",value:a.name,loc:a.loc,range:a.range});var u=Au.translateExpressionIfNeeded(t.object);"Identifier"==t.object.type&&(r=t.object.name),e=u={type:"ConditionalExpression",test:u=void 0===r?Au.luaOperator("indexAssign",u,a,n):Au.luaOperator("indexAssign",u,a,n,{type:"Literal",value:r}),consequent:n,alternate:e}}return{type:"ExpressionStatement",expression:e}},encloseDecls:function(t){var n=Array.prototype.slice.call(arguments,1);return Au.encloseDeclsEx.apply(this,[t,iu("encloseWithFunctions",!0)].concat(n))},encloseDeclsEx:function(t,n){var e=Array.prototype.slice.call(arguments,2),r=[],a=[];for(var u in e){var i=e[u];r.push(i.init),a.push(i.id)}return n?{expression:vu.callExpression(vu.functionExpression(null,a,Au.blockStatement(t)),r),type:"ExpressionStatement"}:e.length<1?t:Au.blockStatement([vu.variableDeclaration("let",e)].concat(t))},encloseDeclsUnpack:function(t,n,e,r){if(r||iu("encloseWithFunctions",!0))return{expression:vu.callExpression(vu.memberExpression(vu.functionExpression(null,n,vu.blockStatement(t)),mu("apply")),[{type:"Literal",value:null},Au.luaOperatorA("expandReturnValues",e)]),type:"ExpressionStatement"};var a=[];for(var u in n)a.push({type:"VariableDeclarator",id:n[u],init:u.id});return Au.blockStatement([vu.variableDeclaration("let",a),Au.bulkAssign(n,e)].concat(t))},bulkAssign:function(t,n){for(var e=[],r=[],a=0;a<t.length;++a)e[a]=Au.tempName();var u=0;for(a=0;a<t.length;++a){var i=t[a];if("MemberExpression"==i.type&&"Identifier"==i.property.type)for(var l=0;l<a;++l)if(t[l].name==i.property.name){var o=Au.tempName();e.unshift(o),n.unshift(i.property),i.property=o,++u}}for(a=0;a<t.length;++a)r[a]=Au.assign(t[a],e[a+u]);if(t.length>1)return Au.encloseDeclsUnpack(r,e,n,!0);var s=n[0];return"CallExpression"==s.type&&(s=Au.luaOperator("oneValue",s)),Au.assign(t[0],s)},luaOperator:function(t){if("oneValue"==t&&iu("noMutliReturnSquish",!1))return arguments[1];var n=vu.callExpression(vu.memberExpression(mu("__lua"),mu(t)),Array.prototype.slice.call(arguments,1));return n.internal=!0,n},luaOperatorA:function(t,n){var e=vu.callExpression(vu.memberExpression(mu("__lua"),mu(t)),n);return e.internal=!0,e},binaryExpression:function(t,n,e){if(iu("luaOperators",!1)&&"and"!=t&&"or"!=t){return Au.luaOperator({"+":"add","-":"sub","*":"mul","/":"div","//":"intdiv","^":"pow","%":"mod","..":"concat","==":"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","~=":"ne",and:"and",or:"or"}[t],n,e)}return"~="==t?xop="!=":".."==t?t="+":"or"==t?t="||":"and"==t?t="&&":"//"==t&&(t="/"),n=Au.luaOperator("oneValue",n),e=Au.luaOperator("oneValue",e),vu.binaryExpression(t,n,e)},callExpression:function(t,n){if(iu("luaCalls",!1)){var e={type:"ThisExpression"};"MemberExpression"==t.type&&(e={type:"Literal",value:null});var r=0;t.selfSuggar&&(r|=1),iu("decorateLuaObjects",!1)&&(r|=2);var a={type:"Literal",value:r},u=null;if("Identifier"==t.type?u=t.name:"MemberExpression"!=t.type||t.computed||(u=t.property.name),u={type:"Literal",value:u},t.selfSuggar){if("Identifier"==t.object.type){var i=Au.translateExpressionIfNeeded(t);return Au.luaOperator.apply(Au,["call",a,i,t.object,u].concat(n))}var l=Au.tempVar(Au.translateExpressionIfNeeded(t.object)),o=vu.memberExpression(l.id,t.property,t.computed),i=Au.translateExpressionIfNeeded(o),s=Au.luaOperator.apply(Au,["call",a,i,l.id,u].concat(n));return result=Au.encloseDeclsEx([vu.returnStatement(s)],!0,l).expression}return"Identifier"==(i=Au.translateExpressionIfNeeded(t)).type&&"assert"==i.name&&n.push({type:"Literal",value:n[0].text||"?"}),Au.luaOperator.apply(Au,["call",a,i,e,u].concat(n))}return vu.callExpression(t,n)},memberExpression:function(t,n,e){var r;return iu("luaOperators",!1)&&!e?("Identifier"==t.type&&(r=t.name),null==r?Au.luaOperator("index",t,n):Au.luaOperator("index",t,n,{type:"Literal",value:r})):vu.memberExpression(t,n,e)},translateExpressionIfNeeded:function(t){if(!iu("luaOperators",!1))return t;if("MemberExpression"==t.type){var n=t.property;t.computed||(n={type:"Literal",value:n.name});var e=Au.memberExpression(Au.translateExpressionIfNeeded(t.object),n,!1);return e.origional=t,e.range=t.range,e.loc=t.loc,e}return t},injectRest:function(t,n){t.unshift(vu.variableDeclaration("let",[{type:"VariableDeclarator",id:{type:"Identifier",name:"__lua$rest"},userCode:!1,init:Au.luaOperator("rest",{type:"Identifier",name:"arguments"},{type:"Literal",value:n})}]))},valueProvdier:function(t){return vu.functionExpression(null,[],Au.blockStatement([vu.generatedReturnStatement(t)]))}};if((e=i())!==a&&Rr===n.length)return e;throw e!==a&&Rr<n.length&&$r({type:"end",description:"end of input"}),Xr(null,qr,Nr)}}}()},46:function(t,n){var e={},r=function(){var t=Array.isArray||function(t){return"[object Array]"===toString.call(t)};function n(t){if(null==t)return"nil";if(isNaN(t))return"number";var n=typeof t;return"object"==n?"table":n}function e(t){if("number"==n(t))return t;if("string"==typeof t&&(t=parseInt(t),!isNaN(t)))return t;throw"attempt to perform arithmetic on a "+n(t)+" value: "+t}function a(t){var n=f(t=d(t),"__tostring");if(null!==n)return n(t);if(null==t)return"nil";if(t instanceof s)return"table: 0x"+t.id;if("number"==typeof t){if(~~t==t)return t.toString();var e=t.toPrecision();return e.length>14?t.toPrecision(14):e}return""+t}function u(t,n){var e=p(t=d(t),n=d(n),"__le");return null!==e?e(t,n):t<=n}function i(t,n){var e=p(t=d(t),n=d(n),"__lt");return null!==e?e(t,n):t<n}function l(t,n){var e=p(t=d(t),n=d(n),"__eq");return null!==e?e(t,n):null==t?null==n:t===n}var o=0;function s(){this.id=++o,this.numeric=[],this.hash={}}function c(t){this.values=t}function f(t,n){if(t instanceof s){if(void 0===t.__metatable)return null;var e=t.__metatable.hash[n];return null==e?null:e}return null}function p(t,n,e){var r=f(t,e);return null==r?f(n,e):r}function d(t){return t instanceof c?t.values[0]:t}function b(){return new c(h(arguments,!0))}function h(t,n){void 0===n&&(n=!1);var e=[];for(var r in t){var a=t[r];if(a instanceof c){for(var u in a.values)if(e.push(a.values[u]),r<t.length-1||!n)break}else e.push(a)}return e}return Object.defineProperty(s.prototype,"__luaType",{value:"table",enumerable:!1}),Object.defineProperty(s.prototype,"toString",{value:function(){return a(this)},enumerable:!1}),Object.defineProperty(c.prototype,"__luaType",{value:"returnValues",enumerable:!1}),{add:function(t,n){var r=p(t=d(t),n=d(n),"__add");return null!==r?r(t,n):e(t)+e(n)},sub:function(t,n){var r=p(t=d(t),n=d(n),"__sub");return null!==r?r(t,n):e(t)-e(n)},mul:function(t,n){var r=p(t=d(t),n=d(n),"__mul");return null!==r?r(t,n):e(t)*e(n)},div:function(t,n){var r=p(t=d(t),n=d(n),"__div");return null!==r?r(t,n):e(t)/e(n)},intdiv:function(t,n){var r=p(t=d(t),n=d(n),"__idiv");return null!==r?r(t,n):~~(e(t)/e(n))},mod:function(t,n){var r=p(t=d(t),n=d(n),"__mod");return null!==r?r(t,n):e(t)%e(n)},call:function(t,e,r,a){var u=!!(1&t),i=!!(2&t);if(null==e)throw void 0===a?"attempt to call a "+n(e)+" value":"attempt to call '"+a+"' (a "+n(e)+" value)";var l=h(Array.prototype.slice.call(arguments,4),!0),o=!0;if(i&&(o="function"==e.__luaType),u&&o&&l.unshift(r),i&&"function"!=e.__luaType){for(var c=[],f=0;f<l.length;++f){var p=l[f];p instanceof s?0==p.numeric.length?c[f]=p.hash:0==Object.keys(p.hash).length?c[f]=p.numeric:c[f]=p:c[f]=p}l=c}return e.apply(r,l)},lte:u,lt:i,ne:function(t,n){return!l(t,n)},gt:function(t,n){return i(n,t)},gte:function(t,n){return u(n,t)},eq:l,index:function e(r,a,u){if(null==r||"number"==typeof r)throw null==u?"attempt to index a "+n(r)+" value":"attempt to index '"+u+"' (a "+n(r)+" value)";if(r instanceof s){var i;if(null!==(i="number"==typeof a?r.numeric[a-1]:r.hash[a])&void 0!==i)return i;var l=f(r,"__index");return null==l?null:"function"==typeof l?d(l(r,a)):e(l,a)}if(t(r))return r[a-1];if("string"==typeof r){var o=tonumber(a);return o<0&&(o+=r.length+1),r[o-1]}return r[a]},indexAssign:function e(r,a,u,i){if(null==r||"number"==typeof r)throw null==i?"attempt to index a "+n(r)+" value":"attempt to index '"+i+"' (a "+n(r)+" value)";if(r instanceof s){var l;if(null==a)throw"table index is nil";if(null!==(l="number"==typeof a?r.numeric[a-1]:r.hash[a])&void 0!==l)return"number"==typeof a?r.numeric[a-1]=u:r.hash[a]=u,!0;if(void 0===r.__metatable)return"number"==typeof a?r.numeric[a-1]=u:r.hash[a]=u,!0;var o=r.__metatable.__newindex;return null==o?("number"==typeof pop?r.numeric[a]=u:r.hash[a]=u,!0):("function"==typeof o?o(r,a,u):e(o,a,u),!0)}if("string"==typeof r)throw"attempt to index string value";return!!t(r)&&(r[a-1]=u,!0)},concat:function(t,n){var e=p(t=d(t),n=d(n),"__concat");if(null!==e)return e(t,n);if(null==t||null==n)throw"attempt to concatenate a nil value";return a(t)+a(n)},makeTable:function(n,e){var r=new s;if(r.numeric=h(Array.prototype.slice.call(arguments,2),e),!n)return r;if(t(n))for(var a=0;a<n.length;++a){var u=n[a],i=u[0],l=u[1];"number"==typeof i?r.numeric[i-1]=l:r.hash[i]=l}else for(var o in n)r.hash[o]=n[o];return r},makeFunction:function(t){return t.__luaType="function",t},expandReturnValues:function(){return h(arguments,!0)},makeMultiReturn:b,count:function(t){if(t instanceof s){for(var n=0;void 0!==t.numeric[n];)++n;return n}return t.length},and:function(t,n){return t&&n},or:function(t,n){return t||n},expand:h,rest:function(t,n){var e=Object.create(c.prototype,{});return e.values=Array.prototype.slice.call(t,n),e},pcall:function(t){try{var n=h([t.apply(this,Array.prototype.slice.call(arguments,1))],!0);return n.unshift(!0),b.apply(r,n)}catch(t){return b(!1,t)}},type:n,pow:function(t,n){var r=p(t=d(t),n=d(n),"__pow");return null!==r?r(t,n):Math.pow(e(t),e(n))},isTable:function(t){return t instanceof s},mark:function(t){var n=[];!function t(e){if(!(e in n))if(n.push(e),"object"==typeof e)for(var r in e)t(e[r]);else"function"==typeof e&&(e.__luaType="function")}(t)},forcomp:function(t,n,e){return t>0?n<=e:t<0&&e<=n},makeString:a,oneValue:d,lookupMetaTable:f,isJSArray:t}}();this.__lua=r,e.string={byte:function(t,n,a){var u=e.string.sub(t,n,a),i=[];for(n=0;n<u.length;++n)i[n]=u.charCodeAt(n);return r.makeMultiReturn.apply(r,i)},char:function(){for(var t="",n=0;n<arguments.length;++n)t+=String.fromCharCode(0|arguments[n]);return t},dump:null,find:null,gmatch:null,gsub:null,len:function(t){return(""+t).length},lower:function(t){return(""+t).toLowerCase()},match:null,reverse:function(t){return(""+t).split("").reverse().join("")},sub:function(t,n,e){return null==n&&(n=1),null==e&&(e=t.length),n<0&&(n+=t.length+1),e<0&&(e+=t.length+1),r.makeString(t).substring(n-1,e)},upper:function(t){return(""+t).toUpperCase()},format:function(t,n){var e=arguments,r=1;return t.replace(/%([0-9.]+)?([%sfdgi])/g,(function(t,n,a){var u=null;if("%"==a)return"%";if(u=""+(u="s"==a?e[r++]:"d"==a||"i"==a?parseInt(e[r++]):"f"==a?e[r++].toFixed(parseFloat(t[1])||6):e[r++]),parseInt(n)){var i=parseInt(n)-u.length;i>0&&(u=new Array(i).join(" ")+u)}return u}))}},e.table={concat:null,insert:null,pack:function(){for(var t={},n=0;n<arguments.length;++n)t[""+(n+1)]=arguments[n];return r.makeTable(t)},remove:null,sort:function(t){return t},unpack:function(t,n,e){null==n&&(n=1),null==e&&(e=r.count(t));var a=[];if(r.isTable(t))for(var u=n;u<=e;++u)a.push(t.numeric[u]);else for(u=n;u<=e;++u)a.push(t[u]);return r.makeMultiReturn.apply(r,a)}},e.unpack=e.table.unpack,e.tonumber=function(t){return parseInt(t)},e.tostring=function(t){return r.makeString(t)},e.os={clock:null,date:null,difftime:function(t,n){return n-t},execute:null,exit:null,time:function(t){if(null==t)return(new Date).getTime();throw"Time given a table not implemented yet."}},e.io={write:function(){e.print(arguments)}},e.error=function(t){throw t},e.assert=function(t,n,e){if(void 0===e&&(e=n,n=void 0),t)return t;throw"Assert Failed!! "+e},e.type=function(t){return r.type(t)},e.pairs=function(t){var n=r.lookupMetaTable(t,"__pairs");if(null!==n)return n(t);var e=[];if(r.isTable(t)){for(var a=0;a<t.numeric.length;++a)e.push([a+1,a,t.numeric]);for(var u in t.hash)e.push([u,u,t.hash])}else if(r.isJSArray(t))for(a=0;a<t.length;++a)e.push([a+1,a,t]);else{var i=Object.keys(t);for(var u in i)e.push([i[u],i[u],t])}return r.makeMultiReturn((function(t,n){if(t.length<1)return null;var e=t.shift(),a=e[0],u=e[2][e[1]];return r.makeMultiReturn(a,u)}),e,null)},e.ipairs=function(t){var n=r.lookupMetaTable(t,"__ipairs");return null!==n?n(t):r.makeMultiReturn((function(t,n){return n+=1,r.isJSArray(t)?t.length<n?null:r.makeMultiReturn(n,t[n-1]):r.isTable(t)?null===t.numeric[n-1]||void 0===t.numeric[n-1]?null:r.makeMultiReturn(n,t.numeric[n-1]):t[n-1]}),t,0)},e.next=function(t,n){if(r.isTable(t)){for(var e=[],a=0;a<t.numeric.length;++a)e.push([a+1,t.numeric[a]]);for(var u in t.hash)e.push([u,t.hash[u]]);var i=!1;for(a=0;a<e.length;++a){var l=e[a];if((null==n||i)&&void 0!==l[1]&&null!==l[1])return r.makeMultiReturn(l[0],l[1]);n===l[0]&&(i=!0)}return null}var o=Object.keys(t);for(i=!1,a=0;a<o.length;++a){var s=o[a],c=s;if("number"==typeof c&&(c=c=1),null==n||i)return r.makeMultiReturn(s,t[c]);n===s&&(i=!0)}return null},e.print=function(){console.log.apply(console,arguments)},e.pcall=this.__lua.pcall,e.rawequals=function(t,n){return t==n},e.rawget=function(t,n){return t instanceof LuaTable?"number"==typeof n?t.numeric[n-1]:t.hash[n]:t[n]},e.rawset=function(t,n,e){return t instanceof LuaTable?"number"==typeof n?t.numeric[n-1]=e:t.hash[n]=e:t[n]=e},e.something=function(t){for(var n=[],e=1;void 0!==t[e];)n.push(t[e]),++e;return r.makeMultiReturn.apply(r,n)},e.math=Math,e.setmetatable=function(t,n){return Object.defineProperty(t,"__metatable",{value:n,enumerable:!1,configurable:!0}),t},e.getmetatable=function(t,n){return t.__metatable};var a=function(t,n){if(!(t.length<1)){for(var e=t[0],r=1;r<t.length;++r)e=n(e,t[r]);return e}};for(var u in e.bit32={band:function(){return a(arguments,(function(t,n){return t&n}))},bor:function(){return a(arguments,(function(t,n){return t|n}))},bxor:function(){return a(arguments,(function(t,n){return t|n}))},rshift:function(t,n){return t>>n}},e.require=function(t){if("bit"==t)return e.bit32;if("bit32"==t)return e.bit32;throw"Module "+waht+" not found"},r.mark(e),r.env=e,e)this[u]=e[u]},47:function(t,n,e){"use strict";(function(n){const r=e(27),a=e(28);let u;u=r.readFileSync?r.readFileSync(a.join(n,"node_modules","lua2js","stdlib.js"),"utf8"):e(48),t.exports=u.replace(/^var pythonRuntime = module.exports/,"var __pythonRuntime")}).call(this,"/")},48:function(t,n){t.exports='var env = {};\nvar __lua = (function() {\n\n\t// Yoinked from underscore.\n\tvar isJSArray = Array.isArray || function(obj) { return toString.call(obj) === \'[object Array]\'; };\n\n\tfunction type(what) {\n\t\tif ( what === null || what === undefined ) return "nil";\n\t\tif ( isNaN(what) ) return "number";\n\t\tvar t = typeof what;\n\t\tif ( t == "object" ) return "table";\n\t\treturn t;\n\t}\n\n\tfunction numberForArith(n) {\n\t\tif ( type(n) == "number" ) return n;\n\t\telse if ( typeof n == "string" ) {\n\t\t\tn = parseInt(n);\n\t\t\tif ( !isNaN(n) ) return n;\n\n\t\t}\n\n\t\tthrow "attempt to perform arithmetic on a " +  type(n) + " value: " + n;\n\t}\n\n\tfunction makeString(a) { \n\t\ta = oneValue(a);\n\n\t\tvar mtf = lookupMetaTable(a, "__tostring");\n\t\tif ( mtf !== null ) return mtf(a);\n\n\t\tif ( a === undefined || a === null ) return "nil";\n\t\tif ( a instanceof LuaTable ) {\n\t\t\treturn "table: 0x" + a.id;\n\t\t} else if ( typeof a == "number" ) {\n\t\t\tif ( ~~a == a ) return a.toString();\n\t\t\tvar rep = a.toPrecision();\n\t\t\tif ( rep.length > 14 ) return a.toPrecision(14);\n\t\t\treturn rep;\n\t\t}\n\t\treturn "" + a;\n\t}\n\n\tfunction add(a,b) {\n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__add");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\t\treturn numberForArith(a) + numberForArith(b); \n\t}\n\n\tfunction sub(a,b) { \n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__sub");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\t\treturn numberForArith(a) - numberForArith(b);\n\t}\n\n\tfunction mul(a,b) { \n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__mul");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\t\treturn numberForArith(a) * numberForArith(b);\n\t}\n\n\tfunction div(a,b) { \n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__div");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\t\treturn numberForArith(a) / numberForArith(b);\n\t}\n\n\tfunction intdiv(a,b) { \n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__idiv");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\t\treturn ~~(numberForArith(a) / numberForArith(b));\n\t}\n\n\tfunction mod(a,b) { \n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__mod");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\t\treturn numberForArith(a) % numberForArith(b);\n\t}\n\n\tfunction pow(a,b) { \n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__pow");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\t\treturn Math.pow(numberForArith(a),numberForArith(b)); \n\t}\n\n\tfunction concat(a,b) { \n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__concat");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\t\tif ( a === null || a === undefined || b === null || b === undefined ) throw "attempt to concatenate a nil value";\n\n\t\treturn  makeString(a) + makeString(b); \n\t}\n\n\tfunction lte(a,b) {\n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__le");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\t\treturn a <= b; \n\t}\n\n\tfunction lt(a,b) {\n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__lt");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\t\treturn a < b; \n\t}\n\n\tfunction gte(a,b) { return lte(b,a); }\n\tfunction gt(a,b) { return lt(b,a); }\n\n\n\tfunction forcomp(d,a,b) { \n\t\tif ( d > 0 ) return a <= b; \n\t\telse if ( d < 0 ) return b <= a;\n\t\telse return false;\n\t}\n\n\t\n\tfunction eq(a,b) { \n\t\ta = oneValue(a); b = oneValue(b);\n\n\t\tvar mtf = lookupMetaTableBin(a, b, "__eq");\n\t\tif ( mtf !== null ) return mtf(a,b);\n\n\n\t\tif ( a === null || a === undefined ) {\n\t\t\treturn ( b === null || b === undefined );\n\t\t}\n\t\tif ( a === b ) return true;\n\t\treturn false;\n\t}\n\t\n\tfunction ne(a,b) { return !eq(a,b); }\n\n\tfunction count(a) { \n\t\tif ( a instanceof LuaTable ) {\n\t\t\tvar cnt = 0;\n\t\t\twhile ( a.numeric[cnt] !== undefined ) ++cnt;\n\t\t\treturn cnt;\n\t\t}\n\t\treturn a.length;\n\t}\n\n\tfunction and(a,b) { return a && b; }\n\tfunction or(a,b) { return a || b; }\n\n\tfunction call(flags, what, that, helper /*, args... */ ) {\n\t\tvar injectSelf = !!(flags & 1); \n\t\tvar detectLua = !!(flags & 2); \n\n\t\tif ( what === null || what === undefined ) {\n\t\t\tif ( helper === undefined ) throw "attempt to call a " + type(what) + " value";\n\t\t\telse throw "attempt to call \'" + helper + "\' (a " + type(what) + " value)"; \n\t\t}\n\n\t\tvar args = expand(Array.prototype.slice.call(arguments, 4), true);\n\n\t\tvar doInject = true;\n\n\t\tif ( detectLua ) {\n\t\t\tdoInject = what.__luaType == "function";\n\t\t}\n\n\t\tif ( injectSelf && doInject ) {\n\t\t\targs.unshift(that);\n\t\t}\n\n\t\tif ( detectLua && what.__luaType != "function" ) {\n\t\t\tvar args2 = [];\n\t\t\tfor ( var i = 0; i < args.length; ++i ) {\n\t\t\t\tvar a = args[i];\n\t\t\t\tif ( a instanceof LuaTable ) {\n\t\t\t\t\tif ( a.numeric.length == 0 ) args2[i] = a.hash;\n\t\t\t\t\telse if ( Object.keys(a.hash).length == 0 ) args2[i] = a.numeric;\n\t\t\t\t\telse args2[i] = a;\n\t\t\t\t} else {\n\t\t\t\t\targs2[i] = a;\n\t\t\t\t}\n\t\t\t}\n\t\t\targs = args2;\n\t\t}\n\n\t\treturn what.apply(that, args);\n\t}\n\n\tfunction rest(args, cnt) {\n\t\tvar out = Object.create(LuaReturnValues.prototype, {});\n\t\tout.values = Array.prototype.slice.call(args, cnt);\n\t\treturn out;\n\t}\n\n\tvar id = 0;\n\tfunction LuaTable() {\n\t\tthis.id = ++id;\n\t\tthis.numeric = [];\n\t\tthis.hash = {};\n\t}\n\n\tObject.defineProperty(LuaTable.prototype, "__luaType",  {value: "table",  enumerable: false});\n\tObject.defineProperty(LuaTable.prototype, "toString",  {value: function() {\n\t\treturn makeString(this);\n\t},  enumerable: false});\n\n\tfunction makeTable(t, allowExpand /*, numeric ... */) {\n\t\tvar out = new LuaTable();\n\n\t\tout.numeric = expand(Array.prototype.slice.call(arguments, 2), allowExpand);\n\t\tif ( !t ) return out;\n\n\t\tif ( isJSArray(t) ) {\n\t\t\tfor ( var i = 0; i < t.length; ++i ) {\n\t\t\t\tvar pair = t[i];\n\t\t\t\tvar key = pair[0];\n\t\t\t\tvar val = pair[1];\n\t\t\t\tif ( typeof key == "number" ) {\n\t\t\t\t\tout.numeric[key - 1] = val;\n\t\t\t\t} else {\n\t\t\t\t\tout.hash[key] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( var k in t ) {\n\t\t\t\tout.hash[k] = t[k];\n\t\t\t}\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tfunction makeFunction(f) {\n\t\tf.__luaType = "function";\n\t\treturn f;\n\t}\n\n\tfunction LuaReturnValues(v) {\n\t\tthis.values = v;\n\t}\n\n\tObject.defineProperty(LuaReturnValues.prototype, "__luaType",  {value: "returnValues",  enumerable: false});\n\n\tfunction lookupMetaTable(table, entry) {\n\t\tif ( table instanceof LuaTable ) {\n\t\t\tif ( table.__metatable === undefined ) return null;\n\n\t\t\tvar idx = table.__metatable.hash[entry];\n\t\t\tif ( idx === null || idx === undefined ) return null;\n\n\t\t\treturn idx;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction lookupMetaTableBin(a, b, entry) {\n\t\tvar mt = lookupMetaTable(a, entry);\n\t\tif ( mt == null ) return lookupMetaTable(b, entry);\n\t\treturn mt;\n\t}\n\n\tfunction index(table, prop, helper) {\n\t\tif ( table === null || table === undefined || typeof table == "number" ) {\n\t\t\tif ( helper == undefined ) {\n\t\t\t\tthrow "attempt to index a " + type(table) + " value";\n\t\t\t} else {\n\t\t\t\tthrow "attempt to index \'" + helper + "\' (a " + type(table) + " value)";\n\t\t\t}\n\t\t} else if ( table instanceof LuaTable ) {\n\t\t\tvar val;\n\t\t\tif ( typeof prop == "number") val = table.numeric[prop-1];\n\t\t\telse val = table.hash[prop];\n\n\t\t\tif ( val !== null & val !== undefined ) return val;\n\n\t\t\tvar idxfx = lookupMetaTable(table, "__index");\n\t\t\tif ( idxfx == null ) return null;\n\n\t\t\tif ( typeof idxfx == "function" ) return oneValue(idxfx(table, prop));\n\t\t\treturn index(idxfx, prop);\n\t\t} else if ( isJSArray(table) ) {\n\t\t\treturn table[prop - 1];\n\t\t} else if ( typeof table == "string" ) {\n\t\t\tvar sidx = tonumber(prop);\n\t\t\tif ( sidx < 0 ) sidx += (table.length + 1);\n\t\t\treturn table[sidx-1];\n\t\t} else {\n\t\t\treturn table[prop];\n\t\t}\n\t}\n\n\tfunction indexAssign(table, prop, value, helper) {\n\n\t\tif ( table === null || table === undefined || typeof table == "number" ) {\n\t\t\tif ( helper == undefined ) {\n\t\t\t\tthrow "attempt to index a " + type(table) + " value";\n\t\t\t} else {\n\t\t\t\tthrow "attempt to index \'" + helper + "\' (a " + type(table) + " value)";\n\t\t\t}\n\t\t}\n\n\t\tif ( table instanceof LuaTable ) {\n\t\t\tvar val;\n\n\t\t\tif ( prop === undefined || prop === null ) throw "table index is nil";\n\n\t\t\tif ( typeof prop == "number" ) val = table.numeric[prop-1];\n\t\t\telse val = table.hash[prop];\n\n\t\t\tif ( val !== null & val !== undefined ) {\n\t\t\t\tif ( typeof prop == "number") table.numeric[prop-1] = value;\n\t\t\t\telse table.hash[prop] = value;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( table.__metatable === undefined ) {\n\t\t\t\tif ( typeof prop == "number") table.numeric[prop-1] = value;\n\t\t\t\telse table.hash[prop] = value;\n\t\t\t\treturn true;\n\t\t\t}\n\n\n\n\t\t\tvar idx = table.__metatable.__newindex;\n\t\t\tif ( idx === null || idx === undefined ) {\n\t\t\t\tif ( typeof pop == "number") table.numeric[prop] = value;\n\t\t\t\telse table.hash[prop] = value;\n\t\t\t\treturn true;\t\n\t\t\t}\n\n\t\t\tif ( typeof idx == "function" ) idx(table, prop, value);\n\t\t\telse indexAssign(idx, prop, value);\n\n\t\t\treturn true;\n\n\n\t\t} else if ( typeof table == "string" ) { \n\t\t\tthrow "attempt to index string value";\n\t\t} else if ( isJSArray(table) ) {\n\t\t\ttable[prop-1] = value;\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tfunction oneValue(v) {\n\t\tif ( v instanceof LuaReturnValues ) return v.values[0];\n\t\treturn v;\n\t}\n\n\tfunction makeMultiReturn() {\n\t\treturn new LuaReturnValues(expand(arguments, true));\n\t}\n\n\tfunction expand(what, allowExpand) {\n\t\tif ( allowExpand === undefined ) allowExpand = false;\n\n\t\tvar out = [];\n\t\tfor ( var idx in what ) {\n\t\t\tvar v = what[idx];\n\t\t\tif ( v instanceof LuaReturnValues ) {\n\t\t\t\tfor ( var i in v.values ) {\n\t\t\t\t\tout.push(v.values[i]);\n\t\t\t\t\tif ( idx < what.length - 1 || !allowExpand) break;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tout.push(v);\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\n\tfunction expandReturnValues() {\n\t\treturn expand(arguments, true);\n\t}\n\n\tfunction pcall(what /*, args... */ ) {\n\t\ttry {\n\t\t\tvar result = expand([what.apply(this, Array.prototype.slice.call(arguments, 1))], true);\n\t\t\tresult.unshift(true);\n\t\t\treturn makeMultiReturn.apply(__lua, result);\n\t\t} catch ( e ) {\n\t\t\treturn makeMultiReturn(false, e);\n\t\t}\n\t}\n\n\tfunction isTable(a) { return a instanceof LuaTable; }\n\n\tfunction mark(o) {\n\t\tvar seen = [];\n\t\tfunction domark(o) {\n\t\t\tif ( o in seen ) return;\n\t\t\tseen.push(o);\n\t\t\tif ( typeof o == "object" ) for ( var idx in o ) domark(o[idx]);\n\t\t\telse if ( typeof o == "function" ) o.__luaType = "function";\n\t\t\t\n\t\t}\n\t\tdomark(o);\n\t}\n\n\treturn {\n\t\tadd: add,\n\t\tsub: sub,\n\t\tmul: mul,\n\t\tdiv: div,\n\t\tintdiv: intdiv,\n\t\tmod: mod,\n\t\tcall: call,\n\t\tlte: lte,\n\t\tlt: lt,\n\t\tne: ne,\n\t\tgt: gt,\n\t\tgte: gte,\n\t\teq: eq,\n\t\tindex: index,\n\t\tindexAssign: indexAssign,\n\t\tconcat: concat,\n\t\tmakeTable: makeTable,\n\t\tmakeFunction: makeFunction,\n\t\texpandReturnValues: expandReturnValues,\n\t\tmakeMultiReturn: makeMultiReturn,\n\t\tcount: count,\n\t\tand: and,\n\t\tor: or,\n\t\texpand: expand,\n\t\trest: rest,\n\t\tpcall: pcall,\n\t\ttype: type,\n\t\tpow: pow,\n\t\tisTable: isTable,\n\t\tmark: mark,\n\t\tforcomp: forcomp,\n\t\tmakeString: makeString,\n\t\toneValue: oneValue,\n\t\tlookupMetaTable: lookupMetaTable,\n\t\tisJSArray: isJSArray\n\t};\n\n})();\n\n\nthis.__lua = __lua;\n\nenv.string = {\n\tbyte: function byte(s,i,j) {\n\t\tvar chars = env.string.sub(s,i,j);\n\t\tvar out = [];\n\t\tfor ( var i = 0; i < chars.length; ++i ) out[i] = chars.charCodeAt(i);\n\t\treturn __lua.makeMultiReturn.apply(__lua, out);\n\t},\n\tchar: function char(/* arguments */) {\n\t\tvar out = "";\n\t\tfor ( var i = 0; i < arguments.length; ++i ) {\n\t\t\tout += String.fromCharCode(arguments[i]|0); \n\t\t}\n\t\treturn out;\n\n\t},\n\tdump: null,\n\tfind: null,\n\tgmatch: null,\n\tgsub: null,\n\tlen: function len(s) { return ("" + s).length; },\n\tlower: function lower(s) { return ("" + s).toLowerCase(); },\n\tmatch: null,\n\treverse: function(s) {\n\t\treturn ("" + s).split("").reverse().join("");\n\t},\n\tsub: function(s, i, j) {\n\t\tif ( i === undefined || i === null ) i = 1;\n\t\tif ( j === undefined || j === null ) j = s.length;\n\t\tif ( i < 0 ) i += (s.length+1);\n\t\tif ( j < 0 ) j += (s.length+1);\n\n\t\treturn __lua.makeString(s).substring(i-1,j);\n\n\t},\n\tupper: function lower(s) { return ("" + s).toUpperCase(); },\n\tformat: function format(format, etc) {\n\t\tvar arg = arguments;\n\t\tvar i = 1;\n\t\treturn format.replace(/%([0-9.]+)?([%sfdgi])/g, function (m, w, t) {\n\t\t\tvar r = null;\n\t\t\tif ( t == "%" ) return "%";\n\t\t\telse if ( t == "s") r = arg[i++];\n\t\t\telse if ( t == "d") r = parseInt(arg[i++]);\n\t\t\telse if ( t == "i") r = parseInt(arg[i++]);\n\t\t\telse if ( t == "f" ) r = arg[i++].toFixed(parseFloat(m[1]) || 6);\n\t\t\telse r = arg[i++]; \n\t\t\tr = "" + r;\n\t\t\tif ( parseInt(w) ) {\n\t\t\t\tvar extra = parseInt(w) - r.length;\n\t\t\t\tif ( extra > 0 ) r = new Array(extra).join(" ") + r;\n\t\t\t}\n\t\t\treturn r;\n\t\t});\n\t}\n\n};\n\nenv.table = {\n\tconcat: null,\n\tinsert: null,\n\tpack: function(/* arguments */) {\n\t\tvar obj = {}\n\t\tfor ( var i = 0; i < arguments.length; ++i) {\n\t\t\tobj[("" + (i + 1))] = arguments[i];\n\t\t}\n\t\treturn __lua.makeTable(obj);\n\t},\n\tremove: null,\n\tsort: function sort(table) { return table; },\n\tunpack: function(table,i,j) {\n\t\tif ( i === undefined || i === null ) i = 1;\n\t\tif ( j === undefined || j === null ) j = __lua.count(table);\n\n\t\tvar arr = [];\n\t\tif ( __lua.isTable(table) ) {\n\t\t\tfor ( var a = i; a <= j; ++a ) {\n\t\t\t\tarr.push(table.numeric[a]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( var a = i; a <= j; ++a ) {\n\t\t\t\tarr.push(table[a]);\n\t\t\t}\t\t\t\n\t\t}\n\n\t\treturn __lua.makeMultiReturn.apply(__lua, arr);\n\n\n\t}\n\n};\n\nenv.unpack = env.table.unpack;\n\nenv.tonumber = function(n) {\n\treturn parseInt(n);\n};\n\nenv.tostring = function(n) {\n\treturn __lua.makeString(n);\n};\n\nenv.os = {\n\tclock: null,\n\tdate: null,\n\tdifftime: function difftime(t1,t2) { return t2 - t1; },\n\texecute: null,\n\texit: null,\n\ttime: function time(table) {\n\t\tif ( table == null ) return new Date().getTime();\n\t\tthrow "Time given a table not implemented yet.";\n\t}\n};\n\nenv.io = {\n\twrite: function() { env.print(arguments); }\n};\n\nenv.error = function error(s) { throw s; };\n\nenv.assert = function assert(what, msg, code) {\n\tif ( code === undefined ) {\n\t\tcode = msg;\n\t\tmsg = undefined;\n\t}\n\n\tif ( !!what ) return what;\n\n\tthrow("Assert Failed!! " + code);\n};\n\nenv.type = function type(what) {\n\treturn __lua.type(what);\n};\n\n\nenv.pairs = function pairs(table) {\n\n\tvar mtf = __lua.lookupMetaTable(table, "__pairs");\n\tif ( mtf !== null ) return mtf(table);\n\n\tvar list = [];\n\tif ( __lua.isTable(table) ) {\n\t\tfor ( var i = 0; i < table.numeric.length; ++i ) list.push([i + 1, i, table.numeric]);\n\t\tfor ( var idx in table.hash ) list.push([idx, idx, table.hash]);\n\t} else if ( __lua.isJSArray(table) ) {\n\t\tfor ( var i = 0; i < table.length; ++i ) list.push([i + 1, i, table]);\n\t} else {\n\t\tvar keys = Object.keys(table);\n\t\tfor ( var idx in keys ) list.push([keys[idx], keys[idx], table]);\n\t}\n\n\treturn __lua.makeMultiReturn(function(handle, cur) {\n\t\tif ( handle.length < 1 ) return null;\n\t\tvar nfo = handle.shift();\n\t\tvar k = nfo[0];\n\t\tvar v = nfo[2][nfo[1]];\n\t\treturn __lua.makeMultiReturn(k,v);\n\t}, list, null);\n};\n\nenv.ipairs = function ipairs(table) {\n\n\tvar mtf = __lua.lookupMetaTable(table, "__ipairs");\n\tif ( mtf !== null ) return mtf(table);\n\n\treturn __lua.makeMultiReturn(function ipairsitr(table, cur) {\n\t\tcur = cur + 1;\n\t\tif ( __lua.isJSArray(table) ) {\n\t\t\tif ( table.length < cur ) return null;\n\t\t\treturn __lua.makeMultiReturn(cur, table[cur-1]);\n\t\t} else if ( __lua.isTable(table) ) {\n\t\t\tif ( table.numeric[cur-1] === null || table.numeric[cur-1] === undefined ) return null;\n\t\t\treturn __lua.makeMultiReturn(cur, table.numeric[cur-1]);\n\t\t} else {\n\t\t\treturn table[cur-1];\n\t\t}\n\t}, table, 0);\n};\n\nenv.next = function next(table, cur) {\n\tif ( __lua.isTable(table) ) {\n\t\tvar list = [];\n\t\tfor ( var i = 0; i < table.numeric.length; ++i ) list.push([i + 1, table.numeric[i]]);\n\t\tfor ( var tidx in table.hash ) list.push([tidx, table.hash[tidx]]);\n\t\tvar trigger = false;\n\t\tfor ( var i = 0; i < list.length; ++i ) {\n\t\t\tvar itm = list[i];\n\t\t\tif ( cur === null || cur === undefined || trigger ) {\n\t\t\t\tif ( itm[1] !== undefined && itm[1] !== null )\n\t\t\t\t\treturn __lua.makeMultiReturn(itm[0], itm[1]);\n\t\t\t}\n\t\t\tif ( cur === itm[0] ) trigger = true;\n\t\t}\n\n\t\treturn null;\n\t} else {\n\t\tvar listk = Object.keys(table);\n\t\tvar trigger = false;\n\t\tfor ( var i = 0; i < listk.length; ++i ) {\n\t\t\tvar idx = listk[i];\n\t\t\tvar sidx = idx;\n\t\t\tif ( typeof sidx == "number" ) sidx = sidx = 1;\n\t\t\tif ( cur === null || cur === undefined || trigger ) return __lua.makeMultiReturn(idx, table[sidx]);\n\t\t\tif ( cur === idx ) trigger = true;\n\t\t}\n\t\treturn null;\n\t}\n};\n\nenv.print = function print() { console.log.apply(console, arguments); };\nenv.pcall = this.__lua.pcall;\n\nenv.rawequals = function rawequals(a,b) { return a == b; };\nenv.rawget = function rawget(table, prop) { \n\tif ( table instanceof LuaTable ) {\n\t\tif ( typeof prop == "number" ) return table.numeric[prop - 1];\n\t\telse return table.hash[prop];\n\t}\n\treturn table[prop]; \n};\nenv.rawset = function rawset(table, prop, val) { \n\tif ( table instanceof LuaTable ) {\n\t\tif ( typeof prop == "number" ) return table.numeric[prop - 1] = val;\n\t\telse return table.hash[prop] = val;\n\t}\n\treturn table[prop] = val; \n};\n\nenv.something = function something(table) {\n\tvar array = [];\n\tvar idx = 1;\n\twhile ( table[idx] !== undefined ) {\n\t\tarray.push(table[idx]);\n\t\t++idx;\n\t}\n\treturn __lua.makeMultiReturn.apply(__lua, array);\n};\nenv.math = Math;\n\nenv.setmetatable = function setmetatable(target, meta) {\n\n\tObject.defineProperty(target, "__metatable", {value: meta, enumerable: false, configurable: true });\n\treturn target;\n};\n\nenv.getmetatable = function getmetatable(taget, meta) {\n\treturn taget.__metatable;\n};\n\nvar reduce = function reduce(arr, op) {\n\tif ( arr.length < 1 ) return undefined;\n\tvar val = arr[0];\n\tfor ( var i = 1; i < arr.length; ++i ) {\n\t\tval = op(val, arr[i]);\n\t}\n\treturn val;\n};\n\nenv.bit32 = {\n\tband: function band() { return reduce(arguments, function(a,b) { return a & b; }); },\n\tbor: function bor() { return reduce(arguments, function(a,b) { return a | b; }); },\n\tbxor: function bxor() { return reduce(arguments, function(a,b) { return a | b; }); },\n\n\trshift: function rshift(b, disp) { return b >> disp; }\n};\n\nenv.require = function require(what) {\n\tif ( what == "bit" ) return env.bit32;\n\tif ( what == "bit32" ) return env.bit32;\n\tthrow "Module " + waht + " not found";\n};\n\n__lua.mark(env);\n__lua.env = env;\nfor ( var idx in env ) this[idx] = env[idx];\n\n'}})}));