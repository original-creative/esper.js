/*!
 * esper.js
 * 
 * Compiled: Mon Dec 27 2021 15:08:08 GMT+0800 (China Standard Time)
 * Target  : web (umd)
 * Profile : modern
 * Version : 8fea03d-dirty
 * 
 * 
 * The MIT License (MIT)
 * Copyright (c) 2016 Robert Blanckaert
 * 
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("esper")):"function"==typeof define&&define.amd?define(["esper"],t):"object"==typeof exports?exports["esper-plugin-lang-python"]=t(require("esper")):e["esper-plugin-lang-python"]=t(e.esper)}("undefined"!=typeof self?self:this,(function(e){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){var i=r(1),n=r(2);i._registerPlugin(n)},function(t,r){t.exports=e},function(e,t,r){"use strict";const i=r(!function(){var e=new Error("Cannot find module 'skulpty'");throw e.code="MODULE_NOT_FOUND",e}()),n=r(3);let a;const o=r(26);let s,l=e.exports={name:"lang-python",skulpty:i,parser:function(e,t){t=t||{};let r=i.parse(e,{locations:!0,ranges:!0});return r.body.unshift({type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"self"},init:{type:"ThisExpression"}}],kind:"var",userCode:!1}),r},init:function(e){a=e,a.languages.python=l,s=a.languages.javascript.parser(o)},setupRealm:function(e){e.PythonString=class extends a.StringValue{derivePrototype(e){return e.pythonStringBaseInstance}};class t extends a.EasyObjectValue{static*join$e(e,t,r){if(1!=t.length)return a.CompletionRecord.makeTypeError(r.realm,`join() takes exactly one argument (${t.length} given)`);let i=yield*r.realm.ArrayPrototype.get("join",r);return yield*i.call(t[0],[e],r)}}e.pythonStringBaseInstance=new t(e);let r={uper:"toUpperCase",lower:"toLowerCase",find:"indexOf",replace:"replace",split:"split",trim:"trim",charCodeAt:"charCodeAt",substring:"substring",toString:"toString",valueOf:"valueOf"};for(let t in r)e.pythonStringBaseInstance.properties[t]=e.StringPrototype.properties[r[t]];e.loadLangaugeStartupCode(s),e.PythonRuntime=new n.PythonRuntime(e),e.PythonListProto=new n.PythonListProto(e),e.PythonList=new n.PythonList(e);let i=e.globalScope.get("__pythonRuntime");var o,l,u;o="functions",l="str",u="str",i.getImmediate(o).setImmediate(l,e.PythonRuntime.getImmediate(u))},startupCode:()=>s,makeLiteralValue:function(e,t,r){if(!r.nonUserCode&&"string"==typeof e)return new t.PythonString(e,t)}}},function(e,t,r){"use strict";const i=r(4),n=r(12),a=r(19),o=(r(13),r(6),r(5));r(7);class s extends i{*call(e,t,r){let i=new a(r.realm);i.setPrototype(r.realm.PythonListProto),i.setImmediate("length",o.fromNative(t.length)),i.properties.length.enumerable=!1;for(let e=0;e<t.length;++e){let r=t[e];r instanceof o||(r=realm.fromNative(r)),i.setImmediate(e,r)}return console.log(i.debugString),i}callPrototype(e){return e.PythonListProto}constructorFor(e){return e.PythonListProto}}class l extends i{constructor(e){super(e),this.setImmediate("push",e.ArrayPrototype.getImmediate("push")),this.setImmediate("pop",e.ArrayPrototype.getImmediate("pop")),this.setImmediate("sort",e.ArrayPrototype.getImmediate("sort"))}}l.prototype.wellKnownName="%PythonList%",e.exports={PythonRuntime:class extends i{constructor(e){super(e);let t=new n(e);t.setImmediate("str",this.getImmediate("str")),t.setImmediate("range",this.getImmediate("range")),t.setImmediate("round",this.getImmediate("round")),t.setImmediate("abs",e.Math.getImmediate("abs")),this.setImmediate("functions",t);let r=new n(e);r.setImmediate("list",new s(e)),r.setImmediate("tuple",new s(e)),this.setImmediate("objects",r);let i=new n(e);i.setImmediate("multiply",this.getImmediate("multiply")),i.setImmediate("add",this.getImmediate("add")),i.setImmediate("subscriptIndex",this.getImmediate("subscriptIndex")),i.setImmediate("in",this.getImmediate("in")),this.setImmediate("ops",i)}static*list$e(e,t,r){return new s(r.realm)}static*makeList$e(e,t,r){return new s(r.realm)}static*str$e(e,t,r){return yield*t[0].toStringValue()}static*range(e,t,r){let i=[],n=0,a=1,s=yield*t[0].toIntNative();t.length>1&&(n=s,s=yield*t[1].toIntNative()),t.length>2&&(a=yield*t[2].toIntNative()),console.log(n,a,s);let l=n;for(;l<s&&a>0||l>s&&a<0;)i.push(o.fromNative(l)),l+=a;return yield*r.realm.PythonList.call(null,i,r)}static*round$e(e,t,r){if(t.length>0){let e=yield*t[0].toNumberNative(),r=yield*t[1].toIntNative(),i=Math.pow(10,r);return o.fromNative(Math.round(e*i)/i)}return o.fromNative(Math.round(yield*t[0].toNumberNative()))}static*in$e(e,t,r){let i=t[0],n=t[1];if(n.has("indexOf")){let e=yield*(yield*n.get("indexOf")).call(o.undef,[i],r);return yiled*e.toBoolean()}return yield*n.inOperator(i)}static*add$e(e,t,r){return yield*t[0].add(t[1])}static*multiply$e(e,t,r){return yield*t[0].multiply(t[1])}static*subscriptIndex$e(e,t,r){return yield*t[0].get(t[1].toNative())}},PythonList:s,PythonListProto:l}},function(e,t,r){"use strict";const i=r(5),n=r(10),a=r(12),o=(r(6),r(25));class s extends a{constructor(e){super(e);let t=e.ObjectPrototype;"function"==typeof this.objPrototype?t=this.objPrototype(e):"function"==typeof this.call&&(t=e.FunctionPrototype),"function"==this.call&&(this.clazz="Function"),this.setPrototype(t),this._init(e),this.easyRef=Object.getPrototypeOf(this).constructor}_init(e){var t=Object.getPrototypeOf(this);for(let r of Object.getOwnPropertyNames(t.constructor)){if("length"===r)continue;if("name"===r)continue;if("prototype"===r)continue;if("constructor"===r)continue;if("caller"===r)continue;if("callee"===r)continue;if("arguments"===r)continue;let a=r.split(/\$/),s=a.length>1?a.pop():"",l=a.join(""),u=Object.getOwnPropertyDescriptor(t.constructor,r),c=new n,d=1;if(u.get){let t=u.get();c.value=t instanceof i?t:e.fromNative(t)}else{void 0!==u.value.esperLength&&(d=u.value.esperLength);let r=o.make(e,u.value,this),a=new n(i.fromNative(d));a.configurable=!1,a.writable=!1,a.enumerable=!1,r.properties.length=a,t.wellKnownName&&!r.wellKnownName&&(r.wellKnownName=t.wellKnownName+"#"+l),c.value=r}-1!==s.indexOf("e")&&(c.enumerable=!1),-1!==s.indexOf("w")&&(c.writable=!1),-1!==s.indexOf("c")&&(c.configurable=!1),-1!==s.indexOf("g")&&(c.getter=c.value,delete c.value),this.properties[l]=c}if(this.callPrototype){let t=new n(this.callPrototype(e));t.configurable=!1,t.enumerable=!1,t.writable=!1,this.properties.prototype=t}if(void 0!==this.callLength){let e=new n(i.fromNative(this.callLength));e.configurable=!1,e.writable=!1,e.enumerable=!1,this.properties.length=e}if(this.constructorFor){let t=this.constructorFor(e);if(t){let e=new n(this);e.configurable=!1,e.enumerable=!1,t.properties.constructor=e}}}get jsTypeName(){return"function"==typeof this.call?"function":"object"}}s.EasyNativeFunction=o,e.exports=s},function(e,t,r){"use strict";const i=r(6),n=r(7);new WeakMap;let a,o,s,l,u,c,d,f,p,h,m,y,v,g,b,w=new WeakMap,N=0;class k{static fromPrimativeNative(e){if(!e){if(void 0===e)return a;if(null===e)return o;if(!1===e)return l;if(""===e)return c}if(!0===e)return s;if("number"==typeof e){if(0===e)return 1/e>0?d:h;if(e|0===e){let t=m[e+1];if(t)return t}return new b(e)}return"string"==typeof e?new g(e):"boolean"==typeof e?s:void 0}static hasBookmark(e){return w.has(e)}static getBookmark(e){return w.get(e)}static fromNative(e,t){if(e instanceof k)return e;let r=k.fromPrimativeNative(e);if(r)return r;if(e instanceof Error){if(!t)throw new Error("We needed a realm, but we didnt have one.  We were sad :(");return e instanceof TypeError?t.TypeError.makeFrom(e):e instanceof ReferenceError?t.ReferenceError.makeFrom(e):e instanceof SyntaxError?t.SyntaxError.makeFrom(e):t.Error.makeFrom(e)}if(k.hasBookmark(e))return k.getBookmark(e);throw new TypeError("Tried to load an unsafe native value into the interperter:"+typeof e+" / "+e)}static get undef(){return a}static get null(){return o}static get true(){return s}static get false(){return l}static get nan(){return u}static get emptyString(){return c}static get zero(){return d}static get one(){return f}static createNativeBookmark(e,t){var i;if("function"==typeof e.call)switch(t?t.options.bookmarkInvocationMode:""){case"async":i=function(){let i=r(8),n=t.makeForForeignObject(this),a=e.call(n,Array.from(arguments).map(e=>t.makeForForeignObject(e)),t.globalScope),o=new i(t,null,t.globalScope);o.pushFrame({type:"program",generator:a,scope:t.globalScope});let s,l=o.generator();do{s=l.next()}while(!s.done);return s.value.toNative()};break;case"loop":i=function(){let i=r(8),n=t.makeForForeignObject(this),a=e.call(n,Array.from(arguments).map(e=>t.makeForForeignObject(e)),t.globalScope),o=new i(t,null,t.globalScope);o.pushFrame({type:"program",generator:a,scope:t.globalScope});let s=o.generator();function l(e){for(;!e.done;)if((e=s.next()).value&&e.value.then)return e.value.then(e=>l({done:!1,value:e}));return e}return new Promise((function(e,t){try{e(s.next())}catch(e){t(e)}})).then(l).then(e=>e.value)};break;default:i=function(){throw new Error("Atempted to invoke bookmark for "+e.debugString)}}else i={};return Object.defineProperties(i,{toString:{value:function(){return e.debugString},writable:!0},inspect:{value:function(){return e.debugString},writable:!0},esperValue:{get:function(){return e}}}),w.set(i,e),i}constructor(){this.serial=N++}toNative(){throw new Error("Unimplemented: Value#toNative")}toJS(){return this.toNative()}get debugString(){let e=this.toNative();return e?e.toString():"???"}inspect(){return this.debugString}*get(e){let t="Can't access get "+e+" of that type.";return yield i.typeError(t)}getImmediate(e){return n.syncGenHelper(this.get(e))}*not(){return this.truthy?k.false:k.true}*unaryPlus(){return k.fromNative(+(yield*this.toNumberValue()).toNative())}*unaryMinus(){return k.fromNative(-(yield*this.toNumberValue()).toNative())}*typeOf(){return k.fromNative(this.jsTypeName)}*notEquals(e){var t=yield*this.doubleEquals(e);return yield*t.not()}*doubleNotEquals(e){var t=yield*this.tripleEquals(e);return yield*t.not()}*tripleEquals(e){return e===this?k.true:k.false}getPrototypeProperty(){let e=this.properties.prototype;if(e)return e.value}*makeThisForNew(e){var t=new y(e),r=this.getPrototypeProperty();return r&&t.setPrototype(r),t}*gt(e){return k.fromNative((yield*this.toPrimitiveNative())>(yield*e.toPrimitiveNative()))}*lt(e){return k.fromNative((yield*this.toPrimitiveNative())<(yield*e.toPrimitiveNative()))}*gte(e){return k.fromNative((yield*this.toPrimitiveNative())>=(yield*e.toPrimitiveNative()))}*lte(e){return k.fromNative((yield*this.toPrimitiveNative())<=(yield*e.toPrimitiveNative()))}*subtract(e){return k.fromNative((yield*this.toNumberNative())-(yield*e.toNumberNative()))}*divide(e){return k.fromNative((yield*this.toNumberNative())/(yield*e.toNumberNative()))}*multiply(e){return k.fromNative((yield*this.toNumberNative())*(yield*e.toNumberNative()))}*mod(e){return k.fromNative((yield*this.toNumberNative())%(yield*e.toNumberNative()))}*bitNot(){return k.fromNative(~(yield*this.toNumberNative()))}*shiftLeft(e){return k.fromNative((yield*this.toNumberNative())<<(yield*e.toNumberNative()))}*shiftRight(e){return k.fromNative((yield*this.toNumberNative())>>(yield*e.toNumberNative()))}*shiftRightZF(e){return k.fromNative((yield*this.toNumberNative())>>>(yield*e.toNumberNative()))}*bitAnd(e){return k.fromNative((yield*this.toNumberNative())&(yield*e.toNumberNative()))}*bitOr(e){return k.fromNative((yield*this.toNumberNative())|(yield*e.toNumberNative()))}*bitXor(e){return k.fromNative((yield*this.toNumberNative())^(yield*e.toNumberNative()))}*pow(e){return k.fromNative(Math.pow(yield*this.toNumberNative(),yield*e.toNumberNative()))}*inOperator(e){return new i(i.THROW,{type:"TypeError",message:"Cannot use 'in' operator to search for 'thing' in 'thing'"})}get truthy(){throw new Error("Unimplemented: Value#truthy")}get jsTypeName(){throw new Error("Unimplemented: Value#jsTypeName")}get specTypeName(){return this.jsTypeName}get isCallable(){return"function"==typeof this.call}*toNumberValue(){throw new Error("Unimplemented: Value#toNumberValue")}*toStringValue(){throw new Error("Unimplemented: Value#StringValue")}*toStringNative(){return(yield*this.toStringValue()).native}*toBooleanValue(){return this.truthy?s:l}*toUIntNative(){let e=yield*this.toNumberValue();return Math.floor(e.native)}*toIntNative(){let e=yield*this.toNumberValue();return Math.floor(e.native)}*toNumberNative(){return(yield*this.toNumberValue()).native}*toPrimitiveValue(e){throw new Error("Unimplemented: Value#toPrimitiveValue")}*toPrimitiveNative(e){return(yield*this.toPrimitiveValue(e)).native}*fastGen(){return this}makeImmutable(){throw new Error("Unimplemented: Value#makeImmutable")}}e.exports=k,Symbol&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=k.prototype.inspect),y=r(12),v=r(13),g=r(16),b=r(17);const P=r(24),E=r(18);a=new P,o=new E,s=new v(!0),l=new v(!1),u=new v(NaN),c=new g(""),d=new b(0),h=new b(-0),f=new b(1),p=new b(-1),m=[p,d,f,new b(2),new b(3),new b(4),new b(5),new b(6),new b(7),new b(8),new b(9)]},function(e,t,r){"use strict";r(5);class i{constructor(e,t,r){void 0===t&&(t=e,e=i.NORMAL),this.type=e,this.value=t,this.target=r}get abrupt(){return this.type!==i.NORMAL}static makeTypeError(e,t){let r;return r=t instanceof Error?e.TypeError.makeFrom(t):e.TypeError.make(t),new i(i.THROW,r)}static makeReferenceError(e,t){let r;return r=t instanceof Error?e.ReferenceError.makeFrom(t):e.ReferenceError.make(t),new i(i.THROW,r)}static makeSyntaxError(e,t){let r;return r=t instanceof Error?e.SyntaxError.makeFrom(t):e.SyntaxError.make(t),new i(i.THROW,r)}static makeRangeError(e,t){let r;return r=t instanceof Error?e.RangeError.makeFrom(t):e.RangeError.make(t),new i(i.THROW,r)}static typeError(e){return new i(i.THROW_STD,["TypeError",e])}static referenceError(e){return new i(i.THROW_STD,["ReferenceError",e])}static syntaxError(e){return new i(i.THROW_STD,["SyntaxError",e])}static rangeError(e){return new i(i.THROW_STD,["RangeError",e])}addExtra(e){return this.value.addExtra(e)}}e.exports=i,i.NORMAL=0,i.BREAK=1,i.CONTINUE=2,i.RETURN=3,i.THROW=4,i.THROW_STD=5},function(e,t,r){"use strict";class i{static*identify(e){return e}static*map(e,t){t=t||i.identify;var r=new Array(e.length);for(let i=0;i<e.length;++i)r[i]=yield*t(e[i],i,e);return r}static*each(e,t){if(null==e)return e;for(let r=0;r<e.length&&!1!==(yield*t(e[r],r,e));++r);return e}static*noop(){}static*sort(e,t){return t=t||function*(e,t){return e<t},yield*function*e(t,r){if(t.length<2)return t;let i=Math.floor(t.length/2),n=yield*e(t.slice(0,i),r),a=yield*e(t.slice(i,t.length),r);return yield*function*(e,t,r){var i=[];for(;e.length&&t.length;)(yield*r(e[0],t[0]))?i.push(e.shift()):i.push(t.shift());for(;e.length;)i.push(e.shift());for(;t.length;)i.push(t.shift());return i}(n,a,r)}(e,t)}static*values(e){var t=[];for(let r in e)Object.hasOwnProperty(r)&&t.push(e[r]);return t}static*keys(e){var t=[];for(let r in e)Object.hasOwnProperty(r)&&t.push(r);return t}static*identity(e){return e}static syncGenHelper(e){var t=e.next();if(!t.done)throw console.log("This code path uses a helper, but the actual method yielded..."),new Error("This code path uses a helper, but the actual method yielded...");return t.value}}e.exports=i},function(e,t,r){"use strict";const i=r(5),n=r(6),a=(r(9),r(12),r(21),r(22),r(10),r(23)),o=(r(19),r(11));class s{constructor(e,t){for(var r in this.type=e,t)this[r]=t[r]}}class l{constructor(e,t,r){this.realm=e;this.lastValue=null,this.ast=t,this.defaultYieldPower=5,this.yieldPower=this.defaultYieldPower,this.debug=!1,this.profile=!1,this.lastASTNodeProcessed=null,this.frames=[],t&&this.pushAST(t,r)}pushAST(e,t){let r=e?this.branch(e,t):function*(){return yield o.stepMinor}();this.pushFrame({generator:r,type:"program",scope:t,ast:e})}processLostFrames(e){for(let t of e)t.profileName&&this.incrCtr("fxTime",t.profileName,Date.now()-t.entered)}unwindStack(e,t,r){let i=[];for(let n=0;n<this.frames.length;++n){let a=this.frames[n].type,o=a==e||"return"==e&&"function"==a;if(o&&r&&(o=this.frames[n].labels&&-1!==this.frames[n].labels.indexOf(r)),o){let e=n+1;for(;e<this.frames.length&&"finally"==this.frames[e].type;++e);let t=this.frames[e];return this.processLostFrames(this.frames.splice(0,n+1)),this.saveFrameShortcuts(),Array.prototype.unshift.apply(this.frames,i),t}if("return"==e&&this.frames[n].retValue){let e=this.frames[n];return this.processLostFrames(this.frames.splice(0,n)),this.saveFrameShortcuts(),Array.prototype.unshift.apply(this.frames,i),e}if(!t&&"function"==this.frames[n].type)break;"finally"==a&&i.push(this.frames[n])}return!1}next(e){let t=this.frames;do{let r,a=t[0];a.exception?(this.lastValue=a.exception,delete a.exception):a.retValue&&(this.lastValue=a.retValue,delete a.retValue),r=a.generator.next(e||this.lastValue),e=void 0;let s=r.value;if(s instanceof o)switch(s.type){case"branch":this.branchFrame(s.kind,s.ast,s.scope,s.extra);continue;case"getEvaluator":return this.next(this);case"getRealm":return this.next(this.realm);case"getScope":for(let e=0;e<t.length;++e)if(t[e].scope)return this.next(t[e].scope);throw new Error("No scope");case"waitForFramePop":case"framePushed":continue;case"event":case"step":return this.instrument&&this.instrument(this,s),{done:!1,value:s}}if(s instanceof n)this.processCompletionValueMeaning(s),this.lastValue=s.value;else{if(this.instrument&&this.instrument(this,s),s&&s.then)return a&&"await"!==a.type&&this.pushAwaitFrame(s),{done:!1,value:s};if(this.lastValue=s,r.done){let e=this.popFrame();if(e.profileName&&this.processLostFrames([e]),"function"!==e.type||e.returnLastValue||(this.lastValue=i.undef),0===t.length)return this.debug&&this.dumpProfilingInformation(),this.onCompletion&&this.onCompletion(r.value),{done:!0,value:r.value}}else;}}while(0);return{done:!1,value:this.lastValue}}processCompletionValueMeaning(e){if(e.type===n.THROW_STD){let t=e.value[1];switch(e.value[0]){case"TypeError":e=n.makeTypeError(this.realm,t);break;case"RefrenceError":case"RangeError":e=n.makeReferenceError(this.realm,t);break;case"SyntaxError":e=n.makeSyntaxError(this.realm,t)}}if(!(e.value instanceof i)){if(e.value instanceof Error)throw new Error("Value was an error: "+e.value.stack);if(!e.value.type)throw new Error("Value isnt of type Value, its: "+e.value.toString());switch(e.value.type){case"TypeError":e.value=n.makeTypeError(this.realm,e.value.message).value}}switch(e.type){case n.CONTINUE:if(this.unwindStack("continue",!1,e.target))return!0;throw new Error("Cant find matching loop frame for continue");case n.BREAK:if(this.unwindStack("loop",!1,e.target))return!0;throw new Error("Cant find matching loop frame for break");case n.RETURN:let t=this.unwindStack("return",!1);if(!t)throw new Error("Cant find function bounds.");return t.retValue=e.value,!0;case n.THROW:let r,o=e.value.toNative();o&&o.stack&&(r=o.stack.split(/\n/).slice(0,4).join("\n"));let s,l=this.buildStacktrace(o).join("\n    ");for(let e=0;e<this.frames.length;++e)if(this.frames[e].ast){s=this.frames[e];break}if(e.value instanceof a&&this.realm.options.addExtraErrorInfoToStacks&&e.value.extra){l+="\n-------------";for(let t in e.value.extra){let r=e.value.extra[t];l+=r instanceof i?`\n${t} => ${r.debugString}`:`\n${t} => ${r}`}}o instanceof Error&&(o.stack=l,r&&this.realm.options.addInternalStack&&(o.stack+="\n-------------\n"+r),s&&(o.range=s.ast.range,o.loc=s.ast.loc)),e.value instanceof a&&(e.value.has("stack")||(e.value.setImmediate("stack",i.fromNative(l)),e.value.properties.stack.enumerable=!1));let u=this.unwindStack("catch",!0);if(u)return u.exception=e,this.lastValue=e,!0;let c=-1;this.topFrame.ast&&this.topFrame.ast.attr&&(c=this.topFrame.ast.attr.pos.start_line);let d=e.value.toNative();throw this.onError&&this.onError(d),d;case n.NORMAL:return!1}}buildStacktrace(e){let t=e?[e.toString()]:[];for(var r of this.frames)if(r.ast){let e="at "+(r.ast.srcName||r.ast.type)+" ";r.ast.loc&&(e+="(<src>:"+r.ast.loc.start.line+":"+r.ast.loc.start.column+")"),t.push(e)}return t}pushFrame(e){e.srcAst=e.ast,void 0===e.yieldPower&&(e.yieldPower=this.defaultYieldPower),this.frames.unshift(new s(e.type,e)),this.saveFrameShortcuts()}pushAwaitFrame(e){this.pushFrame({generator:function*(e){for(;!e.resolved;)yield e;return e.successful?e.value:new n(n.THROW,e.value)}(e),type:"await"})}popFrame(){let e=this.frames.shift();return this.saveFrameShortcuts(),e}saveFrameShortcuts(){this.yieldPower;0==this.frames.length?(this.topFrame=void 0,this.yieldPower=this.defaultYieldPower):(this.topFrame=this.frames[0],this.yieldPower=this.topFrame.yieldPower)}fromNative(e,t){return this.realm.fromNative(e,t)}generator(){return{next:this.next.bind(this),throw:e=>{throw e},evaluator:this}}breakFrames(){}*resolveRef(e,t,r){let i=this.topFrame.ast;this.topFrame.ast=e;let n=yield*l.doResolveRef(e,t,r,this.branch.bind(this));return this.topFrame.ast=i,n}*partialMemberExpression(e,t,r){if(t.computed){let i=yield*this.branch(t.property,r);return yield*e.get(i.toNative())}if("Identifier"==t.property.type){if(!e)throw`Cant index ${t.property.name} of undefined`;return yield*e.get(t.property.name)}if(!e)throw`Cant index ${t.property.value.toString()} of undefined`;return yield*e.get(t.property.value.toString())}doBinaryEvaluation(e,t,r){switch(e){case"==":return t.doubleEquals(r);case"!=":return t.notEquals(r);case"===":return t.tripleEquals(r);case"!==":return t.doubleNotEquals(r);case"+":return t.add(r);case"-":return t.subtract(r);case"*":return t.multiply(r);case"/":return t.divide(r);case"%":return t.mod(r);case"|":return t.bitOr(r);case"^":return t.bitXor(r);case"&":return t.bitAnd(r);case"in":return r.inOperator(t);case"instanceof":return r.call?t.instanceOf(r):function*(){yield n.typeError("Right-hand side of 'instanceof' is not callable")}();case">":return t.gt(r);case"<":return t.lt(r);case">=":return t.gte(r);case"<=":return t.lte(r);case"<<":return t.shiftLeft(r);case">>":return t.shiftRight(r);case">>>":return t.shiftRightZF(r);case"**":return t.pow(r);default:throw new Error("Unknown binary operator: "+e)}}branchFrame(e,t,r,i){let n={generator:this.branch(t,r),type:e,scope:r,ast:t};if(i){for(var a in i)n[a]=i[a];i.profileName&&(n.entered=Date.now())}return this.pushFrame(n),o.framePushed}beforeNode(e){let t=this.topFrame,r={top:t,ast:t.ast,node:e};return this.lastASTNodeProcessed=e,this.debug&&this.incrCtr("astInvocationCount",e.type),t.ast=e,r}afterNode(e,t){let r=this.topFrame;r.value=t,r.ast=e.ast}branch(e,t){if(!e.dispatch){let t=this.findNextStep(e.type);e.dispatch=function*(e,r,i){let a=e.beforeNode(r),o=yield*t(e,r,i);return o instanceof n&&(o=yield o),o&&o.then&&(o=yield o),e.afterNode(a,o),o}}return e.dispatch(this,e,t)}incrCtr(e,t,r){void 0===r&&(r=1),this.profile||(this.profile={});let i=this.profile[e];i||(i={},this.profile[e]=i),(t=t||"???")in i?i[t]+=r:i[t]=r}dumpProfilingInformation(){if(this.profile){console.log("===== Profile =====");for(let r in this.profile){console.log(r+" Stats:");let i=this.profile[r],n=Object.keys(i).sort((e,t)=>i[t]-i[e]);for(let r of n)console.log(`  ${e=r,t=20,e+new Array(Math.max(t-e.length,1)).join(" ")}: ${i[r]}`)}var e,t;console.log("=================")}else console.log("===== Profile: None collected =====")}get insterment(){return this.instrument}set insterment(e){this.instrument=e}}l.doResolveRef=r(20).doResolveRef,l.prototype.findNextStep=r(20).findNextStep,e.exports=l},function(e,t,r){"use strict";const i=r(5),n=r(10),a=r(12),o=r(19),s=r(11);let l;class u extends a{constructor(e,t){let r=t.realm;super(r,r.FunctionPrototype),this.func=e,this.funcSourceAST=e,this.scope=t,this.returnLastValue=!1,this.properties.prototype=new n(new a(r),!1),this.properties.name=new n(r.fromNative(e.id?e.id.name:void 0),!1),this.properties.length=new n(r.fromNative(e.params.length),!1)}toNative(){return i.createNativeBookmark(this,this.scope.realm)}get debugString(){return this.func&&this.func.id?`[Function ${this.func.id.name}]`:"[Function]"}get truthy(){return!0}*doubleEquals(e){return e===this?i.true:i.false}*call(e,t,r,u){let c;r||(r=this.scope),this.boundScope?(c=this.boundScope.createChild(),c.writeTo=this.boundScope.object,c.thiz=this.thiz||this.boundScope.thiz):(c=this.scope.createChild(),c.thiz=this.thiz||e),!0===this.func.strict&&(c.strict=!0),this.func.id&&c.add(this.func.id.name,this);this.scope.object;if(this.func.vars)for(let e in this.func.vars)c.add(e,i.undef),c.object.properties[e].isVariable=!0;if(!c.strict&&this.func.funcs)for(let e in this.func.funcs){let t=this.func.funcs[e];c.add(t.id.name,i.undef)}let d=Math.max(t.length,this.func.params.length),f=new Array(d),p=new a(c.realm);p.clazz="Arguments";for(let e=0;e<d;++e){let r=i.undef;e<t.length&&(r=t[e]);let a=new n(r);f[e]=a,c.strict?yield*p.set(e,r):p.rawSetProperty(e,a)}if(!c.strict){let e=new n(c.realm.fromNative(t.length));e.enumerable=!1,p.rawSetProperty("callee",e),yield*p.set("callee",this)}let h=new n(c.realm.fromNative(t.length));h.enumerable=!1,p.rawSetProperty("length",h),c.add("arguments",p);for(let e=0;e<this.func.params.length;++e){let n=this.func.params[e];if("AssignmentPattern"===n.type&&(n=n.left),"RestElement"===n.type){let i=this.func.params[e].argument.name,n=t.slice(e);c.add(i,o.make(n,r.realm))}else{let a=i.undef;if("Identifier"===n.type){n={id:n},n.id||console.log("Wrong P",Object.keys(this.func.vars),n);let i=n.id?n.id.name:void 0;r.strict?c.add(i,e<t.length?t[e]:a):c.object.rawSetProperty(i,f[e])}else{let r=yield*l.doResolveRef(n,c);yield*r.setValue(t.length?t[e]:a)}}}let m={returnLastValue:this.returnLastValue,creator:this};return u&&u.evaluator&&u.evaluator.debug&&(m.profileName=u.callNode.callee.srcName),u&&u.callee&&(m.callee=u.callee),this.func.nonUserCode&&(m.yieldPower=-1),yield s.branch("function",this.func.body,c,m)}get jsTypeName(){return"function"}get specTypeName(){return"object"}}u.prototype.clazz="Function",e.exports=u,l=r(20)},function(e,t,r){"use strict";const i=r(5),n=r(6),a=r(11),o=r(7);let s=0;e.exports=class{constructor(e,t){this.value=e,this.serial=s++,this.configurable=!0,this.enumerable=void 0===t||!!t,this.writable=!0,this.getter=void 0,this.setter=void 0,this.variable=!1}get direct(){return!this.getter&&!this.setter&&this.writable}*getValue(e){if(e=e||i.null,this.getter){let t=yield a.getScope;return yield*this.getter.call(e,[],t)}return this.value}*setValue(e,t,r){return e=e||i.null,this.setter?(r=r||(yield a.getScope),yield*this.setter.call(e,[t],r)):this.writable?(this.value=t,this.value):r&&r.strict?yield n.typeError("Can't write to non-writable value."):this.value}setValueImmediate(e,t,r){return o.syncGenHelper(this.setValue(e,t,r))}}},function(e,t,r){"use strict";class i{static branch(e,t,r,n){let a=new i("branch");return a.kind=e,a.ast=t,a.scope=r,a.extra=n,a}constructor(e){this.type=e}mark(e){for(let t in e)this[t]=e[t];return this}}i.stepMinor=new i("step"),i.stepMajor=new i("step"),i.stepStatement=new i("step"),i.waitForFramePop=new i("waitForFramePop"),i.framePushed=new i("framePushed"),i.getEvaluator=new i("getEvaluator"),i.getRealm=new i("getRealm"),i.getScope=new i("getScope"),i.eventLoopBodyStart=new i("event").mark({event:"loopBodyStart"}),e.exports=i},function(e,t,r){"use strict";const i=r(5),n=r(10),a=r(6),o=r(13),s=r(18),l=r(7),u=r(11);let c=()=>!1,d=function*(){return i.undef};class f{constructor(e,t,r){this.object=e,this.name=t,this.ctxthis=r}del(e){return e.strict?this.object.deleteStrict(this.name):this.object.delete(this.name)}getValue(){return this.object.get(this.name,this.ctxthis||this.object)}setValue(e,t){return this.object.set(this.name,e)}}class p extends i{constructor(e,t){super(),this.extensable=!0,this.proto=null,t?this.eraseAndSetPrototype(t):e?this.eraseAndSetPrototype(e.ObjectPrototype):this.properties=Object.create(null)}ref(e,t){let r=this;return this.properties[e]?new f(this,e,t):{name:e,object:r,isVariable:!1,del:c,getValue:d,setValue:function(e,t){return this.object.set(this.name,e)}}}set(e,t,r){if(r=r||{},!Object.prototype.hasOwnProperty.call(this.properties,e)){if(this.properties[e]&&this.properties[e].setter)return this.properties[e].setValue(this,t);if(!this.extensable)return i.undef.fastGen();let a=new n(t);return a.enumerable=!("enumerable"in r)||r.enumerable,this.properties[e]=a,a.setValue(this,t)}return this.properties[e].setValue(this,t)}rawSetProperty(e,t){this.properties[e]=t}setImmediate(e,t){if(e in this.properties){if(Object.prototype.hasOwnProperty.call(this.properties,e)&&this.properties[e].direct)return void(this.properties[e].value=t)}else if(this.extensable){let r=new n(t);return r.del=this.delete.bind(this,e),void(this.properties[e]=r)}return l.syncGenHelper(this.set(e,t))}has(e){return e in this.properties}delete(e){return!!this.properties[e].configurable&&delete this.properties[e]}deleteStrict(e){return this.properties[e].configurable?delete this.properties[e]:a.typeError("Can't delete nonconfigurable object")}toNative(e){var t=i.createNativeBookmark(this,e);if("function"===this.jsTypeName)return t;for(let r in this.properties){let n=r,a=this.properties[n];Object.prototype.hasOwnProperty.call(t,n)||void 0===t[r]&&Object.defineProperty(t,r,{get:()=>{var e=this.properties[n].value;return void 0===e?void 0:e.toNative()},set:t=>{this.properties[n].value=i.fromNative(t,e)},enumerable:a.enumerable,configurable:a.configurable})}return t}toJS(){let e={};for(let t in this.properties){let r=t,i=this.properties[r];i.enumerable&&(e[r]=i.value.toJS())}return e}*add(e){return yield*(yield*this.toPrimitiveValue()).add(e)}*doubleEquals(e){if(e===this)return i.true;if(e instanceof p)return i.false;if(e instanceof o){let t="string"==e.jsTypeName?"string":"number",r=yield*this.toPrimitiveValue(t);return yield*r.doubleEquals(e)}let t=yield*this.toPrimitiveValue("string");return yield*t.doubleEquals(e)}*inOperator(e){let t=yield*e.toStringValue();return this.has(t.toNative())?i.true:i.false}*get(e,t){var r=this.properties[e];return r?r.direct?r.value:yield*r.getValue(t||this):this.proto?yield*this.proto.get(e,t||this):i.undef}getImmediate(e,t){var r=this.properties[e];return r?r.direct?r.value:l.syncGenHelper(r.getValue(t||this)):i.undef}*instanceOf(e){return e.constructorOf?yield*e.constructorOf(this):i.false}*constructorOf(e){let t=yield*this.get("prototype"),r=yield u.getRealm,n=e.getPrototype(r),a=[];for(;n;){if(n===t)return i.true;if(a.push(n),n=n.getPrototype(r),-1!==a.indexOf(n))return i.false}return i.false}*observableProperties(e){for(let t in this.properties)this.properties[t].enumerable&&(yield e.fromNative(t))}getPropertyValueMap(){let e={};for(let t in this.properties){let r=this.properties[t];r.value&&(e[t]=r.value)}return e}hasOwnProperty(e){return Object.prototype.hasOwnProperty.call(this.properties,e)}setPrototype(e){return this.properties?null==e||e instanceof s?(Object.setPrototypeOf(this.properties,null),void(this.proto=null)):(this.proto=e,void(e.properties&&Object.setPrototypeOf(this.properties,e.properties))):this.eraseAndSetPrototype(e)}eraseAndSetPrototype(e){null==e||e instanceof s?(this.proto=null,this.properties=Object.create(null)):(this.proto=e,this.properties=Object.create(e.properties))}getPrototype(){return this.proto}get debugString(){let e=["{","[",this.clazz,"]"],t=[];this.wellKnownName&&e.push("(",this.wellKnownName,")"),this.proto&&t.push("[[Prototype]]: "+(this.proto.wellKnownName||this.proto.clazz||this.proto.jsTypeName));for(let e in this.properties){if(!Object.prototype.hasOwnProperty.call(this.properties,e))continue;let r=this.properties[e].value;this.properties[e].getter||this.properties[e].setter?t.push(e+": [Getter/Setter]"):"object"===r.specTypeName?t.push(e+": [Object]"):"function"===r.specTypeName?t.push(e+": [Function]"):t.push(e+": "+r.specTypeName)}return e.push(t.join(", ")),e.push("] }"),e.join(" ")}*toPrimitiveValue(e){let t,r;t="string"==e?["toString","valueOf"]:["valueOf","toString"];for(let e of t){let t=yield*this.get(e);if(t&&t.call){r||(r=yield u.getRealm);let e=yield yield*t.call(this,[],r.globalScope),n=i.undef;if(e instanceof a){if(e.type==a.RETURN)n=e.value;else if(e.type!=a.NORMAL)continue}else n=e;if("object"!==n.specTypeName)return n}}return yield a.typeError("Cannot convert object to primitive value")}*toNumberValue(){let e=yield*this.toPrimitiveValue("number");return yield*e.toNumberValue()}*toObjectValue(e){return this}*toStringValue(){let e=(yield*this.toPrimitiveValue("string")).toStringValue();return yield*e}get truthy(){return!0}get jsTypeName(){return"function"!=typeof this.call?"object":"function"}get specTypeName(){return"object"}makeImmutable(){for(let e of Object.getOwnPropertyNames(this.properties)){let t=this.properties[e];t.value&&t.writable&&(t.writable=!1),t.configurable&&(t.configurable=!1),Object.freeze(t)}this.extensable&&(this.extensable=!1),Object.seal(this.properties),Object.freeze(this)}}p.prototype.clazz="Object",e.exports=p},function(e,t,r){"use strict";const i=r(5),n=(r(6),r(11));r(14);let a;function*o(e){return e instanceof s?e.toNative():yield*e.toPrimitiveNative()}class s extends i{constructor(e){super(null),this.native=e}ref(e){var t=this;let r=Object.create(null);return r.getValue=function*(){return yield*t.get(e)},r.setValue=function*(r){yield*t.set(e,r)},r}*get(e){let t=yield n.getRealm;return yield*this.derivePrototype(t).get(e,this)}*set(e,t){}derivePrototype(e){switch(typeof this.native){case"string":return e.StringPrototype;case"number":return e.NumberPrototype;case"boolean":return e.BooleanPrototype}}toNative(){return this.native}get debugString(){return"object"==typeof this.native?"[native object]":"function"==typeof this.native?"[native function]":"string"==typeof this.native?JSON.stringify(this.native):""+this.native}*asString(){return this.native.toString()}*doubleEquals(e){let t=this.native;if(e instanceof s)return i.fromNative(this.native==e.native);if("number"==typeof t){if(e instanceof a){let r=yield*e.toNumberValue();return i.from(t===r.toNative())}return i.false}if("boolean"==typeof t){let t=yield*this.toNumberValue();return yield*t.doubleEquals(e)}return i.false}*tripleEquals(e){return this.native===e.toNative()?i.true:i.false}*add(e){return i.fromNative(this.native+(yield*e.toPrimitiveNative("number")))}*instanceOf(e){return i.false}*unaryPlus(){return i.fromNative(+this.native)}*unaryMinus(){return i.fromNative(-this.native)}*not(){return i.fromNative(!this.native)}*gt(e){return i.fromNative(this.native>(yield*o(e)))}*lt(e){return i.fromNative(this.native<(yield*o(e)))}*gte(e){return i.fromNative(this.native>=(yield*o(e)))}*lte(e){return i.fromNative(this.native<=(yield*o(e)))}*observableProperties(e){yield*this.derivePrototype(e).observableProperties(e)}*makeThisForNew(){throw new Error("primative value is not a constructor")}getPrototype(e){return this.derivePrototype(e)}get truthy(){return!!this.native}get jsTypeName(){return typeof this.native}*toPrimitiveValue(e){return this}*toStringValue(){return"string"==typeof this.native?this:i.fromNative(String(this.native))}*toNumberValue(){return"number"==typeof this.native?this:i.fromNative(Number(this.native))}makeImmutable(){return!0}}e.exports=s,a=r(16)},function(e,t,r){"use strict";const i=r(5),n=r(15),a=r(6),o=r(11);class s extends i{constructor(){super(null)}get truthy(){return!1}*not(){return i.fromNative(!0)}*doubleEquals(e){return e instanceof s?i.true:e instanceof n?i.fromNative(this.toNative()==e.toNative()):i.false}*observableProperties(e){}*instanceOf(){return i.false}*get(e){let t="Cannot read property '"+e+"' of "+this.specTypeName,r=yield o.getRealm,i=a.makeTypeError(r,t);return yield*i.addExtra({code:"IndexEmpty",target:this,prop:e}),i}makeImmutable(){return!0}}e.exports=s},function(e,t,r){"use strict";const i=r(5),n=r(6);class a extends i{constructor(e){super(),this.native=e}makeBridge(e){return a.make(e)}static make(e){if(void 0===e)return i.undef;let t=i.fromPrimativeNative(e);return t||(i.hasBookmark(e)?i.getBookmark(e):new a(e))}ref(e,t){let r=this,n=Object.create(null);return n.getValue=function*(){return i.fromNative(r.native[e])},n.setValue=function*(t){var i;i=t,r.native[e]=i.toNative()},n}toNative(){return this.native}*asString(){return this.native.toString()}*doubleEquals(e){return this.makeBridge(this.native==e.toNative())}*tripleEquals(e){return this.makeBridge(this.native===e.toNative())}*add(e){return this.makeBridge(this.native+e.toNative())}*subtract(e){return this.makeBridge(this.native-e.toNative())}*multiply(e){return this.makeBridge(this.native*e.toNative())}*divide(e){return this.makeBridge(this.native/e.toNative())}*mod(e){return this.makeBridge(this.native%e.toNative())}*shiftLeft(e){return this.makeBridge(this.native<<e.toNative())}*shiftRight(e){return this.makeBridge(this.native>>e.toNative())}*shiftRightZF(e){return this.makeBridge(this.native>>>e.toNative())}*bitAnd(e){return this.makeBridge(this.native&e.toNative())}*bitOr(e){return this.makeBridge(this.native|e.toNative())}*bitXor(e){return this.makeBridge(this.native^e.toNative())}*gt(e){return this.makeBridge(this.native>e.toNative())}*lt(e){return this.makeBridge(this.native<e.toNative())}*gte(e){return this.makeBridge(this.native>=e.toNative())}*lte(e){return this.makeBridge(this.native<=e.toNative())}*inOperator(e){return this.makeBridge(e.toNative()in this.native)}*instanceOf(e){return this.makeBridge(this.native instanceof e.toNative())}*unaryPlus(){return this.makeBridge(+this.native)}*unaryMinus(){return this.makeBridge(-this.native)}*not(){return this.makeBridge(!this.native)}*get(e){return this.makeBridge(this.native[e])}*set(e,t){this.native[e]=t.toNative()}*observableProperties(e){for(let e in this.native)yield this.makeBridge(e)}*call(e,t){let r=new Array(t.length);for(let e=0;e<t.length;++e)r[e]=t[e].toNative();try{let t=this.native.apply(e?e.toNative():void 0,r);return this.makeBridge(t)}catch(e){let t=this.makeBridge(e);return new n(n.THROW,t)}}*makeThisForNew(){return this.makeBridge(Object.create(this.native.prototype))}*toStringValue(){return i.fromNative(this.native.toString())}get debugString(){return"[Bridge: "+this.native+"]"}get truthy(){return!!this.native}get jsTypeName(){return typeof this.native}}e.exports=a},function(e,t,r){"use strict";const i=r(13),n=r(5);let a;class o extends i{*get(e,t){let r=Number(e);return isNaN(r)?"length"===e?o.fromNative(this.native.length):yield*super.get(e,t):o.fromNative(this.native[r])}*doubleEquals(e){if(e instanceof o)return n.fromNative(this.native==e.native);if(e instanceof a){let t=yield*this.toNumberValue();return yield*t.doubleEquals(e)}if("object"==e.jsTypeName){let t=yield*e.toStringValue();if("string"==t.jsTypeName)return n.fromNative(this.native==t.native)}return yield*super.doubleEquals(e)}*add(e){return n.fromNative(this.native+(yield*e.toPrimitiveNative("string")))}*observableProperties(e){for(let e in this.native)yield n.fromNative(e)}has(e){let t=Number(e);return!isNaN(t)&&(t>=0&&t<this.native.length)}*iterateAll(){let e=this.native.length,t=0,r=new Array(e);for(let i=0;i<e;++i)r[t++]=n.fromNative(this.native[i]);return r}}e.exports=o,a=r(17)},function(e,t,r){"use strict";const i=r(13),n=r(5);let a;class o extends i{*doubleEquals(e){let t;return e instanceof o?n.fromNative(this.native==e.native):(e instanceof a?t=yield*e.toNumberValue():"object"==e.specTypeName&&(t=yield*e.toPrimitiveValue()),t?yield*this.doubleEquals(t):yield*super.doubleEquals(e))}*add(e){return n.fromNative(this.native+(yield*e.toPrimitiveNative("number")))}}e.exports=o,a=r(16)},function(e,t,r){"use strict";const i=r(14),n=r(5);class a extends i{toNative(){return null}get jsTypeName(){return"object"}get specTypeName(){return"null"}*tripleEquals(e,t){return e instanceof a?n.true:n.false}*asString(){return"null"}*add(e){switch(e.specTypeName){case"null":return n.zero;case"boolean":return e.native?n.one:n.zero;case"number":return yield*n.zero.add(e);case"undefined":return n.nan;default:return yield*n.fromNative("null").add(e)}}*toPrimitiveValue(e){switch(e){case"number":return n.zero;default:return n.fromNative("null")}}*toNumberValue(){return n.zero}*toStringValue(){return n.fromNative("null")}get debugString(){return"null"}}e.exports=a},function(e,t,r){"use strict";r(13);const i=r(12),n=r(5),a=r(7);let o;class s extends i{constructor(e){super(e,e.ArrayPrototype)}*get(e,t){return yield*super.get(e,t)}adjustLength(e,t){if("length"==e&&this.properties.length){let e=a.syncGenHelper(t.toIntNative()),r=this.getLengthSync();if(e<r)for(let t=r-1;t>=e;--t)delete this.properties[t]}if(!isNaN(parseInt(e))){e>=this.getLengthSync()&&(this.properties.length.value=n.fromNative(e+1))}}getLengthSync(){return this.properties.length.value.native}set(e,t){return this.adjustLength(e,t),super.set(e,t)}setImmediate(e,t){return this.adjustLength(e,t),super.setImmediate(e,t)}toNative(){let e=new Array(this.getLengthSync());for(let t of Object.keys(this.properties)){if("length"===t)continue;let r=this.properties[t];r&&r.value&&(r.direct?e[t]=r.value.toNative():Object.defineProperty(e,t,{enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:r.value.toNative()}))}return e}toJS(){let e=new Array(this.getLengthSync());for(let t of Object.keys(this.properties)){if("length"===t)continue;let r=this.properties[t];e[t]=r.value.toJS()}return e}static make(e,t){let r=new s(t);r.setImmediate("length",n.fromNative(0)),r.properties.length.enumerable=!1;for(let i=0;i<e.length;++i){let a=e[i];a instanceof n||(a=t.fromNative(a)),r.setImmediate(i,a)}return r}get debugString(){if(!this.properties.length)return super.debugString;let e=this.properties.length.value.native,t=Math.min(e,20),r=new Array(t);for(let e=0;e<t;++e){let t=this.properties[e];t&&t.value?r[e]=t.value.debugString:r[e]=""}return"["+r.join(", ")+(t<e?"...":"")+"]"}*iterateAll(){let e=this.getLengthSync(),t=0,r=new Array(e);for(let i=0;i<e;++i)r[t++]=yield*this.get(i);return r}}s.prototype.clazz="Array",e.exports=s,o=r(17)},function(e,t,r){"use strict";const i=r(5),n=r(6),a=r(9),o=r(12),s=(r(21),r(22)),l=r(10),u=(r(23),r(19)),c=r(11);function*d(e,t,r){let i=new Array(t.elements.length),a=0;for(let o=0;o<t.elements.length;++o)if(t.elements[o])if("SpreadElement"===t.elements[o].type){let s=yield*e.branch(t.elements[o].argument,r);if(!s.iterateAll)return n.makeTypeError(r.realm,t.elements[o].argument.srcName+" is not iterable.");let l=yield*s.iterateAll();for(let e of l)i[a++]=e}else i[a++]=yield*e.branch(t.elements[o],r);else++a;return e.yieldPower>=3&&(yield c.stepMinor),u.make(i,r.realm)}function*f(e,t,r){var a=r.realm;let o=yield*e.resolveRef(t.left,r,"="===t.operator);if(!o&&r.strict)return n.makeReferenceError(r.realm,"Invalid refrence in assignment.");let s,l="="==t.operator?i.undef:yield*o.getValue(),u=yield*e.branch(t.right,r);switch(e.yieldPower>=3&&(yield c.stepMinor),t.operator){case"=":s=u;break;case"+=":s=yield*l.add(u,a);break;case"-=":s=yield*l.subtract(u,a);break;case"*=":s=yield*l.multiply(u,a);break;case"/=":s=yield*l.divide(u,a);break;case"%=":s=yield*l.mod(u,a);break;case"<<=":s=yield*l.shiftLeft(u,a);break;case">>=":s=yield*l.shiftRight(u,a);break;case">>>=":s=yield*l.shiftRightZF(u,a);break;case"|=":s=yield*l.bitOr(u,a);break;case"&=":s=yield*l.bitAnd(u,a);break;case"^=":s=yield*l.bitXor(u,a);break;case"**=":s=yield*l.pow(u,a);break;default:throw new Error("Unknown assignment operator: "+t.operator)}return o?yield*o.setValue(s,r):yield*r.put(t.left.name,s,r),s}function*p(e,t,r){if("&&"==t.operator||"||"==t.operator)return yield*B(e,t,r);let i=yield*e.branch(t.left,r),n=yield*e.branch(t.right,r);return e.yieldPower>=4&&(yield c.stepMinor),yield*e.doBinaryEvaluation(t.operator,i,n,r)}function*h(e,t,r){let n=i.undef,a=r.createBlockChild();for(let r of t.body)"FunctionDeclaration"==r.type&&(n=yield*e.branch(r,a));for(let r of t.body)"FunctionDeclaration"!=r.type&&(n=yield*e.branch(r,a));return n}function*m(e,t,r){let a=t.label?t.label.name:void 0;return e.yieldPower>=1&&(yield c.stepMinor),new n(n.BREAK,i.undef,a)}function*y(e,t,r){return yield*v(e,t,t.callee,r,(function*(){let i=new Array(t.arguments.length),a=0;for(let o=0;o<t.arguments.length;++o)if("SpreadElement"===t.arguments[o].type){let s=yield*e.branch(t.arguments[o].argument,r);if(!s.iterateAll)return n.makeTypeError(r.realm,t.arguments[o].argument.srcName+" is not iterable.");let l=yield*s.iterateAll();for(let e of l)i[a++]=e}else i[a++]=yield*e.branch(t.arguments[o],r);return i}))}function*v(e,t,r,a,o){let s,l,u=a.strict?i.undef:a.global.thiz;if("Super"==r.type)s=yield*e.branch(r,a),u=a.thiz;else if("MemberExpression"===r.type){if(u=l=yield*e.branch(r.object,a),s=yield*e.partialMemberExpression(u,r,a),"Super"==r.object.type&&(u=a.thiz),s instanceof n){if(s.type==n.THROW)return s;s=s.value}}else s=yield*e.branch(r,a);if("NewExpression"===t.type&&(u=yield*s.makeThisForNew(a.realm),u instanceof n)){if(u.type==n.THROW)return u;u=u.value}if("function"==typeof s.rawCall)return yield*s.rawCall(t,e,a);let d=yield*o(),f=r.srcName||r.source()||s.jsTypeName;if(e.yieldPower>=1&&(yield c.stepMajor),!s.isCallable){let t=n.makeTypeError(e.realm,f+" is not a function");return yield*t.addExtra({code:"CallNonFunction",target:s,targetAst:r,targetName:f,base:l}),t}e.debug&&e.incrCtr("fxInvocationCount",r.srcName);let p=s.call(u,d,a,{asConstructor:"NewExpression"===t.type,callNode:t,evaluator:e,callee:s});if(p instanceof n)return p;if("function"!=typeof p.next)return console.log("Generator Failure",p),n.makeTypeError(e.realm,f+" didnt make a generator");let h=yield*p;return"NewExpression"===t.type?h instanceof i?"undefined"===h.specTypeName?u:h:u:h}let g={};function*b(e,t,r,n,a,o){if("constructor"==a.kind);else{let s,u;if(e.funcSourceAST=a,a.computed){let e=yield*n.branch(a.key,o);s=yield*e.toStringNative(n.realm)}else s=a.key.name;switch(a.static?(e.superTarget=t.getPrototype(),Object.prototype.hasOwnProperty.call(t.properties,s)?u=t.properties[s]:(u=new l(i.undef),t.rawSetProperty(s,u))):(e.superTarget=r.getPrototype(),Object.prototype.hasOwnProperty.call(r.properties,s)?u=r.properties[s]:(u=new l(i.undef),r.rawSetProperty(s,u))),u.enumerable=!1,a.kind){case"set":u.setter=e;break;case"get":u.getter=e;break;case"method":u.value=e}}return i.undef}function*w(t,r,n){let a,s=void 0;for(let e of r.body.body)if("MethodDefinition"==e.type&&"constructor"==e.kind){s=yield*t.branch(e.value,n),s.superTarget=s,s.funcSourceAST=r;break}r.superClass&&(a=yield*t.branch(r.superClass,n)),s||(s=new o(t.realm),s.call=a?function*(e,t,r,n){return yield*a.call(e,t,r,n),i.undef}:function*(){return i.undef});let l=new o(t.realm);yield*s.set("prototype",l),yield*s.set("name",i.fromNative(r.id.name)),yield*l.set("constructor",s),a&&(s.setPrototype(a),l.setPrototype(a.getPrototypeProperty()),s.parentClassInstance=a),s.superTarget=s.getPrototype(),n.add(r.id.name,s),t.yieldPower>=3&&(yield c.stepMinor);for(let i of r.body.body){if(!e.exports.classFeatures[i.type])throw new Error("Unsuported Class Feature "+i.type);yield*e.exports.classFeatures[i.type](s,l,t,i,n)}return s}function*N(e,t,r){let i=yield*w(e,t,r);return yield*r.put(t.id.name,i),i}function*k(e,t,r){let n=yield*e.branch(t.test,r);return e.yieldPower>=4&&(yield c.stepMinor),n.truthy?yield*e.branch(t.consequent,r):t.alternate?yield*e.branch(t.alternate,r):i.undef}function*P(e,t,r){let a=t.label?t.label.name:void 0,o=new n(n.CONTINUE,i.undef,a);return e.yieldPower>=1&&(yield c.stepMinor),o}function*E(e,t,r){let n=i.undef,a=e;e.yieldPower>0&&(yield c.stepMinor),e.pushFrame({generator:function*(){do{n=yield a.branchFrame("continue",t.body,r,{labels:t.labels})}while((yield*a.branch(t.test,r)).truthy)}(),type:"loop",labels:t.labels,ast:t});yield c.waitForFramePop;return i.undef}function*S(e,t,r){return e.yieldPower>=5&&(yield c.stepMinor),i.undef}function*x(e,t,r){return e.yieldPower>4&&(yield c.stepMinor),yield*e.branch(t.expression,r)}function*j(e,t,r){if(e.yieldPower>=4&&(yield c.stepMinor),"undefined"===t.name)return i.undef;if(!r.has(t.name)){0;let i=n.makeReferenceError(e.realm,t.name+" is not defined");return yield*i.addExtra({code:"UndefinedVariable",when:"read",ident:t.name,strict:r.strict}),yield i}let a=r.ref(t.name);return yield*a.getValue()}function*O(e,t,r){return e.yieldPower>=2&&(yield c.stepStatement),(yield*e.branch(t.test,r)).truthy?yield*e.branch(t.consequent,r):t.alternate?yield*e.branch(t.alternate,r):i.undef}function*T(e,t,r){return i.undef}function*V(e,t,r){let n=i.true,a=t.init&&"let"==t.init.kind?e=>{let i=r.createChild();for(let r of t.init.declarations)i.addBlock(r.id.name,e.get(r.id.name));return i}:e=>e,o=a(r);t.test&&(n=yield*e.branch(t.test,r));let s=i.undef;for(;n.truthy;)e.topFrame.ast=t,e.yieldPower>0&&(yield c.eventLoopBodyStart),s=yield e.branchFrame("continue",t.body,o,{labels:t.labels}),o=a(o),t.update&&(yield*e.branch(t.update,o)),t.test&&(n=yield*e.branch(t.test,o))}function*F(e,t,r){e.yieldPower>0&&(yield c.stepStatement),t.init&&(yield*e.branch(t.init,r)),e.pushFrame({generator:V(e,t,r),type:"loop",labels:t.labels,ast:t});yield c.waitForFramePop;return i.undef}function*R(e,t,r){e.yieldPower>0&&(yield c.stepStatement);let a,o=i.undef,s=(yield*e.branch(t.right,r)).observableProperties(r.realm),l=e;if(r=r.createBlockChild(),"VariableDeclaration"===t.left.type){let e=t.left.declarations[0];"var"!=t.left.kind&&r.addBlock(e.id.name,i.undef),a=r.ref(e.id.name,r)}else a=r.ref(t.left.name,r);if(!a){if(r.strict)return n.makeReferenceError(r.realm,t.left.name+" is not defined");r.global.add(t.left.name,i.undef),a=r.ref(t.left.name)}e.pushFrame({generator:function*(){for(let e of s)yield*a.setValue(e,r),o=yield l.branchFrame("continue",t.body,r,{labels:t.labels})}(),type:"loop",labels:t.labels,ast:t});yield c.waitForFramePop;return i.undef}function*I(e,t,r){e.yieldPower>0&&(yield c.stepStatement);let n,a=i.undef,o=yield*e.branch(t.right,r),s=o.observableProperties(r.realm),l=e;if(r=r.createBlockChild(),"VariableDeclaration"===t.left.type){let e=t.left.declarations[0];"var"==e.kind?r.add(e.id.name,i.undef):r.addBlock(e.id.name,i.undef),n=r.ref(t.left.declarations[0].id.name,r.realm)}else n=r.ref(t.left.name,r.realm);e.pushFrame({generator:function*(){for(let e of s)yield*n.setValue(yield*o.get(yield*e.toStringNative()),r),a=yield l.branchFrame("continue",t.body,r,{labels:t.labels})}(),type:"loop",labels:t.labels});yield c.waitForFramePop;return i.undef}function*A(e,t,r){e.yieldPower>0&&(yield c.stepMajor);let n=new a(t,r);return r.add(t.id.name,n),i.undef}function*M(e,t,r){e.yieldPower>0&&(yield c.stepMajor);let i=new a(t,r);return"ArrowFunctionExpression"===t.type&&(i.thiz=r.thiz,t.expression&&(i.returnLastValue=!0)),i}function*C(e,t,r){return e.yieldPower>=5&&(yield c.stepMinor),yield*e.branch(t.body,r)}function*L(e,t,r){if(e.yieldPower>=5&&(yield c.stepMinor),t.regex)return s.make(new RegExp(t.regex.pattern,t.regex.flags),r.realm);if(null===t.value){if("null"===e.raw)return i.null;let r=parseFloat(t.raw);return isNaN(r)?e.fromNative(null,t):e.fromNative(r,t)}return e.realm.makeLiteralValue(t.value,t)}function*B(e,t,r){let i=yield*e.branch(t.left,r);switch(e.yieldPower>=4&&(yield c.stepMajor),t.operator){case"&&":return i.truthy?yield*e.branch(t.right,r):i;case"||":return i.truthy?i:yield*e.branch(t.right,r);default:throw new Error("Unknown logical operator: "+t.operator)}}function*z(e,t,r){e.yieldPower>=4&&(yield c.stepMinor);let i=yield*e.branch(t.object,r);return yield*e.partialMemberExpression(i,t,r)}function*q(e,t,r){for(let t=0;t<e.frames.length-1;++t){if("function"===e.frames[t].type)return"NewExpression"==e.frames[t+1].ast.type?e.frames[t].callee:i.undef}return i.undef}function*U(e,t,r){var n=new o(r.realm);for(let a=0;a<t.properties.length;++a){let o,s=t.properties[a];t.computed?o=(yield*e.branch(s.key,r)).toNative().toString():"Identifier"==s.key.type?o=s.key.name:"Literal"==s.key.type&&(o=s.key.value.toString());let u,c=yield*e.branch(s.value,r);switch(Object.prototype.hasOwnProperty.call(n.properties,o)?u=n.properties[o]:(u=new l(i.undef),n.rawSetProperty(o,u)),s.kind){case"init":default:u.value=c;break;case"get":u.getter=c;break;case"set":u.setter=c}}return e.yieldPower>0&&(yield c.stepMajor),n}function*D(e,t,r){let n=i.undef;if(t.vars)for(var a in t.vars)r.add(a,i.undef);!0===t.strict&&(r.strict=!0),e.yieldPower>=4&&(yield c.stepMajor);for(let i of t.body)n=yield*e.branch(i,r);return n}function*W(e,t,r){let a=i.undef;return t.argument&&(a=yield*e.branch(t.argument,r)),e.yieldPower>=2&&(yield c.stepMajor),new n(n.RETURN,a)}function*H(e,t,r){let n=i.undef;e.yieldPower>=4&&(yield c.stepMajor);for(let i of t.expressions)n=yield*e.branch(i,r);return n}function*_(e,t,r){let i;for(let t=0;t<e.frames.length&&(i=e.frames[t],!i.creator);++t);return i.creator.superTarget}function*$(e,t,r){e.yieldPower>=2&&(yield c.stepMajor);let n=yield*e.branch(t.discriminant,r),a=i.undef,o=0,s=new Array(t.cases.length),l=!1;for(let i=0;i<t.cases.length;++i){let a=t.cases[i];if(a.test){let t=yield*e.branch(a.test,r),l=yield*t.tripleEquals(n);l.truthy&&++o,s[i]=l.truthy}}e.pushFrame({generator:function*(e,t){for(let i=0;i<t.cases.length;++i){let n=t.cases[i];if(!l){if(n.test){if(!s[i])continue}else if(0!==o)continue;l=!0}for(let t of n.consequent)a=yield*e.branch(t,r)}}(e,t),type:"loop",labels:t.labels});yield c.waitForFramePop;return a}function*K(e,t,r){let n=t.quasi.quasis,a=t.quasi.expressions,o=(i.fromNative(n[0].value.cooked),yield*e.branch(t.tag,r),[]),s=[];for(let t=0;t<n.length;++t)o.push(e.realm.fromNative(n[t].value.cooked)),s.push(e.realm.fromNative(n[t].value.raw));let c=u.make(o,e.realm),d=u.make(s,e.realm);c.rawSetProperty("raw",new l(d,!1));let f=[c];for(let t=0;t<a.length;++t)f.push(yield*e.branch(a[t],r));return yield*v(e,t,t.tag,r,(function*(){return f}))}function*G(e,t,r){let n=i.fromNative(t.quasis[0].value.cooked);for(let a=0;a<t.expressions.length;++a)n=yield*n.add(yield*e.branch(t.expressions[a],r)),n=yield*n.add(i.fromNative(t.quasis[a+1].value.cooked));return n}function*J(e,t,r){return e.yieldPower>=4&&(yield c.stepMajor),r.thiz?r.thiz:i.undef}function*X(e,t,r){let i=yield*e.branch(t.argument,r);return e.yieldPower>=2&&(yield c.stepMajor),new n(n.THROW,i)}function*Y(e,t,r){e.yieldPower>=2&&(yield c.stepMajor),t.finalizer&&e.pushFrame({generator:e.branch(t.finalizer,r),type:"finally",scope:r});let i=yield e.branchFrame("catch",t.block,r);if(i instanceof n&&i.type==n.THROW){if(!t.handler)return i;let n=r.createChild();return n.add(t.handler.param.name,i.value),yield*e.branch(t.handler.body,n)}return i}function*Z(e,t,r){let n;e.yieldPower>=3&&(yield c.stepMajor);let a=yield*e.resolveRef(t.argument,r,!0),o=i.nan;switch(a&&(o=yield*a.getValue()),void 0===o&&(o=i.nan),t.operator){case"++":n=yield*o.add(e.fromNative(1));break;case"--":n=yield*o.subtract(e.fromNative(1));break;default:throw new Error("Unknown update expression type: "+t.operator)}return a&&(yield*a.setValue(n,r)),t.prefix?n:o}function*Q(e,t,r){if(e.yieldPower>=4&&(yield c.stepMajor),"delete"===t.operator){if("MemberExpression"!==t.argument.type&&"Identifier"!==t.argument.type)return i.true;let a=yield*e.resolveRef(t.argument,r);if(!a)return i.false;if(a.isVariable||!a.del)return i.false;let o=a.del(r);return o instanceof n?yield o:i.fromNative(o)}if("typeof"===t.operator&&"Identifier"==t.argument.type&&!r.has(t.argument.name))return yield*i.undef.typeOf();let a=yield*e.branch(t.argument,r);switch(t.operator){case"-":return yield*a.unaryMinus();case"+":return yield*a.unaryPlus();case"!":return yield*a.not();case"~":return yield*a.bitNot();case"typeof":return yield*a.typeOf();case"void":return i.undef;default:throw new Error("Unknown binary operator: "+t.operator)}}function*ee(e,t,r){let a=t.kind;e.yieldPower>=3&&(yield c.stepMajor);let o=(t,i,o)=>{if("const"===a){if(r.has(t))return n.makeSyntaxError(e.realm,`Identifier '${t}' has already been declared`);r.addConst(t,o)}else if("let"==a){if(r.blockHas(t))return n.makeSyntaxError(e.realm,`Identifier '${t}' has already been declared`);r.addBlock(t,o)}else!i.init&&r.has(t)||r.add(t,o);return!1};for(let a of t.declarations)if("Identifier"==a.id.type){let t=i.undef,n=a.id.name;a.init&&(t=yield*e.branch(a.init,r));let s=o(n,a,t);if(s)return s}else if("ObjectPattern"==a.id.type){let t=i.undef;a.init&&(t=yield*e.branch(a.init,r));for(let e of a.id.properties){let r=o(e.value.name,a,yield*t.get(e.key.name));if(r)return r}}else{if("ArrayPattern"!=a.id.type)return yield n.typeError("Couldnt resolve declarations component: "+a.id.type);{let t=i.undef;a.init&&(t=yield*e.branch(a.init,r));let n=0;for(let e of a.id.elements){if("RestElement"===e.type){let i=(yield*t.get("length")).toNative(),s=[];for(;n<i;)s.push(yield*t.get(n++));return o(e.argument.name,a,u.make(s,r.realm))}{let r=o(e.name,a,yield*t.get(n));if(r)return r;++n}}}}return i.undef}function*te(e,t,r){let n=i.undef;for(;(yield*e.branch(t.test,r)).truthy;)e.topFrame.ast=t,e.yieldPower>0&&(yield c.eventLoopBodyStart),n=yield e.branchFrame("continue",t.body,r)}function*re(e,t,r){e.yieldPower>0&&(yield c.stepMajor),e.pushFrame({generator:te(e,t,r),type:"loop",labels:t.labels,ast:t});yield c.waitForFramePop;return i.undef}function*ie(e,t,r){if(e.yieldPower>0&&(yield c.stepMajor),r.strict)return n.makeSyntaxError(e.realm,"Strict mode code may not include a with statement");let i=yield*e.branch(t.object,r),a=r.createBlockChild();if(i instanceof o){let e=i.getPropertyValueMap();for(let t in e)a.set(t,e[t])}return yield*e.branch(t.body,a)}g.MethodDefinition=function*(e,t,r,i,n){yield*b(yield*r.branch(i.value,n),e,t,r,i,n)},g.ClassMethod=function*(e,t,r,i,n){let a=yield*M(r,i,n);return yield*b(a,e,t,r,{kind:i.kind,static:i.static,key:i.key},n)},g.EmptyStatement=function*(){return i.undef},e.exports={evaluateIdentifier:j,findNextStep:function(e){switch(e){case"ArrayExpression":return d;case"ArrowFunctionExpression":return M;case"AssignmentExpression":return f;case"BinaryExpression":return p;case"BreakStatement":return m;case"BlockStatement":return h;case"CallExpression":return y;case"ClassDeclaration":return N;case"ClassExpression":return w;case"ConditionalExpression":return k;case"DebuggerStatement":return S;case"DoWhileStatement":return E;case"ContinueStatement":return P;case"EmptyStatement":return S;case"ExpressionStatement":return x;case"ForStatement":return F;case"ForInStatement":return R;case"ForOfStatement":return I;case"FunctionDeclaration":return A;case"FunctionExpression":return M;case"Identifier":return j;case"IfStatement":return O;case"ImportDeclaration":return T;case"LabeledStatement":return C;case"Literal":return L;case"LogicalExpression":return B;case"MetaProperty":return q;case"MemberExpression":return z;case"NewExpression":return y;case"ObjectExpression":return U;case"Program":return D;case"ReturnStatement":return W;case"SequenceExpression":return H;case"Super":return _;case"SwitchStatement":return $;case"TaggedTemplateExpression":return K;case"TemplateLiteral":return G;case"ThisExpression":return J;case"ThrowStatement":return X;case"TryStatement":return Y;case"UnaryExpression":return Q;case"UpdateExpression":return Z;case"VariableDeclaration":return ee;case"WhileStatement":return re;case"WithStatement":return ie;case"BooleanLiteral":case"StringLiteral":case"NumericLiteral":case"NullLiteral":return L;default:throw new Error("Unknown AST Node Type: "+e)}},classFeatures:g,doResolveRef:function*e(t,r,i,a){switch(t.type){case"Identifier":let o=r.ref(t.name,r.realm);return o||(o={getValue:function*(){let e=n.makeReferenceError(r.realm,t.name+" is not defined");return yield*e.addExtra({code:"UndefinedVariable",when:"read",ident:t.name,strict:r.strict}),yield e},del:function(){return!0}},!i||r.strict?o.setValue=function*(){let e=n.makeReferenceError(r.realm,t.name+" is not defined");return yield*e.addExtra({code:"UndefinedVariable",when:"write",ident:t.name,strict:r.strict}),yield e}:o.setValue=function*(e){r.global.set(t.name,e,r);let i=r.global.ref(t.name,r);this.setValue=i.setValue,this.getValue=i.getValue,this.del=r.strict?i.deleteStrict:i.delete}),o;case"MemberExpression":let s,l=yield*a(t.object,r);return s=t.computed?(yield*a(t.property,r)).toNative():t.property.name,l?l.ref?l.ref(s,r):yield n.typeError("Can't write property of non-object type: "+s):yield n.typeError("Can't write property of undefined: "+s);case"ArrayPattern":let u=[];for(let i of t.elements)u.push(yield*e(i,r,!1,a));return{setValue:function*(e){let t=0;for(let r of u){if(!e.has(t))break;yield*r.setValue(yield*e.get(t)),++t}}};case"ObjectPattern":let c={};for(let i of t.properties)c[i.key.name]=yield*e(i.value,r,!1,a);return{setValue:function*(e){for(let t in c){if(!e.has(t))break;yield*c[t].setValue(yield*e.get(t))}}};case"AssignmentPattern":let d=yield*e(t.left,r,!1,a),f=yield*a(t.right,r);return yield*d.setValue(f),d;case"VariableDeclarator":return yield*e(t.id,r,i,a);default:return yield n.typeError("Couldnt resolve ref component: "+t.type)}}}},function(e,t,r){"use strict";r(14);const i=r(5);class n extends i{constructor(e){var t,r,i;super(e),this.resolved=!1,this.successful=void 0,this.value=void 0,this.defered=(i=new Promise((function(e,i){t=e,r=i})),{resolve:t,reject:r,promise:i})}static make(e){var t=new n(null);return e.then((function(e){t.resolve(i.fromNative(e))}),(function(e){t.reject(i.fromNative(e))})),t}resolve(e){this.value=e,this.resolved=!0,this.successful=!0,this.defered.resolve(e)}reject(e){this.value=e,this.resolved=!0,this.successful=!1,this.defered.resolve(e)}then(){var e=this.defered.promise;return e.then.apply(e,arguments)}get jsTypeName(){return"internal:future"}get debugString(){return"[Future]"}}e.exports=n},function(e,t,r){"use strict";r(13);const i=r(12),n=r(5);class a extends i{constructor(e){super(e,e.RegExpPrototype)}static make(e,t){let r=new a(t);return r.regexp=e,r.setImmediate("source",n.fromNative(e.source)),r.properties.source.enumerable=!1,r.setImmediate("global",n.fromNative(e.global)),r.properties.global.enumerable=!1,r.setImmediate("ignoreCase",n.fromNative(e.ignoreCase)),r.properties.ignoreCase.enumerable=!1,r.setImmediate("multiline",n.fromNative(e.multiline)),r.properties.multiline.enumerable=!1,r}toNative(){return this.regexp}get debugString(){return this.regexp.toString()}}a.prototype.clazz="RegExp",e.exports=a},function(e,t,r){"use strict";r(13);const i=r(12),n=(r(5),r(11));e.exports=class extends i{constructor(e,t){super(e,t),this.realm=e}createNativeAnalog(){if(!this.native){let t,r=this.proto.nativeClass||Error;if(this.native=new r,this.native.stack)t=this.native.stack;else try{throw this.native}catch(e){t=e.stack}let i=t?t.split(/\n/):[];if(t.length>1){let e=i.shift();for(;/at (ErrorInstance.createNativeAnalog|ErrorObject.make|Function.makeTypeError)/.test(i[0]);)i.shift();this.native.stack=e+"\n"+i.join("\n")}for(var e in this.extra)this.native[e]=this.extra[e]}return this.native}toNative(){let e=this.createNativeAnalog(),t=this.properties.message.value;return t&&(e.message=t.toNative()),this.properties.stack&&(t.stack=this.properties.stack.value.native),e.value=this,e}*addExtra(e){if(!this.realm.options.extraErrorInfo)return;let t=yield n.getEvaluator;if(t){let r=t.topFrame.scope;e.ast=t.topFrame.ast;switch(e.scope=r,e.ast.loc&&(e.line=e.ast.loc.start.line),e.code){case"UndefinedVariable":case"SmartAccessDenied":r&&(e.candidates=r.getVariableNames());break;case"CallNonFunction":let t;t=e.base&&e.base.getPropertyValueMap?e.base.getPropertyValueMap():r.object.getPropertyValueMap(),e.candidates=[];for(let r in t){let i=t[r];i&&i.isCallable&&e.candidates.push(r)}}}if(this.native)for(var r in e)-1!==["ast","scope","candidates","targetAst"].indexOf(r)?Object.defineProperty(this.native,r,{value:e[r],enumerable:!1}):this.native[r]=e[r];this.extra=e}}},function(e,t,r){"use strict";const i=r(14),n=r(5);class a extends i{toNative(){}get jsTypeName(){return"undefined"}*tripleEquals(e,t){return e instanceof a?n.true:n.false}*add(e){return n.fromNative(void 0+e.toNative())}*asString(){return"undefined"}*toPrimitiveValue(e){return this}*toNumberValue(){return n.nan}*toStringValue(){return n.fromNative("undefined")}get debugString(){return"undefined"}}e.exports=a},function(e,t,r){"use strict";const i=r(5),n=r(12),a=r(6);class o extends n{constructor(e){super(e,e.FunctionPrototype)}static make(e,t,r){let i=new o(e);return i.fn=t,i.binding=r,i}static makeForNative(e,t){let r=new o(e);return r.fn=function*(e,r){let n=new Array(r.length);for(let e=0;e<r.length;++e)n[e]=r[e].toNative();let a=e.toNative(),o=t.apply(a,n);return i.fromNative(o)},r}*call(e,t,r,n){let o=!1,s=0;try{n&&n.evaluator&&n.evaluator.debug&&(o=!0,s=Date.now());let e=r?r.createChild():r;e&&(e.strict=!0);let t=yield*this.fn.apply(this.binding,arguments,e,n);return t instanceof a?t:(t instanceof i||(t=r.realm.makeForForeignObject(t)),o&&n.evaluator.incrCtr("fxTime",n.callNode.callee.srcName,Date.now()-s),new a(a.NORMAL,t))}catch(e){return o&&n.evaluator.incrCtr("fxTime",n.callNode.callee.srcName,Date.now()-s),new a(a.THROW,r.realm.makeForForeignObject(e))}}*makeThisForNew(e){return yield a.typeError("function is not a constructor")}get debugString(){return"function() { [Native Code] }"}}o.prototype.clazz="Function",e.exports=o},function(e,t,r){"use strict";(function(t){const i=r(27),n=r(28);let a;a=i.readFileSync?i.readFileSync(n.join(t,"node_modules","skulpty","lib","stdlib.js"),"utf8"):r(!function(){var e=new Error("Cannot find module 'raw-loader!./node_modules/skulpty/lib/stdlib.js'");throw e.code="MODULE_NOT_FOUND",e}()),e.exports=a.replace(/^var pythonRuntime = module.exports/,"var __pythonRuntime")}).call(this,"/")},function(e,t){},function(e,t,r){(function(e){function r(e,t){for(var r=0,i=e.length-1;i>=0;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i],i,e)&&r.push(e[i]);return r}t.resolve=function(){for(var t="",n=!1,a=arguments.length-1;a>=-1&&!n;a--){var o=a>=0?arguments[a]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,n="/"===o.charAt(0))}return(n?"/":"")+(t=r(i(t.split("/"),(function(e){return!!e})),!n).join("/"))||"."},t.normalize=function(e){var a=t.isAbsolute(e),o="/"===n(e,-1);return(e=r(i(e.split("/"),(function(e){return!!e})),!a).join("/"))||a||(e="."),e&&o&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var n=i(e.split("/")),a=i(r.split("/")),o=Math.min(n.length,a.length),s=o,l=0;l<o;l++)if(n[l]!==a[l]){s=l;break}var u=[];for(l=s;l<n.length;l++)u.push("..");return(u=u.concat(a.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,i=-1,n=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!n){i=a;break}}else n=!1;return-1===i?r?"/":".":r&&1===i?"/":e.slice(0,i)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,i=-1,n=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!n){r=t+1;break}}else-1===i&&(n=!1,i=t+1);return-1===i?"":e.slice(r,i)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,i=-1,n=!0,a=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===i&&(n=!1,i=o+1),46===s?-1===t?t=o:1!==a&&(a=1):-1!==t&&(a=-1);else if(!n){r=o+1;break}}return-1===t||-1===i||0===a||1===a&&t===i-1&&t===r+1?"":e.slice(t,i)};var n="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(29))},function(e,t){var r,i,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,u=[],c=!1,d=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&p())}function p(){if(!c){var e=s(f);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||c||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}])}));